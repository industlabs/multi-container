[{"id":"e2b02a8c.c19d98","type":"tab","label":"***Git Dowload From Server***","disabled":false},{"id":"3ee541b0.01cf8e","type":"tab","label":"***Git Update Server***"},{"id":"175572eb.e90ebd","type":"tab","label":"***NetPlan***","disabled":false,"info":""},{"id":"5b7e9b69.9ef434","type":"tab","label":"Alarm Email"},{"id":"75124cce.05e034","type":"tab","label":"Auto Tune"},{"id":"5acbf982.b822a8","type":"tab","label":"Control"},{"id":"8b60d34d.49277","type":"tab","label":"Counters"},{"id":"fd027482.cad878","type":"tab","label":"Date and Time"},{"id":"f6e410f4.f25f1","type":"tab","label":"Digital IO","disabled":false},{"id":"41fc4f72.a07cb","type":"tab","label":"Distributor"},{"id":"e0c1b2eb.002b2","type":"tab","label":"Factory Setup"},{"id":"8dddd7b6.86c838","type":"tab","label":"Pressure Calibration"},{"id":"8ee48a3f.e52898","type":"tab","label":"Runtimes"},{"id":"40de537b.64e2bc","type":"tab","label":"Setpoints"},{"id":"294ea918.69a4f6","type":"tab","label":"Startup"},{"id":"6a08e8fc.a6fda8","type":"tab","label":"Store Variables"},{"id":"3e413809.1b57a8","type":"tab","label":"VIS Input/Output","disabled":false},{"id":"46d0c085.aab64","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"Helvetica Neue","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"Helvetica Neue"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"ab4cd21.673823","type":"modbus-client","z":"","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"tcpHost":"192.168.254.99","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyS1","serialType":"RTU","serialBaudrate":"38400","serialDatabits":"8","serialStopbits":"1","serialParity":"odd","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"1000","reconnectOnTimeout":false,"reconnectTimeout":"2000","parallelUnitIdsAllowed":true},{"id":"21117e52.b711d2","type":"json-db-collection","z":"","name":"","collection":"calibration","save":true},{"id":"5391358a.10a3ec","type":"json-db-collection","z":"","name":"","collection":"Startup","save":true},{"id":"6ab1b86.2115848","type":"json-db-collection","z":"","name":"","collection":"Runtimes","save":true},{"id":"a99ce543.88b118","type":"json-db-collection","z":"","name":"","collection":"Setpoints","save":true},{"id":"10a139d5.e5e026","type":"ui_group","z":"","name":"CPU","tab":"28eb18f1.5d6b48","order":2,"disp":true,"width":"6","collapse":true},{"id":"6d1853dd.8717ec","type":"ui_group","z":"","name":"SD card","tab":"28eb18f1.5d6b48","order":4,"disp":true,"width":"6","collapse":true},{"id":"935475de.46eda8","type":"ui_group","z":"","name":"Memory","tab":"28eb18f1.5d6b48","order":3,"disp":true,"width":"6","collapse":true},{"id":"c3fc6e7b.9c728","type":"ui_group","z":"","name":"Buttons","tab":"28eb18f1.5d6b48","order":1,"disp":false,"width":"3","collapse":false},{"id":"28eb18f1.5d6b48","type":"ui_tab","z":"","name":"System","icon":"settings","order":2},{"id":"c6286de9.28a88","type":"json-db-collection","z":"","name":"","collection":"network","save":true},{"id":"c8f8578.05fb1a8","type":"ui_group","z":"","name":"Users","tab":"70fffb8a.745a04","order":2,"disp":true,"width":"9","collapse":false},{"id":"70fffb8a.745a04","type":"ui_tab","z":"","name":"Home Tab","icon":"dashboard","order":3},{"id":"f7a69691.9fba78","type":"ui_group","z":"","name":"CPU Load","tab":"3b9f2c20.5e9234","order":2,"disp":true,"width":"6"},{"id":"10ad6f0a.bb73c1","type":"ui_group","z":"","name":"Memory","tab":"3b9f2c20.5e9234","order":3,"disp":true,"width":"6"},{"id":"24ff4188.c497ee","type":"ui_group","z":"","name":"System Information","tab":"3b9f2c20.5e9234","order":1,"disp":true,"width":"6"},{"id":"3b9f2c20.5e9234","type":"ui_tab","z":"","name":"System","icon":"computer"},{"id":"9d675829.4a20c8","type":"vis in","z":"3ee541b0.01cf8e","language":"en","x":70,"y":140,"wires":[[]]},{"id":"54f58f8e.3fb28","type":"switch","z":"3ee541b0.01cf8e","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"git_push","vt":"str"},{"t":"eq","v":"git_reboot","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":241,"y":149,"wires":[["baeb1716.9f0be8","3c4ed4b2.e2ddac"],["7bf69019.0e387"]]},{"id":"2016ce56.853122","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":324.75,"y":666.25,"wires":[["21c47668.fc0d8a"]]},{"id":"76f0043a.e336bc","type":"bigexec","z":"3ee541b0.01cf8e","name":"git commit flows","command":"sudo git commit -m \"flows commit\"","commandArgs":"","minError":1,"minWarning":1,"cwd":"/opt/CAC/","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":491,"y":734,"wires":[[],[],[]]},{"id":"c1944d81.3e263","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":325.75,"y":740.25,"wires":[["76f0043a.e336bc","e99c5d69.f4979"]]},{"id":"8226e97.7d65e18","type":"bigexec","z":"3ee541b0.01cf8e","name":"git push","command":"sudo git push -u origin master","commandArgs":"","minError":1,"minWarning":1,"cwd":"/opt/CAC/","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":816,"y":737,"wires":[[],[],[]]},{"id":"e99c5d69.f4979","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":666,"y":737,"wires":[["8226e97.7d65e18","2fdb8f45.0e893","28e2b7dc.c44538","8f4c1135.821bc"]]},{"id":"8615d5ab.6e2198","type":"comment","z":"3ee541b0.01cf8e","name":"Update to ---->>>>Server ","info":"","x":410,"y":60,"wires":[]},{"id":"d137dbf0.bfd7c8","type":"inject","z":"5acbf982.b822a8","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":167,"y":108,"wires":[["8e941c.830c6be8"]]},{"id":"d2885500.0f3a28","type":"inject","z":"5acbf982.b822a8","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":168.3333740234375,"y":142.33335971832275,"wires":[["8e941c.830c6be8"]]},{"id":"c44cb7ba.f40778","type":"inject","z":"5acbf982.b822a8","name":"blwr 0","topic":"blwr","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":94.66670989990234,"y":441.3333559036255,"wires":[["907e3962.b0c588"]]},{"id":"a77f95e0.79a488","type":"inject","z":"5acbf982.b822a8","name":"blwr 1","topic":"blwr","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":98.00003814697266,"y":485.666729927063,"wires":[["907e3962.b0c588"]]},{"id":"907e3962.b0c588","type":"function","z":"5acbf982.b822a8","name":"global set blwr","func":"global.set('blwr',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":271.0000305175781,"y":501.0001173019409,"wires":[[]]},{"id":"52f4a365.f1d26c","type":"inject","z":"5acbf982.b822a8","name":"blwr 2","topic":"blwr","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":101.33338165283203,"y":528.0001039505005,"wires":[["907e3962.b0c588"]]},{"id":"b959c458.7c6af8","type":"inject","z":"5acbf982.b822a8","name":"blwr 3","topic":"blwr","payload":"3","payloadType":"num","repeat":"","crontab":"","once":false,"x":99.99994659423828,"y":568.6666994094849,"wires":[["907e3962.b0c588"]]},{"id":"e521548.35b24a8","type":"inject","z":"5acbf982.b822a8","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":181.3333511352539,"y":653.9999899864197,"wires":[["7542d590.45834c","c35e1e7e.5bb2","56fbe282.0f7a4c","ae7f8fc0.3c0a8","9751a85f.a78348","8cebe643.416b08","5aa03aa3.461064"]]},{"id":"c6400d16.00d6c","type":"function","z":"5acbf982.b822a8","name":"global get alarm","func":"msg.payload = global.get('alarm');\nmsg.topic = 'alarm';\nreturn msg;","outputs":1,"noerr":0,"x":851.3333740234375,"y":524.6667003631592,"wires":[["2f46e774.088248"]]},{"id":"7542d590.45834c","type":"function","z":"5acbf982.b822a8","name":"global get blwr","func":"msg.payload = global.get('blwr');\nmsg.topic = 'blwr';\nreturn msg;","outputs":1,"noerr":0,"x":491.3809127807617,"y":807.1428775787354,"wires":[["db05998.8d2fd68","ecb61b91.728678","2f46e774.088248"]]},{"id":"db05998.8d2fd68","type":"function","z":"5acbf982.b822a8","name":"global get speed","func":"if (global.get('blwr')===0) {global.set('speed', 'BLWR IDLE');}\nif (global.get('blwr')===1) {global.set('speed', 'BLWR WIND UP');}\nif (global.get('blwr')===2) {global.set('speed', 'FULL SPEED');}\nif (global.get('blwr')===3) {global.set('speed', 'BLWR SLOWING');}\nif (global.get('blwr')===4) {global.set('speed', 'BLWR LOCKED OFF');}\nmsg.payload = global.get('speed');\nmsg.topic = 'speed';\nreturn msg;","outputs":1,"noerr":0,"x":718.2382659912109,"y":910.1427593231201,"wires":[["2f46e774.088248"]]},{"id":"a36be1ca.486f1","type":"function","z":"5acbf982.b822a8","name":"global get phase","func":"msg.payload = global.get('phase');\nmsg.topic = 'phase';\nreturn msg;","outputs":1,"noerr":0,"x":851.6665725708008,"y":488.33331203460693,"wires":[["2f46e774.088248"]]},{"id":"56fbe282.0f7a4c","type":"function","z":"5acbf982.b822a8","name":"global get ballvalve","func":"msg.payload = global.get('ballvalve');\nmsg.topic = 'ballvalve';\nreturn msg;","outputs":1,"noerr":0,"x":496.99998474121094,"y":748.5713577270508,"wires":[["f21a12f2.aac7","2f46e774.088248"]]},{"id":"e235a256.64906","type":"inject","z":"5acbf982.b822a8","name":"FLOAT:Off 1","topic":"flt","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":147.45257186889648,"y":994.8889212608337,"wires":[["25164751.54b2b8"]]},{"id":"5d1bdf5f.a4fb4","type":"inject","z":"5acbf982.b822a8","name":"FLOAT:On 0","topic":"flt","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":139.00018310546875,"y":1056.365108013153,"wires":[["25164751.54b2b8"]]},{"id":"25164751.54b2b8","type":"function","z":"5acbf982.b822a8","name":"global set flt","func":"global.set('flt',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":358.07161712646484,"y":1038.1865830421448,"wires":[[]]},{"id":"ae7f8fc0.3c0a8","type":"function","z":"5acbf982.b822a8","name":"compare man_control, blwr, flt, alarm","func":"if (global.get('man_control')===1 && global.get ('flt')===1 && \nglobal.get ('blwr')===0 && global.get ('alarm')===0 && global.get ('tune')===0 && \nglobal.get('press_calibration')===0) {\nvar ballvalve = global.set ('ballvalve',1);\nmsg.payload = global.get ('ballvalve');\nmsg.topic = 'ballvalve';\nreturn msg;\n}\nelse \nif (global.get('dynFill')==1 && global.get ('blwr')===2 && global.get ('alarm')===0 && \nglobal.get ('tune')===0 && global.get('press_calibration')===0) {\nvar ballvalve = global.set ('ballvalve',1);\nmsg.payload = global.get ('ballvalve');\nmsg.topic = 'ballvalve';\nreturn msg;\n} else\nif (global.get('tune')===1) {\nmsg.payload = global.get ('ballvalve');\nmsg.topic = 'ballvalve';\nreturn msg;\n} else\nif (global.get('press_calibration')===1) {\nmsg.payload = global.get ('ballvalve');\nmsg.topic = 'ballvalve';\nreturn msg;\n} else\nglobal.set('ballvalve', 0 );\nmsg.payload = global.get ('ballvalve');\nmsg.topic = 'ballvalve';","outputs":1,"noerr":0,"x":599.8451843261719,"y":697.5833415985107,"wires":[["2f46e774.088248"]]},{"id":"cc682480.a5d148","type":"inject","z":"5acbf982.b822a8","name":"START - ON","topic":"start_stop","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":394.55553436279297,"y":1285.1111888885498,"wires":[["5e8215fd.34663c"]]},{"id":"2b0f2a0d.6334d6","type":"inject","z":"5acbf982.b822a8","name":"START OFF (STOP)","topic":"start_stop","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":399.65067291259766,"y":1320.0994720458984,"wires":[["5e8215fd.34663c"]]},{"id":"5e8215fd.34663c","type":"function","z":"5acbf982.b822a8","name":"global set START_STOP","func":"global.set('start_stop',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":733.8650207519531,"y":1305.33736038208,"wires":[["f2fc52c2.00b4a"]]},{"id":"316313ff.887bdc","type":"switch","z":"5acbf982.b822a8","name":"set topic start_stop","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"start_stop","vt":"str"}],"checkall":"true","outputs":1,"x":477.9365234375,"y":1164.7301025390625,"wires":[["8d40ad60.5062a"]]},{"id":"bd63bfca.00508","type":"trigger","z":"5acbf982.b822a8","op1":"","op2":"1","op1type":"nul","op2type":"num","duration":"80","extend":false,"units":"s","reset":"99","name":"WIND UP TMR","x":1502.3336753845215,"y":989.7143166065216,"wires":[["fd9834d3.d9aab8"]]},{"id":"b89772a3.7de3e","type":"trigger","z":"5acbf982.b822a8","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"2","extend":true,"units":"s","reset":"99","name":"blwer on","x":912.2856712341309,"y":968.4997072219849,"wires":[["ddbb1969.29ba88","fd064db5.d37a2"]]},{"id":"71047137.5c217","type":"function","z":"5acbf982.b822a8","name":"reset true","func":"global.set ('reset',99);\nreturn;","outputs":1,"noerr":0,"x":1294.9480438232422,"y":1211.1744122505188,"wires":[[]]},{"id":"ddbb1969.29ba88","type":"rbe","z":"5acbf982.b822a8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1085.8571739196777,"y":970.7142901420593,"wires":[["359ec9cb.c4f226"]]},{"id":"fd9834d3.d9aab8","type":"function","z":"5acbf982.b822a8","name":"global set blwr","func":"global.set('blwr',2);\nreturn ;","outputs":1,"noerr":0,"x":1656.0952529907227,"y":922.142993927002,"wires":[[]]},{"id":"359ec9cb.c4f226","type":"switch","z":"5acbf982.b822a8","name":"1 up 0 dwn","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1262.6191482543945,"y":964.9999961853027,"wires":[["bd63bfca.00508"],["6e53775b.131048"]]},{"id":"79241d7d.dd6914","type":"trigger","z":"5acbf982.b822a8","op1":"","op2":"1","op1type":"nul","op2type":"num","duration":"75","extend":false,"units":"s","reset":"99","name":"WIND DWN TMR","x":1508.3453979492188,"y":1107.1188735961914,"wires":[["9310ee59.a645d"]]},{"id":"6d084a50.4335b4","type":"change","z":"5acbf982.b822a8","name":"reset 99","rules":[{"t":"set","p":"payload","pt":"msg","to":"99","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1043.650619506836,"y":1120.49196767807,"wires":[["79241d7d.dd6914","71047137.5c217","bd63bfca.00508"]]},{"id":"8b50e0f3.335f6","type":"switch","z":"5acbf982.b822a8","name":"reset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"reset","vt":"str"}],"checkall":"true","outputs":1,"x":752.5078125,"y":1104.8729248046875,"wires":[["6d084a50.4335b4"]]},{"id":"6e53775b.131048","type":"function","z":"5acbf982.b822a8","name":"global set blwr","func":"global.set('blwr',3);\nreturn;","outputs":1,"noerr":0,"x":1545.7618103027344,"y":1049.285509109497,"wires":[[]]},{"id":"9310ee59.a645d","type":"function","z":"5acbf982.b822a8","name":"global set blwr","func":"global.set('blwr',0);\nreturn;","outputs":1,"noerr":0,"x":1659.6190719604492,"y":1178.714262008667,"wires":[[]]},{"id":"ecb61b91.728678","type":"switch","z":"5acbf982.b822a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"3","vt":"num"},{"t":"eq","v":"4","vt":"num"}],"checkall":"true","outputs":5,"x":656.7143669128418,"y":991.3810214996338,"wires":[[],["b89772a3.7de3e"],["b89772a3.7de3e"],["79241d7d.dd6914","b1f2439.6d339c"],["2f46e774.088248"]]},{"id":"f2fc52c2.00b4a","type":"function","z":"5acbf982.b822a8","name":"global check blwr","func":"var newmsg = msg.payload; var newmsg2 = global.get('blwr');\nif (newmsg2 ===0 && newmsg === 1) {global.set('blwr', 1);}\nif (newmsg2 ===0 && newmsg === 0) {global.set('blwr', 0);}\nif (newmsg2 ==1 && newmsg === 0) {global.set('blwr', 3);}\nif (newmsg2 ==2 && newmsg === 0) {global.set('blwr', 3);}\nif (newmsg2 ==3 && newmsg === 1) {global.set('blwr', 1);}\nif (newmsg2 ==3 && newmsg === 0) {global.set('blwr', 0);}\nif (global.get('reset')== 99 )  {global.set('blwr', 0);}\nmsg.payload = global.get('blwr');\nmsg.topic = 'blwr';\nreturn;","outputs":1,"noerr":0,"x":984.138916015625,"y":1302.718710899353,"wires":[[]]},{"id":"c35e1e7e.5bb2","type":"function","z":"5acbf982.b822a8","name":"global get man_fill","func":"if (global.get('man_control')===0) {global.set('man_fill', 'MAN FILL OFF');}\nif (global.get('man_control')==1) {global.set('man_fill', 'MAN FILL ON');}\nif (global.get('alarmonly_check')===0 && global.get('alarm') > 0) {global.set('man_fill', 'LOCKED OUT');}\nmsg.payload = global.get('man_fill');\nmsg.topic = 'man_fill';\nreturn msg;","outputs":1,"noerr":0,"x":650.8570938110352,"y":587.6189842224121,"wires":[["2f46e774.088248"]]},{"id":"314d7a3e.8dccd6","type":"function","z":"5acbf982.b822a8","name":"global set valve_state","func":"if (global.get('ballvalve')===0) {global.set('valve_state', 'WATER OFF');}\nelse if (global.get('ballvalve')===1) {global.set('valve_state', 'WATER ADDING');}\nelse if (global.get('alarm')>0) {global.set('valve_state', 'LOCKED OUT');}\nmsg.payload = global.get('valve_state');\nmsg.topic = 'valve_state';\nreturn msg;","outputs":1,"noerr":0,"x":1007.8215103149414,"y":849.9642038345337,"wires":[["2f46e774.088248"]]},{"id":"2f073487.15d4fc","type":"trigger","z":"5acbf982.b822a8","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"3","extend":true,"units":"s","reset":"99","name":"valve off delay","x":904.630729675293,"y":770.7976570129395,"wires":[["314d7a3e.8dccd6"]]},{"id":"f21a12f2.aac7","type":"switch","z":"5acbf982.b822a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":719.6308288574219,"y":782.4285593032837,"wires":[["2f073487.15d4fc"],["314d7a3e.8dccd6"]]},{"id":"920593a6.ccce7","type":"function","z":"5acbf982.b822a8","name":"global set system_state","func":"if (global.get('blwr')===0) {global.set('system_state', 'ALARM IDLE');}\nif (global.get('blwr')===1) {global.set('system_state', 'SETTING ALARM');}\nif (global.get('blwr')===2) {global.set('system_state', 'OPERATION SAFE');}\nif (global.get('blwr')===3) {global.set('system_state', 'ALARM IN-ACTIVE');}\nif (global.get('blwr')===4) {global.set('system_state', 'TRIGGERED');}\nmsg.payload = global.get('system_state');\nmsg.topic = 'system_state';\nreturn msg;","outputs":1,"noerr":0,"x":862.3333053588867,"y":452.66667652130127,"wires":[["2f46e774.088248"]]},{"id":"70fb309c.d52d5","type":"inject","z":"5acbf982.b822a8","name":"","topic":"actPres","payload":"7.5","payloadType":"num","repeat":"","crontab":"","once":false,"x":136.95248413085938,"y":1434.8211736679077,"wires":[["375bb24a.8869ae"]]},{"id":"dc0731fb.ad108","type":"inject","z":"5acbf982.b822a8","name":"","topic":"actPres","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":136.99993896484375,"y":1269.250497341156,"wires":[["375bb24a.8869ae"]]},{"id":"d9abfcae.664f7","type":"inject","z":"5acbf982.b822a8","name":"","topic":"actPres","payload":"5.9","payloadType":"num","repeat":"","crontab":"","once":false,"x":137.28582763671875,"y":1309.9170179367065,"wires":[["375bb24a.8869ae"]]},{"id":"6b6d0a9f.2fe374","type":"inject","z":"5acbf982.b822a8","name":"","topic":"actPres","payload":"10","payloadType":"num","repeat":"","crontab":"","once":false,"x":154.90486907958984,"y":1479.4405851364136,"wires":[["375bb24a.8869ae"]]},{"id":"35bef052.07ec9","type":"inject","z":"5acbf982.b822a8","name":"","topic":"actFilt","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":143.23822784423828,"y":856.5239853858948,"wires":[["64cb93ed.2fff8c"]]},{"id":"1f1ec868.418e88","type":"inject","z":"5acbf982.b822a8","name":"","topic":"actFilt","payload":"0.25","payloadType":"num","repeat":"","crontab":"","once":false,"x":149.90487670898438,"y":896.1909852027893,"wires":[["64cb93ed.2fff8c"]]},{"id":"e8eebcbc.55a3c","type":"inject","z":"5acbf982.b822a8","name":"","topic":"actFilt","payload":"0.85","payloadType":"num","repeat":"","crontab":"","once":false,"x":157.90487670898438,"y":935.1908249855042,"wires":[["64cb93ed.2fff8c"]]},{"id":"375bb24a.8869ae","type":"function","z":"5acbf982.b822a8","name":"global set actPres","func":"global.set('actPres',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":391.38099670410156,"y":1389.8808212280273,"wires":[[]]},{"id":"64cb93ed.2fff8c","type":"function","z":"5acbf982.b822a8","name":"global set actFilt","func":"global.set('actFilt',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":378.50011444091797,"y":912.7380175590515,"wires":[[]]},{"id":"5aa03aa3.461064","type":"function","z":"5acbf982.b822a8","name":"determine demand for dyn water","func":"var setPress = global.get('setPres');\nvar actPress = global.get('actPres');\nvar diff = (setPress-actPress);\nif (diff >= global.get('dynFilldb') ) {dynFill = global.set ('dynFill', 1 );\n    return msg;\n}\nif (diff < global.get('dynFilldb') ) {dynFill = global.set ('dynFill', 0 );\n\n    return msg;\n}\n","outputs":1,"noerr":0,"x":598.8960571289062,"y":660.7379951477051,"wires":[["2f46e774.088248"]]},{"id":"61549ad0.98c0a4","type":"inject","z":"5acbf982.b822a8","name":"","topic":"actPres","payload":"7.0","payloadType":"num","repeat":"","crontab":"","once":false,"x":130.52391815185547,"y":1374.1069927215576,"wires":[["375bb24a.8869ae"]]},{"id":"1754602.2b91ba","type":"comment","z":"5acbf982.b822a8","name":"blwr 0 1 2 3 ","info":"0 - idle\n1 - wind up\n2 - full speed\n3 - wind down","x":276.6666679382324,"y":446.66669750213623,"wires":[]},{"id":"1bb31d10.5d4ff3","type":"function","z":"5acbf982.b822a8","name":"global set alarm ","func":"if (global.get('permPhi')===1 ||\n    global.get('permPlo')===1 ||\n    global.get('permDirt')===1 ||\n    global.get('timedout_alarm')===1 ||\n    global.get('safety')===1)\n    {global.set('alarm', 1);\nmsg.payload = global.get('alarm');\nmsg.topic = 'alarm';\nreturn msg;\n}\nelse\nreturn ;","outputs":1,"noerr":0,"x":1467.6667518615723,"y":447.33316230773926,"wires":[[]]},{"id":"b5e8a735.d04448","type":"inject","z":"5acbf982.b822a8","name":"blwr 4","topic":"blwr","payload":"4","payloadType":"num","repeat":"","crontab":"","once":false,"x":102.3333740234375,"y":605.0000123977661,"wires":[["907e3962.b0c588"]]},{"id":"7a4d2442.07814c","type":"function","z":"5acbf982.b822a8","name":"alarm lock out","func":"if (global.get ('alarm') > 0) {\nglobal.set ('blwr',4);\nglobal.set ('ballvalve', 0);\nglobal.set ('man_control', 0);\nglobal.set ('start_stop', 0);\nglobal.set ('valve_state', 'LOCKED OUT');\nglobal.set ('man_fill', 'LOCKED OUT');\nglobal.set ('dynFill', 0);\nglobal.set ('conveyor', 0);\nreturn;\n}\nelse return;","outputs":1,"noerr":0,"x":1476.9999084472656,"y":481.99992752075195,"wires":[[]]},{"id":"fd064db5.d37a2","type":"switch","z":"5acbf982.b822a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1074.7621154785156,"y":1015.4762449264526,"wires":[["2b4a58ad.bd7478"],[]]},{"id":"2b4a58ad.bd7478","type":"change","z":"5acbf982.b822a8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"99","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230.6190643310547,"y":1015.1905727386475,"wires":[["79241d7d.dd6914"]]},{"id":"b1f2439.6d339c","type":"function","z":"5acbf982.b822a8","name":"global set blwr","func":"global.set('blwr',3);\nglobal.set('start_stop',0);\nreturn msg;","outputs":1,"noerr":0,"x":844.5833129882812,"y":1066.0477333068848,"wires":[["2f46e774.088248"]]},{"id":"8d40ad60.5062a","type":"change","z":"5acbf982.b822a8","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":669.8412933349609,"y":1157.4919867515564,"wires":[["5e8215fd.34663c","3ba9a781.465248","f2fc52c2.00b4a"]]},{"id":"3ba9a781.465248","type":"function","z":"5acbf982.b822a8","name":"start stop reset windup","func":"if (msg.payload === 0) {msg.payload = 99;\nreturn msg;\n}\nelse\nreturn;","outputs":1,"noerr":0,"x":993.2698211669922,"y":1162.063500881195,"wires":[["bd63bfca.00508"]]},{"id":"c9e56ec2.bccb1","type":"function","z":"5acbf982.b822a8","name":"autotune reset windup","func":"if (msg.payload === 0) {msg.payload = 99;\nreturn msg;\n}\nelse\nreturn;","outputs":1,"noerr":0,"x":991.6030731201172,"y":1202.253930568695,"wires":[["bd63bfca.00508"]]},{"id":"fff0f8e9.f41d18","type":"switch","z":"5acbf982.b822a8","name":"set topic begin","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"begin","vt":"str"}],"checkall":"true","outputs":1,"x":476.269775390625,"y":1202.25390625,"wires":[["c9e56ec2.bccb1"]]},{"id":"fb24f67e.45efb8","type":"function","z":"5acbf982.b822a8","name":"set warnPhi alarm","func":"if (global.get('tune')===0 && global.get('blwr')===2 && \n    global.get('actPres')>= global.get('oldPhi')) \n    {global.set('warnPhi',1);}\nelse {global.set('warnPhi',0);}\nreturn;\n","outputs":1,"noerr":0,"x":1226.8330688476562,"y":479.61904430389404,"wires":[[]]},{"id":"8e941c.830c6be8","type":"function","z":"5acbf982.b822a8","name":"global set alarm","func":"global.set('alarm',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":375.3333501815796,"y":117.61904907226562,"wires":[[]]},{"id":"604fd94e.201c58","type":"switch","z":"5acbf982.b822a8","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":584.8571891784668,"y":372.16453647613525,"wires":[["1ff14f73.5ba1d1"],["f7978af9.a47968","a36be1ca.486f1","c6400d16.00d6c","920593a6.ccce7","208a0f01.a22f4","bbfcfcb1.9f099","c81d50e2.169ae"]]},{"id":"1ff14f73.5ba1d1","type":"trigger","z":"5acbf982.b822a8","op1":"","op2":"0","op1type":"nul","op2type":"str","duration":"10","extend":false,"units":"min","reset":"99","name":"","x":776.8332901000977,"y":208.61905193328857,"wires":[["91af545c.2480a8"]]},{"id":"91af545c.2480a8","type":"function","z":"5acbf982.b822a8","name":"global reset test_mode","func":"global.set('test_mode',0);\nreturn;","outputs":1,"noerr":0,"x":967.4761161804199,"y":208.76190853118896,"wires":[[]]},{"id":"f7978af9.a47968","type":"change","z":"5acbf982.b822a8","name":"reset on 0","rules":[{"t":"set","p":"payload","pt":"msg","to":"99","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":619.4761810302734,"y":202.90476894378662,"wires":[["1ff14f73.5ba1d1"]]},{"id":"9751a85f.a78348","type":"function","z":"5acbf982.b822a8","name":"global set system_state","func":"if (global.get('test_mode')===1) {global.set('system_state', 'TEST MODE');}\nif (global.get('demo_mode')===1) {global.set('system_state', 'DEMO MODE');}\nmsg.payload = global.get('system_state');\nmsg.topic = 'system_state';\nreturn msg;","outputs":1,"noerr":0,"x":629.047607421875,"y":622.9047966003418,"wires":[["2f46e774.088248"]]},{"id":"8cebe643.416b08","type":"function","z":"5acbf982.b822a8","name":"global get test, demo, or calibration mode","func":"if (global.get ('test_mode') ===1 || \nglobal.get ('demo_mode')===1 ||\nglobal.get ('press_calibration')===1) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":493.3333435058594,"y":533.3690611124039,"wires":[["604fd94e.201c58"]]},{"id":"2f46e774.088248","type":"vis in","z":"5acbf982.b822a8","language":"en","x":1129.8333740234375,"y":687.6190795898438,"wires":[[]]},{"id":"2f2622e2.82fa7e","type":"vis in","z":"5acbf982.b822a8","language":"en","x":218.0555305480957,"y":1106.063500881195,"wires":[["8b50e0f3.335f6","316313ff.887bdc","fff0f8e9.f41d18","436b0b86.e264b4","638aba2b.214a44"]]},{"id":"d18c861e.1a5828","type":"function","z":"5acbf982.b822a8","name":"phase lock out","func":"if (global.get ('phase')=== 0)  {\nglobal.set ('blwr',4);\nglobal.set ('ballvalve', 0);\nglobal.set ('man_control', 0);\nglobal.set ('start_stop', 0);\nglobal.set ('valve_state', 'LOCKED OUT');\nglobal.set ('man_fill', 'LOCKED OUT');\nglobal.set ('dynFill', 0);\nglobal.set ('conveyor', 0);\nreturn;\n}\nelse return;","outputs":1,"noerr":0,"x":1471.500144958496,"y":375.3332004547119,"wires":[[]]},{"id":"208a0f01.a22f4","type":"function","z":"5acbf982.b822a8","name":"get phase alarm","func":"if (global.get ('phase') === 1)\n{\nmsg.payload = 1;\nreturn msg;\n} \nelse\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":840.5000457763672,"y":297.9999861717224,"wires":[["b7a354a4.152038"]]},{"id":"b7a354a4.152038","type":"switch","z":"5acbf982.b822a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1002.5,"y":300.9999752044678,"wires":[["69a8b08f.c9dd"],["d8c2ae74.71b8c"]]},{"id":"d8c2ae74.71b8c","type":"change","z":"5acbf982.b822a8","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1175.8335037231445,"y":295.0000009536743,"wires":[["69a8b08f.c9dd"]]},{"id":"69a8b08f.c9dd","type":"trigger","z":"5acbf982.b822a8","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":1189.6668395996094,"y":253.3333387374878,"wires":[["ece596c1.c77db8"]]},{"id":"ece596c1.c77db8","type":"function","z":"5acbf982.b822a8","name":"SET CALL VARIABLES","func":"var alarm = global.set ('alarm', 0);\nvar blwr = global.set ('blwr', 0);\nvar permPlo = global.set ('permPlo', 0);\nvar permPhi = global.set ('permPhi', 0);\nvar permDirt = global.set ('permDirt', 0);\nvar begin = global.set ('begin', 0);\nvar step1 = global.set ('step1', 0);\nvar step2 = global.set ('step2', 0);\nvar step3 = global.set ('step3', 0);\nvar step4 = global.set ('step4', 0);\nvar step5 = global.set ('step5', 0);\nvar step6 = global.set ('step6', 0);\nvar step7 = global.set ('step7', 0);\nvar timedout = global.set ('timedout', 0);\nvar timedout_alarm = global.set ('timedout_alarm', 0);\nvar gate = global.set ('gate', 0);\nvar table = global.set ('table', 0);\nvar filterlife = global.set ('filterlife', 0);\nvar ballvalve = global.set ('ballvalve', 0);\nvar reset = global.set ('reset', 0);\nvar test_mode = global.set ('test_mode', 0);\nvar dynFill = global.set ('dynFill', 0);\nvar tune = global.set ('tune', 0);\nvar demo_mode = global.set ('demo_mode', 0);\nreturn msg;\n","outputs":"1","noerr":0,"x":1386.0000576972961,"y":274.2499885559082,"wires":[[]]},{"id":"a72dc04e.9e23e","type":"inject","z":"5acbf982.b822a8","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":261.6667658487959,"y":2304.9999162554745,"wires":[["93266995.e40de8","b907487.bae2bb8"]]},{"id":"4ad8767d.333e68","type":"comment","z":"5acbf982.b822a8","name":"password check ","info":"","x":490.8334426879883,"y":2216.666664302349,"wires":[]},{"id":"f904f174.f10a3","type":"delay","z":"5acbf982.b822a8","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":759.5001093546553,"y":2300.6666643023495,"wires":[["794ed88b.859938"]]},{"id":"794ed88b.859938","type":"function","z":"5acbf982.b822a8","name":"fspassword reset","func":"global.set('fspasstrue', 0);\nglobal.set('fspassword', 0);\nreturn;\n","outputs":1,"noerr":0,"x":993.0001093546553,"y":2281.6666643023495,"wires":[[]]},{"id":"93266995.e40de8","type":"function","z":"5acbf982.b822a8","name":"fspasstrue check","func":"if (global.get('fspasstrue')== 1) {\n    return msg;\n}\nreturn ;","outputs":1,"noerr":0,"x":557.0001093546553,"y":2300.6666643023495,"wires":[["f904f174.f10a3"]]},{"id":"633e5e86.785fc","type":"function","z":"5acbf982.b822a8","name":"fspassword check","func":"var check = global.get('setfspassword');\nif (global.get('fspassword') == check) {\n    global.set('fspasstrue', 1);\n    return;\n}\nelse if (global.get('fspassword')!= check) {\n    global.set('fspasstrue', 0);\n    return;\n}\nreturn ;","outputs":1,"noerr":0,"x":893.3332862854004,"y":2351.666096866131,"wires":[["d035783b.1178c8"]]},{"id":"32902cd9.1c59f4","type":"rbe","z":"5acbf982.b822a8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":710.0000686645508,"y":2349.999674975872,"wires":[["633e5e86.785fc"]]},{"id":"b907487.bae2bb8","type":"function","z":"5acbf982.b822a8","name":"global get fspassword","func":"msg.payload = global.get('fspassword');\nmsg.topic = 'fspassword';\nreturn msg;","outputs":1,"noerr":0,"x":545.0000495910645,"y":2346.666585147381,"wires":[["32902cd9.1c59f4"]]},{"id":"d4bdb008.95293","type":"comment","z":"5acbf982.b822a8","name":"test, demo, or calibration mode alarm isolation","info":"","x":538.5001373291016,"y":479.9999828338623,"wires":[]},{"id":"c45af004.999d7","type":"comment","z":"5acbf982.b822a8","name":"alarm logic","info":"","x":937.5000953674316,"y":246.66666316986084,"wires":[]},{"id":"28c23c6f.146804","type":"function","z":"5acbf982.b822a8","name":"global set hiductpress alarm","func":"if (global.get('tune')===0 && global.get('blwr')===2 && \n   global.get('ductPres')>= global.get('HiDuct')) {\n   global.set('hiductpress', 1);\n   return;}\nelse if (global.get('ductPres')< global.get('HiDuct')) {\n   global.set('hiductpress', 0);\n   return;}\nmsg.payload = global.get('hiductpress');\nmsg.topic = 'hiductpress';\nreturn msg;","outputs":1,"noerr":0,"x":1187.0001373291016,"y":342.9999771118164,"wires":[["2f46e774.088248"]]},{"id":"bbfcfcb1.9f099","type":"function","z":"5acbf982.b822a8","name":"ducted check","func":"if (global.get ('ducted_check') ===1) { \nmsg.payload = 1;\nreturn msg;} \nelse\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":825.0001220703125,"y":343.66667079925537,"wires":[["510ea18d.1b4b5"]]},{"id":"510ea18d.1b4b5","type":"switch","z":"5acbf982.b822a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":977.0000648498535,"y":349.66668224334717,"wires":[["28c23c6f.146804"],[]]},{"id":"b25ebe3.9b8644","type":"function","z":"5acbf982.b822a8","name":"global set hiductpress","func":"global.set('hiductpress',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1751.9999885559082,"y":224.6666021347046,"wires":[[]]},{"id":"d3af8ba6.079618","type":"inject","z":"5acbf982.b822a8","name":"hiductpress 1","topic":"hiductpress","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1537.6666450500488,"y":187.04754734039307,"wires":[["b25ebe3.9b8644"]]},{"id":"3dc4b8c6.00d5c8","type":"inject","z":"5acbf982.b822a8","name":"hiductpress 0","topic":"hiductpress","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1538.9999656677246,"y":236.66659927368164,"wires":[["b25ebe3.9b8644"]]},{"id":"f7a862ee.fa0a","type":"function","z":"5acbf982.b822a8","name":"set warnDirt alarm","func":"if (global.get('tune')===0 && global.get('blwr')===2 && \n    global.get('filter_pressure')>= global.get('oldFilt')) \n    {global.set('warnDirt',1);}\nelse {global.set('warnDirt',0);}\nreturn;\n","outputs":1,"noerr":0,"x":1233.8235931396484,"y":558.7286758422852,"wires":[[]]},{"id":"cd4e3221.e73d5","type":"function","z":"5acbf982.b822a8","name":"set warnPlo alarm","func":"if (global.get('tune')===0 && global.get('blwr')===2 && \n    global.get('actPres')<= global.get('oldPlo')) \n    {global.set('warnPlo',1);}\nelse {global.set('warnPlo',0);}\nreturn;\n","outputs":1,"noerr":0,"x":1229.1212539672852,"y":520.4905319213867,"wires":[[]]},{"id":"9932a8.464f8d58","type":"function","z":"5acbf982.b822a8","name":"set warn_timedout","func":"if (global.get('tune')===1 && global.get('timedout')===1) \n    {global.set('warn_timedout',1);}\nelse {global.set('warn_timedout',0);}\nreturn;\n","outputs":1,"noerr":0,"x":1235.7880325317383,"y":599.4903788566589,"wires":[[]]},{"id":"c81d50e2.169ae","type":"function","z":"5acbf982.b822a8","name":"alarm only check","func":"if (global.get ('alarmonly_check') ===1) { \nmsg.payload = 1;\nreturn msg;} \nelse\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":846.4237518310547,"y":411.0358896255493,"wires":[["6cc54f32.a6eb6"]]},{"id":"6cc54f32.a6eb6","type":"switch","z":"5acbf982.b822a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1008.4243469238281,"y":412.03596210479736,"wires":[["d18c861e.1a5828","7a4d2442.07814c","af073b9f.e09328","1bb31d10.5d4ff3"],["fb24f67e.45efb8","cd4e3221.e73d5","9932a8.464f8d58","f7a862ee.fa0a"]]},{"id":"af073b9f.e09328","type":"function","z":"5acbf982.b822a8","name":"set global alarms","func":"if (global.get('tune')===0 && global.get('blwr')===2 && \n    global.get('actPres')>= global.get('oldPhi')) {\n    global.set('permPhi',1);\n    msg.payload = global.get('permPhi');\nmsg.topic = 'permPhi';\nreturn msg;}\nelse\nif (global.get('tune')===0 && global.get('blwr')===2 && \n    global.get('actPres')<= global.get('oldPlo')) {\n    global.set('permPlo',1);\n    msg.payload = global.get('permPlo');\nmsg.topic = 'permPlo';\nreturn msg;}\nelse\nif (global.get('tune')===0 && global.get('blwr')===2 && \n    global.get('filter_pressure')>= global.get('oldFilt')) {\n    global.set('permDirt',1);\n    msg.payload = global.get('permDirt');\nmsg.topic = 'permDirt';\nreturn msg;}\nelse\nif (global.get('tune')===1 && global.get('timedout')===1) {\n    global.set('timedout_alarm',1);\n    msg.payload = global.get('timedout_alarm');\nmsg.topic = 'timedout_alarm';\nreturn msg;}\n\nreturn;","outputs":1,"noerr":0,"x":1478.7727432250977,"y":411.19509506225586,"wires":[[]]},{"id":"50d48ab2.fbd964","type":"function","z":"5acbf982.b822a8","name":"set permPhi alarm","func":"global.set('permPhi',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":373.15152740478516,"y":189.672345161438,"wires":[[]]},{"id":"5e1a8892.ddc558","type":"function","z":"5acbf982.b822a8","name":"set permPlo alarm","func":"global.set('permPlo',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":376.10623931884766,"y":259.54384899139404,"wires":[[]]},{"id":"cf18b29a.1c609","type":"function","z":"5acbf982.b822a8","name":"set permDirt alarm","func":"global.set('permDirt',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":377.1062469482422,"y":305.54382514953613,"wires":[[]]},{"id":"2693115e.a71d6e","type":"function","z":"5acbf982.b822a8","name":"set timedout_alarm","func":"global.set('timedout_alarm',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":376.10645294189453,"y":362.54372692108154,"wires":[[]]},{"id":"b3a142b0.94e42","type":"inject","z":"5acbf982.b822a8","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":170.42424774169922,"y":176.67235469818115,"wires":[["50d48ab2.fbd964"]]},{"id":"b8a859df.8fb278","type":"inject","z":"5acbf982.b822a8","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":173.75762176513672,"y":209.00571060180664,"wires":[["50d48ab2.fbd964"]]},{"id":"4ae9108a.0ce08","type":"inject","z":"5acbf982.b822a8","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":170.42425537109375,"y":245.67236232757568,"wires":[["5e1a8892.ddc558"]]},{"id":"60b4a625.d191b8","type":"inject","z":"5acbf982.b822a8","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":174.75762939453125,"y":277.00573348999023,"wires":[["5e1a8892.ddc558"]]},{"id":"8f58bcfc.80ded","type":"inject","z":"5acbf982.b822a8","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":163.42424774169922,"y":310.6666946411133,"wires":[["cf18b29a.1c609"]]},{"id":"51f0d42f.f5374c","type":"inject","z":"5acbf982.b822a8","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":163.75762557983398,"y":342.0000352859497,"wires":[["cf18b29a.1c609"]]},{"id":"2cd35ad8.d52ce6","type":"inject","z":"5acbf982.b822a8","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":161.4100456237793,"y":373.6723461151123,"wires":[["2693115e.a71d6e"]]},{"id":"b6ddea56.64aeb8","type":"inject","z":"5acbf982.b822a8","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":162.7434196472168,"y":401.0057020187378,"wires":[["2693115e.a71d6e"]]},{"id":"4211abbf.28c454","type":"function","z":"5acbf982.b822a8","name":"global get afterfilter_check","func":"if (global.get ('afterfilter_check') ===1) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":640.3333282470703,"y":1507.9999767541885,"wires":[["9c04c037.84ebd"]]},{"id":"128616f0.c983d9","type":"switch","z":"5acbf982.b822a8","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":960.0515632629395,"y":1508.9619718790054,"wires":[["c5cfb005.7d88b"],["eb8ebd8a.2b34"]]},{"id":"c5cfb005.7d88b","type":"function","z":"5acbf982.b822a8","name":"global set setDirt","func":"var setDirt = global.set('setDirt', 3);\nreturn;","outputs":1,"noerr":0,"x":1171.7676467895508,"y":1490.8585869073868,"wires":[[]]},{"id":"6f710171.8de13","type":"comment","z":"5acbf982.b822a8","name":"Adjust for afterfilter","info":"","x":1076.521385192871,"y":1441.5261055231094,"wires":[]},{"id":"eb8ebd8a.2b34","type":"function","z":"5acbf982.b822a8","name":"global set setDirt","func":"var setDirt = global.set('setDirt', 0.75);\nreturn;","outputs":1,"noerr":0,"x":1166.0563888549805,"y":1534.5858479738235,"wires":[[]]},{"id":"e4eac31f.bb508","type":"inject","z":"5acbf982.b822a8","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":360.33331298828125,"y":1519.666626572609,"wires":[["4211abbf.28c454"]]},{"id":"9c04c037.84ebd","type":"rbe","z":"5acbf982.b822a8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":841.166690826416,"y":1531.3332296609879,"wires":[["128616f0.c983d9"]]},{"id":"10afb247.d6475e","type":"function","z":"f6e410f4.f25f1","name":"Input 2: X2","func":"msg.payload = msg.payload[0];\nreturn msg;","outputs":1,"noerr":0,"x":686.4285888671875,"y":196.88099670410156,"wires":[["65c343c.2ef99bc","5ab1f991.377388"]]},{"id":"f56b20ee.0982c","type":"function","z":"f6e410f4.f25f1","name":"Input 1: X1","func":"msg.payload = msg.payload[0];\nreturn msg;\n\n","outputs":1,"noerr":0,"x":683.8692016601562,"y":126.61907958984375,"wires":[["bd3ac66a.b08298","d8507463.4a9f08"]]},{"id":"4f16face.e0fa94","type":"comment","z":"f6e410f4.f25f1","name":"*** Read Modbus Settings ","info":"Global Network Settings\nIP: 169.254.119.60\nMask: 255.255.255.0\nGlobal IP: 169.254.255.255\n\nControl Network Settings\nIP: 169.254.119.10\nMask: 255.255.255.0\nGlobal IP: 169.254.119.1\n\nNode Red Modbus TCP Settings\nIP: 169.254.119.10\nPort: 502\nUnit: 1\n\n\n**Make sure Control Network Settings IP and Node Red Modbus IP address match***\n**Must have Static IP address for Modbus TCP/IP to work properly***\n\n\n\n","x":669.2382411956787,"y":58.07144832611084,"wires":[]},{"id":"f393a308.170f9","type":"comment","z":"f6e410f4.f25f1","name":"Inputs Read Only","info":"","x":265.8572597503662,"y":53.309547424316406,"wires":[]},{"id":"31656525.fc281a","type":"function","z":"f6e410f4.f25f1","name":"float","func":"global.set ('flt', msg.payload);\n//if (global.get ('step2')===1) {global.set('flt', 0);}\nreturn msg;","outputs":1,"noerr":0,"x":1085.4722919464111,"y":144.15081405639648,"wires":[["32cf936c.c54cac"]]},{"id":"999706d0.177888","type":"function","z":"f6e410f4.f25f1","name":"phase","func":"if (global.get ('phase_check')===0) {global.set('phase', 1);\nreturn msg;}\nelse global.set ('phase', msg.payload); \nreturn msg;","outputs":1,"noerr":0,"x":1090.1746635437012,"y":230.0079050064087,"wires":[["749411cf.99afc"]]},{"id":"bd3ac66a.b08298","type":"change","z":"f6e410f4.f25f1","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":932.4604549407959,"y":145.67463874816895,"wires":[["31656525.fc281a"]]},{"id":"65c343c.2ef99bc","type":"change","z":"f6e410f4.f25f1","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":933.222261428833,"y":236.00800323486328,"wires":[["999706d0.177888"]]},{"id":"2e81c5fc.a2d75a","type":"comment","z":"f6e410f4.f25f1","name":"Output Read/Write ","info":"","x":1174.9587631225586,"y":1145.4720630645752,"wires":[]},{"id":"f8ff5ff5.b33cc","type":"function","z":"f6e410f4.f25f1","name":"custom function","func":"// declare place holder variables\nvar originalval1 = msg.payload;\nvar varps1 = \"\";\n\n\n// convert string of originalval to float with 1 decimal place\n// run originalval thru a simple minus operation to form the 'temp' number\nvarps1 = parseFloat(originalval1).toFixed(2);\n\n// output the originalval after deduction \nmsg.payload = varps1;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1471.3618621826172,"y":534.1371417045593,"wires":[["8b0d09c3.54eff8"]]},{"id":"90d7ba85.49b958","type":"function","z":"f6e410f4.f25f1","name":"custom function","func":"// declare place holder variables\nvar originalval2 = msg.payload;\nvar varps2 = \"\";\n\n\n// convert string of originalval to float with 1 decimal place\n// run originalval thru a simple minus operation to form the 'temp' number\nvarps2 = parseFloat(originalval2).toFixed(2);\n\n// output the originalval after deduction \nmsg.payload = varps2;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1452.90966796875,"y":719.1966552734375,"wires":[["55d873fc.ea912c"]]},{"id":"35488cc0.49be64","type":"comment","z":"f6e410f4.f25f1","name":"Analog Read Only","info":"","x":421.93341064453125,"y":489.6729111671448,"wires":[]},{"id":"8b0d09c3.54eff8","type":"function","z":"f6e410f4.f25f1","name":"actFilt","func":"global.set ('actFilt', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1619.96529006958,"y":551.1331868171692,"wires":[["efa3cf22.c1f82"]]},{"id":"55d873fc.ea912c","type":"function","z":"f6e410f4.f25f1","name":"tempPres","func":"global.set ('tempPres', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1600.2984466552734,"y":770.1808338165283,"wires":[["c5b3855d.4a7638"]]},{"id":"3975dee5.44ba62","type":"inject","z":"f6e410f4.f25f1","name":"Start ","topic":"","payload":"0","payloadType":"num","repeat":"1","crontab":"","once":true,"x":122.21907806396484,"y":605.0664758682251,"wires":[["6df72446.571dfc"]]},{"id":"478e5e45.e9fd3","type":"trigger","z":"f6e410f4.f25f1","op1":"","op2":"0","op1type":"nul","op2type":"str","duration":"1.5","extend":false,"units":"s","reset":"","name":"","x":604.0763549804688,"y":937.0745277404785,"wires":[["a1d83139.d1413"]]},{"id":"6df72446.571dfc","type":"function","z":"f6e410f4.f25f1","name":"ducted check","func":"if (global.get ('ducted_check') ===1) { \nmsg.payload = 1;\nreturn msg;} \nelse\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":379.9413146972656,"y":903.5664777755737,"wires":[["b6619528.4a65a8"]]},{"id":"b6619528.4a65a8","type":"switch","z":"f6e410f4.f25f1","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":526.5880889892578,"y":874.4593963623047,"wires":[[],["478e5e45.e9fd3"]]},{"id":"5a85d421.46e9bc","type":"function","z":"f6e410f4.f25f1","name":"custom function","func":"// declare place holder variables\nvar originalval3 = msg.payload;\nvar varps3 = \"\";\n\n\n// convert string of originalval to float with 1 decimal place\n// run originalval thru a simple minus operation to form the 'temp' number\nvarps3 = parseFloat(originalval3).toFixed(2);\n\n// output the originalval after deduction \nmsg.payload = varps3;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1434.0048904418945,"y":904.5529193878174,"wires":[["246f83a.cd8f77c"]]},{"id":"246f83a.cd8f77c","type":"function","z":"f6e410f4.f25f1","name":"ductPres","func":"global.set ('ductPres', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1582.9887771606445,"y":937.6325092315674,"wires":[["dd8f4733.68e0f8"]]},{"id":"8d5f2431.0af828","type":"comment","z":"f6e410f4.f25f1","name":"Enable 3rd Pressure if Ducted Unit","info":"","x":504.1476516723633,"y":762.8523502349854,"wires":[]},{"id":"dd8f4733.68e0f8","type":"debug","z":"f6e410f4.f25f1","name":"","active":false,"console":"false","complete":"false","x":1709.5100173950195,"y":886.2478818893433,"wires":[]},{"id":"efa3cf22.c1f82","type":"debug","z":"f6e410f4.f25f1","name":"#1 Purple","active":false,"console":"false","complete":"payload","x":1713.3940048217773,"y":501.06516885757446,"wires":[]},{"id":"c5b3855d.4a7638","type":"debug","z":"f6e410f4.f25f1","name":"#2 Green","active":false,"console":"false","complete":"payload","x":1695.5578231811523,"y":711.3928451538086,"wires":[]},{"id":"a3c67795.c543f8","type":"inject","z":"f6e410f4.f25f1","name":"","topic":"","payload":"xxx","payloadType":"str","repeat":"","crontab":"","once":false,"x":157.21435546875,"y":1181.2858514785767,"wires":[["e9df05e4.fe9498"]]},{"id":"e9df05e4.fe9498","type":"function","z":"f6e410f4.f25f1","name":"","func":"msg.payload = global.get('rsrtest');\nreturn msg;","outputs":1,"noerr":0,"x":295.7143325805664,"y":1181.2858066558838,"wires":[["582b1beb.eab974"]]},{"id":"582b1beb.eab974","type":"switch","z":"f6e410f4.f25f1","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":441.96434211730957,"y":1186.2858028411865,"wires":[["79102412.ceb34c"],[]]},{"id":"79102412.ceb34c","type":"trigger","z":"f6e410f4.f25f1","op1":"0","op2":"1","op1type":"num","op2type":"num","duration":"1","extend":false,"units":"s","reset":"","name":"","x":590.035758972168,"y":1186.7858057022095,"wires":[[]]},{"id":"f465c6b1.efb828","type":"comment","z":"f6e410f4.f25f1","name":"test cycle","info":"","x":339.01139068603516,"y":1135.429027557373,"wires":[]},{"id":"aaa5ed6c.3ddb7","type":"function","z":"f6e410f4.f25f1","name":"afterfilter/impinger calibration","func":"var x1 = msg.payload;\nvar y1 = \"\";\nif (global.get('filt_slope')>0){\nvar y1 = (global.get('filt_slope')* x1) - (global.get('filt_offset'));}\nelse var y1 = x1;\nmsg.payload = y1;\nreturn msg;\n","outputs":1,"noerr":0,"x":1253.0294342041016,"y":537.5360217094421,"wires":[["1fdb56b8.6e3499","f8ff5ff5.b33cc"]]},{"id":"1fdb56b8.6e3499","type":"debug","z":"f6e410f4.f25f1","name":"","active":false,"console":"false","complete":"false","x":1452.4569854736328,"y":469.88470220565796,"wires":[]},{"id":"81dd1fdf.0f337","type":"function","z":"f6e410f4.f25f1","name":"scrubber calibration","func":"var x2 = msg.payload;\nvar y2 = \"\";\nif (global.get('scrub_slope')>0){\nvar y2 = (global.get('scrub_slope')* x2) -(global.get('scrub_offset'));}\nelse var y2 = x2;\nmsg.payload = y2;\nreturn msg;\n","outputs":1,"noerr":0,"x":1237.494873046875,"y":719.211669921875,"wires":[["90d7ba85.49b958","d13c6760.f51c88"]]},{"id":"7720e3ca.9c168c","type":"function","z":"f6e410f4.f25f1","name":"duct calibration","func":"var x3 = msg.payload;\nvar y3 = \"\";\nif (global.get('duct_slope')>0){\nvar y3 = (global.get('duct_slope')* x3) -(global.get('duct_offset'));}\nelse var y3 = x3;\nmsg.payload = y3;\nreturn msg;\n","outputs":1,"noerr":0,"x":1224.256965637207,"y":904.4984760284424,"wires":[["5a85d421.46e9bc","fbb0940c.6f3568"]]},{"id":"fbb0940c.6f3568","type":"debug","z":"f6e410f4.f25f1","name":"","active":false,"console":"false","complete":"false","x":1391.631965637207,"y":954.7443256378174,"wires":[]},{"id":"d13c6760.f51c88","type":"debug","z":"f6e410f4.f25f1","name":"","active":false,"console":"false","complete":"false","x":1418.8629150390625,"y":775.1989135742188,"wires":[]},{"id":"49813af2.fd9dd4","type":"function","z":"f6e410f4.f25f1","name":"rawFilt","func":"global.set ('rawFilt', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1192.2143936157227,"y":494.5000319480896,"wires":[["59cd6578.fbcb7c"]]},{"id":"5654ab46.66d204","type":"function","z":"f6e410f4.f25f1","name":"rawScrub","func":"global.set ('rawScrub', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1203.381103515625,"y":671.8333740234375,"wires":[["f43ce2c7.66b7a"]]},{"id":"9ed9d4f1.bc4158","type":"function","z":"f6e410f4.f25f1","name":"rawDuct","func":"global.set ('rawDuct', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1243.6430740356445,"y":862.6429462432861,"wires":[["d34e7f4c.10e27","262d66bd.b2e04a"]]},{"id":"95ca67a.d400d98","type":"vis in","z":"8dddd7b6.86c838","language":"en","x":223,"y":103.25000095367432,"wires":[["b8409f62.35324"]]},{"id":"b8409f62.35324","type":"switch","z":"8dddd7b6.86c838","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"press_calibration","vt":"str"}],"checkall":"true","outputs":1,"x":361.77783966064453,"y":105.25000095367432,"wires":[["c7cd2636.b86d68"]]},{"id":"c7cd2636.b86d68","type":"change","z":"8dddd7b6.86c838","name":"begin / cancel","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":543.9206619262695,"y":107.07144260406494,"wires":[["cda8b1b4.b9356","99e09519.ad9958"]]},{"id":"cda8b1b4.b9356","type":"function","z":"8dddd7b6.86c838","name":"global set pcstep1","func":"if (msg.payload ===0) {global.set('pcstep1', 0 );\n    global.set('pcstep2',0);\n    global.set('pcstep3',0);\n    global.set('pcstep4',0);\n    global.set('pcstep5',0);\n    global.set('pcstep6',0);\n    global.set('blwr', 0);\n    global.set('press_calibration',0);\n}\nif (msg.payload ===1) {global.set('pcstep1', 1);\nglobal.set('press_calibration', 1);\nglobal.set('pcstep7',0);\n}\nreturn;","outputs":1,"noerr":0,"x":781.7777786254883,"y":109.50000095367432,"wires":[[]]},{"id":"2ec12c9d.042f04","type":"comment","z":"8dddd7b6.86c838","name":"Pressure Inputs Calibration","info":"","x":744.0000228881836,"y":23,"wires":[]},{"id":"3a0abf90.42733","type":"inject","z":"8dddd7b6.86c838","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":250.00000762939453,"y":259.2500009536743,"wires":[["b86438b8.b05698"]]},{"id":"b86438b8.b05698","type":"function","z":"8dddd7b6.86c838","name":"global get press_calibration","func":"if (global.get ('press_calibration') ===1) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":297.00000762939453,"y":392.2500009536743,"wires":[["f6ec17.2b43e3e8"]]},{"id":"f6ec17.2b43e3e8","type":"switch","z":"8dddd7b6.86c838","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":417.2738265991211,"y":521.5454149246216,"wires":[["e43430bf.6cef5","cb9e0a5e.a0be88","f0b7bfed.66cb3","c8a2ed70.61fbe","d2b15851.912be8","449ae948.ef3b08","1489fde7.c400f2","4cf5c803.77a498","b6996088.5e8fe","31dc0974.d16496","2ac62656.8372aa","aa5e6526.ef8968","72195c1a.9e2404"],[]]},{"id":"e43430bf.6cef5","type":"function","z":"8dddd7b6.86c838","name":"step 1","func":"if (global.get ('pcstep1')===1 && global.get('flt')===0) \n{global.set ('blwr', 0); \nglobal.set ('ballvalve',0);\nglobal.set('scrub_offset',0);\nglobal.set('filt_offset',0);\nglobal.set('duct_offset',0);\nglobal.set ('realfiltpress',0);\nglobal.set ('realscrubpress',0);\nglobal.set ('realductpress',0);\nglobal.set ('filt_slope',1);\nglobal.set ('scrub_slope',1);\nglobal.set ('duct_slope',1);\nglobal.set ('pcstep1',2);\nreturn msg;}","outputs":1,"noerr":0,"x":722.0000076293945,"y":273.2500009536743,"wires":[["49b1dc4.7e84a24"]]},{"id":"49b1dc4.7e84a24","type":"delay","z":"8dddd7b6.86c838","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":884.3809193202428,"y":264.4404788698471,"wires":[["121473e8.40097c"]]},{"id":"121473e8.40097c","type":"function","z":"8dddd7b6.86c838","name":"global set pcstep2","func":"if(global.get('pcstep1')===2){\n    global.set('pcstep2', 1 );\nreturn;}","outputs":1,"noerr":0,"x":1086.666633605957,"y":266.44046115875244,"wires":[[]]},{"id":"f0b7bfed.66cb3","type":"function","z":"8dddd7b6.86c838","name":"step 2","func":"if (global.get ('pcstep2')===1 &&\n global.get('blwr')===0 ) {\nglobal.set('scrub_offset',global.get('rawScrub'));\nglobal.set('filt_offset',global.get('rawFilt'));\nglobal.set('duct_offset',global.get('rawDuct'));\nglobal.set ('pcstep2',2);\nreturn msg;}\n","outputs":1,"noerr":0,"x":720.0951614379883,"y":384.4404697418213,"wires":[["2eaeb91d.5dc026"]]},{"id":"2eaeb91d.5dc026","type":"delay","z":"8dddd7b6.86c838","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":942.0951843261719,"y":383.44049739837646,"wires":[["cfc19ea1.217bb"]]},{"id":"cfc19ea1.217bb","type":"function","z":"8dddd7b6.86c838","name":"global set pcstep3","func":"if(global.get('pcstep2')===2){\n    global.set('pcstep3', 1 );\nreturn;}","outputs":1,"noerr":0,"x":1146.0952224731445,"y":382.5833444595337,"wires":[[]]},{"id":"cb9e0a5e.a0be88","type":"function","z":"8dddd7b6.86c838","name":"step 1","func":"if (global.get('pcstep1')==1 && global.get('blwr')===0 && global.get ('flt')==1)\n{global.set ('ballvalve',1);\n    return;}\nif (global.get('pcstep1')==1 && global.get ('flt')===0) \n{global.set ('ballvalve',0);\n    return;}\nmsg.payload=global.get('ballvalve');\nreturn msg;\n\n","outputs":1,"noerr":0,"x":727.3809280395508,"y":325.1071786880493,"wires":[[]]},{"id":"c8a2ed70.61fbe","type":"function","z":"8dddd7b6.86c838","name":"step 3","func":"if (global.get('blwr')===2 && global.get ('pcstep3')===1 ) {\nglobal.set ('pcstep3',2);\nreturn msg;\n}\n","outputs":1,"noerr":0,"x":723.317310333252,"y":444.3134813308716,"wires":[["e0516613.535228"]]},{"id":"e0516613.535228","type":"delay","z":"8dddd7b6.86c838","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":915.8093757629395,"y":446.9802703857422,"wires":[["dfdfce68.b9f42"]]},{"id":"dfdfce68.b9f42","type":"function","z":"8dddd7b6.86c838","name":"global set pcstep4","func":"if(global.get('pcstep3')===2){\nglobal.set('pcstep4', 1 );\nreturn;}","outputs":1,"noerr":0,"x":1123.1785888671875,"y":448.22235584259033,"wires":[[]]},{"id":"d2b15851.912be8","type":"function","z":"8dddd7b6.86c838","name":"step 3","func":"if (global.get('pcstep3')===1 ) {\nglobal.set ('blwr',1);\n}\nreturn;","outputs":1,"noerr":0,"x":723.1904144287109,"y":495.55170249938965,"wires":[[]]},{"id":"449ae948.ef3b08","type":"function","z":"8dddd7b6.86c838","name":"step 5","func":"var diff2 = Math.abs(global.get('tempPres') - global.get('realscrubpress'));\nif (global.get ('pcstep5')==1 && global.get('tempPres')>2 && (diff2 <= 0.1)) {\nglobal.set ('pcstep5', 2 );\nreturn msg;\n} ","outputs":1,"noerr":0,"x":704.0039749145508,"y":711.0475950241089,"wires":[["398af3e7.702fec"]]},{"id":"539a283d.4d4e28","type":"delay","z":"8dddd7b6.86c838","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":878.7776947021484,"y":570.916748046875,"wires":[["a176a2d9.653e9"]]},{"id":"a176a2d9.653e9","type":"function","z":"8dddd7b6.86c838","name":"global set pcstep5","func":"if(global.get('pcstep4')===2){\n    global.set('pcstep5', 1 );\nreturn;}","outputs":1,"noerr":0,"x":1116.6826782226562,"y":570.0754909515381,"wires":[[]]},{"id":"4cf5c803.77a498","type":"function","z":"8dddd7b6.86c838","name":"step 4","func":"var diff1 = Math.abs(global.get('actFilt') - global.get('realfiltpress'));\nif (global.get ('pcstep4')==1 && global.get('actFilt')>0.1 && (diff1 <= 0.1)) {\nglobal.set ('pcstep4', 2 );\nreturn msg;\n} ","outputs":1,"noerr":0,"x":694.1904067993164,"y":577.3097467422485,"wires":[["539a283d.4d4e28"]]},{"id":"398af3e7.702fec","type":"delay","z":"8dddd7b6.86c838","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":846.1904792785645,"y":709.488205909729,"wires":[["a14467de.35aaa8"]]},{"id":"a14467de.35aaa8","type":"function","z":"8dddd7b6.86c838","name":"global set pcstep6","func":"if(global.get('pcstep5')===2){\n    global.set('pcstep6', 1 );\nreturn;}","outputs":1,"noerr":0,"x":1108.4763259887695,"y":710.7739877700806,"wires":[[]]},{"id":"31dc0974.d16496","type":"function","z":"8dddd7b6.86c838","name":"step 7","func":"if (global.get('blwr') === 3 && global.get('pcstep7')=== 1) {\nglobal.set ('pcstep7',2);\nreturn msg;\n} ","outputs":1,"noerr":0,"x":688.190315246582,"y":925.6310434341431,"wires":[["96eb27f5.3cced8"]]},{"id":"96eb27f5.3cced8","type":"delay","z":"8dddd7b6.86c838","name":"","pauseType":"delay","timeout":"30","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":936.1904983520508,"y":914.6308603286743,"wires":[["3022ed0c.824aa2"]]},{"id":"34255e9d.bdc942","type":"vis in","z":"8dddd7b6.86c838","language":"en","x":252.97222137451172,"y":1425.69446849823,"wires":[["f2b885b4.b6e998"]]},{"id":"f2b885b4.b6e998","type":"switch","z":"8dddd7b6.86c838","name":"factreset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"factreset","vt":"str"}],"checkall":"true","outputs":1,"x":422.59520721435547,"y":1465.3213758468628,"wires":[["64fc7afd.1178a4","d6832a30.d8a698","4d068b2f.2ffa44","aed2d98b.69bdb8","fad21cf2.2549","5b50077d.6972b8"]]},{"id":"d6832a30.d8a698","type":"function","z":"8dddd7b6.86c838","name":"write scrub_offset on factreset","func":"global.set ('scrub_offset', 0 );\nmsg.payload = global.get('scrub_offset');\nreturn msg;\n","outputs":1,"noerr":0,"x":764.1111755371094,"y":1359.22230052948,"wires":[["67f95ac8.503ee4"]]},{"id":"64fc7afd.1178a4","type":"function","z":"8dddd7b6.86c838","name":"write filt_offset on factreset","func":"global.set ('filt_offset', 0 );\nmsg.payload = global.get('filt_offset');\nreturn msg;\n","outputs":1,"noerr":0,"x":775.6111373901367,"y":1404.58340549469,"wires":[["174e8a25.abb4e6"]]},{"id":"67f95ac8.503ee4","type":"change","z":"8dddd7b6.86c838","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/scrub_offset","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1025.547508239746,"y":1350.4722471237183,"wires":[["24c93e73.72aaa2"]]},{"id":"174e8a25.abb4e6","type":"change","z":"8dddd7b6.86c838","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/filt_offset","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1023.6904754638672,"y":1428.7421340942383,"wires":[["34daf23b.87babe"]]},{"id":"e41ec99a.cdc998","type":"function","z":"8dddd7b6.86c838","name":"qualifier to write scrub_offset to database","func":"if (global.get ('pcstep2')===1) {\nmsg.payload = global.get ('scrub_offset');\nreturn msg;\n}\n","outputs":1,"noerr":0,"x":731.2977676391602,"y":1319.9048566818237,"wires":[["67f95ac8.503ee4"]]},{"id":"aa0a33c2.2e2ac","type":"function","z":"8dddd7b6.86c838","name":"qualifier to write filt_offset to database","func":"if (global.get ('pcstep2')===1) {\nmsg.payload = global.get ('filt_offset');\nreturn msg;\n}\n","outputs":1,"noerr":0,"x":751.6787033081055,"y":1446.9167227745056,"wires":[["174e8a25.abb4e6"]]},{"id":"253055c3.8ec97a","type":"inject","z":"8dddd7b6.86c838","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":256.99999237060547,"y":1518.5278253555298,"wires":[["8145704.a1c549"]]},{"id":"8145704.a1c549","type":"function","z":"8dddd7b6.86c838","name":"global get press_calibration","func":"if (global.get ('press_calibration') ===1) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":322.3333511352539,"y":1629.5833024978638,"wires":[["bac05c69.96d92"]]},{"id":"bac05c69.96d92","type":"switch","z":"8dddd7b6.86c838","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":424.8293914794922,"y":1573.3232975006104,"wires":[["aa0a33c2.2e2ac","e41ec99a.cdc998","deecba64.b37ed8","1438bb06.f81b35","93fbb600.23b0b8","9773c89e.0cd138"],[]]},{"id":"deecba64.b37ed8","type":"function","z":"8dddd7b6.86c838","name":"qualifier to write duct_offset to database","func":"if (global.get ('pcstep2')===1) {\nmsg.payload = global.get ('duct_offset');\nreturn msg;\n}\n","outputs":1,"noerr":0,"x":744.0832901000977,"y":1524.7778224945068,"wires":[["ccd220bd.56eb8"]]},{"id":"4d068b2f.2ffa44","type":"function","z":"8dddd7b6.86c838","name":"write duct_offset on factreset","func":"global.set ('duct_offset', 0 );\nmsg.payload = global.get('duct_offset');\nreturn msg;\n","outputs":1,"noerr":0,"x":781.5910263061523,"y":1485.8456077575684,"wires":[["ccd220bd.56eb8"]]},{"id":"ccd220bd.56eb8","type":"change","z":"8dddd7b6.86c838","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/duct_offset","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1027.0831298828125,"y":1497.1507625579834,"wires":[["37766a8f.206ed6"]]},{"id":"24c93e73.72aaa2","type":"DataIn","z":"8dddd7b6.86c838","collection":"21117e52.b711d2","name":"","update":false,"path":"/scrub_offset","x":1223.5278854370117,"y":1345.6112394332886,"wires":[]},{"id":"34daf23b.87babe","type":"DataIn","z":"8dddd7b6.86c838","collection":"21117e52.b711d2","name":"","update":false,"path":"/filt_offset","x":1211.4444770812988,"y":1428.2499532699585,"wires":[]},{"id":"37766a8f.206ed6","type":"DataIn","z":"8dddd7b6.86c838","collection":"21117e52.b711d2","name":"","update":false,"path":"/duct_offset","x":1230.0555400848389,"y":1497.277826309204,"wires":[]},{"id":"e6dc8c18.1128f","type":"inject","z":"8dddd7b6.86c838","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1019.2222366333008,"y":1236.5833387374878,"wires":[["24c93e73.72aaa2","34daf23b.87babe","37766a8f.206ed6"]]},{"id":"a0f6ea73.22e7e8","type":"inject","z":"8dddd7b6.86c838","name":"","topic":"","payload":"startup","payloadType":"str","repeat":"","crontab":"","once":true,"x":258.5277557373047,"y":1904.0832967758179,"wires":[["8a503aa2.1d0d78","b46ef08c.1af68","af9828f9.aac1e8","37415444.12913c","a1b24000.5ff87","b47426f8.2aac08"]]},{"id":"9609ab5b.f66508","type":"comment","z":"8dddd7b6.86c838","name":"Read variables from DB on startup","info":"","x":638.1110916137695,"y":1850.5832557678223,"wires":[]},{"id":"8a503aa2.1d0d78","type":"change","z":"8dddd7b6.86c838","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/scrub_offset","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":599.3135118484497,"y":1947.0116653442383,"wires":[["4e6bb426.cc977c"]]},{"id":"b46ef08c.1af68","type":"change","z":"8dddd7b6.86c838","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/filt_offset","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":594.5634460449219,"y":1894.5830583572388,"wires":[["39d9c54e.ab4dda"]]},{"id":"af9828f9.aac1e8","type":"change","z":"8dddd7b6.86c838","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/duct_offset","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":606.5634613037109,"y":2006.0832414627075,"wires":[["a8962777.8f3358"]]},{"id":"4e6bb426.cc977c","type":"DataOut","z":"8dddd7b6.86c838","collection":"21117e52.b711d2","name":"","path":"/scrub_offset","error":false,"x":787.7064514160156,"y":1950.7259321212769,"wires":[["ab0b3a77.ecf038"]]},{"id":"39d9c54e.ab4dda","type":"DataOut","z":"8dddd7b6.86c838","collection":"21117e52.b711d2","name":"","path":"/filt_offset","error":false,"x":788.5634689331055,"y":1899.3332300186157,"wires":[["5f0de4ca.de37cc"]]},{"id":"a8962777.8f3358","type":"DataOut","z":"8dddd7b6.86c838","collection":"21117e52.b711d2","name":"","path":"/duct_offset","error":false,"x":802.5634269714355,"y":2007.8330640792847,"wires":[["dc12972b.2d1578"]]},{"id":"ab0b3a77.ecf038","type":"function","z":"8dddd7b6.86c838","name":"global set scrub_offset","func":"var scrub_offset = global.set('scrub_offset', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1054.0277404785156,"y":1943.3331327438354,"wires":[[]]},{"id":"5f0de4ca.de37cc","type":"function","z":"8dddd7b6.86c838","name":"global set filt_offset","func":"var filt_offset = global.set('filt_offset', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1039.5634689331055,"y":1889.3332300186157,"wires":[["c1dee6df.5ec338"]]},{"id":"dc12972b.2d1578","type":"function","z":"8dddd7b6.86c838","name":"global set duct_offset","func":"var duct_offset = global.set('duct_offset', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1052.8134460449219,"y":2000.3330640792847,"wires":[[]]},{"id":"99975f39.38bd9","type":"inject","z":"8dddd7b6.86c838","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":363.8055000305176,"y":2340.8890194892883,"wires":[["ab1f8cc.819097","c0331099.90c28","3a0e09ea.dd5f56","5ab331c1.0f5af","8553d85e.bddd08","97faf5e0.a83c38","d78a7db4.d89fb","b5aa380f.aa77c8","cde928c.ebf77d8"]]},{"id":"ab1f8cc.819097","type":"function","z":"8dddd7b6.86c838","name":"get scrub_offset","func":"msg.payload = global.get('scrub_offset');\nmsg.topic = 'scrub_offset';\nreturn msg;","outputs":1,"noerr":0,"x":762.1706695556641,"y":2317.6982469558716,"wires":[["9a3a38c4.74ddc8","b0a0f642.c3fdf8"]]},{"id":"c0331099.90c28","type":"function","z":"8dddd7b6.86c838","name":"global get filt_offset","func":"msg.payload = global.get('filt_offset');\nmsg.topic = 'filt_offset';\nreturn msg;","outputs":1,"noerr":0,"x":756.5634307861328,"y":2277.4008417129517,"wires":[["9a3a38c4.74ddc8","49ae8d5.3f48f74"]]},{"id":"3a0e09ea.dd5f56","type":"function","z":"8dddd7b6.86c838","name":"global get duct_offset","func":"msg.payload = global.get('duct_offset');\nmsg.topic = 'duct_offset';\nreturn msg;","outputs":1,"noerr":0,"x":762.9563064575195,"y":2362.805666923523,"wires":[["9a3a38c4.74ddc8","b702046.87b68f8"]]},{"id":"9a3a38c4.74ddc8","type":"vis in","z":"8dddd7b6.86c838","language":"en","x":987.9086036682129,"y":2349.936661720276,"wires":[[]]},{"id":"9f31d27e.3a479","type":"vis in","z":"8dddd7b6.86c838","language":"en","x":359.77777099609375,"y":1113.249981880188,"wires":[["a2d9a532.d396d8","2abc6ce3.c27924","621076c7.51a278"]]},{"id":"a2d9a532.d396d8","type":"switch","z":"8dddd7b6.86c838","name":"set topic realscrubpress","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"realscrubpress","vt":"str"}],"checkall":"true","outputs":1,"x":655.5555648803711,"y":1102.3609943389893,"wires":[["5ccca24d.5ce80c"]]},{"id":"5ccca24d.5ce80c","type":"function","z":"8dddd7b6.86c838","name":"global set realscrubpress","func":"global.set('realscrubpress',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":916.381591796875,"y":1099.320897102356,"wires":[[]]},{"id":"2abc6ce3.c27924","type":"switch","z":"8dddd7b6.86c838","name":"set topic realfiltpress","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"realfiltpress","vt":"str"}],"checkall":"true","outputs":1,"x":652.1388854980469,"y":1062.9723253250122,"wires":[["a3dd286e.3f5648"]]},{"id":"a3dd286e.3f5648","type":"function","z":"8dddd7b6.86c838","name":"global set realfiltpress","func":"global.set('realfiltpress',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":909.214900970459,"y":1061.182107925415,"wires":[[]]},{"id":"621076c7.51a278","type":"switch","z":"8dddd7b6.86c838","name":"set topic realductpress","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"realductpress","vt":"str"}],"checkall":"true","outputs":1,"x":660.4722061157227,"y":1142.8333849906921,"wires":[["e3170e4e.e494"]]},{"id":"e3170e4e.e494","type":"function","z":"8dddd7b6.86c838","name":"global set realductpress","func":"global.set('realductpress',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":918.7981986999512,"y":1139.7931685447693,"wires":[[]]},{"id":"5ab331c1.0f5af","type":"function","z":"8dddd7b6.86c838","name":"get realscrubpress","func":"msg.payload = global.get('realscrubpress');\nmsg.topic = 'realscrubpress';\nreturn msg;","outputs":1,"noerr":0,"x":763.3888778686523,"y":2439.638716697693,"wires":[["9a3a38c4.74ddc8","365797f6.2c25e8"]]},{"id":"8553d85e.bddd08","type":"function","z":"8dddd7b6.86c838","name":"global get realfiltpress","func":"msg.payload = global.get('realfiltpress');\nmsg.topic = 'realfiltpress';\nreturn msg;","outputs":1,"noerr":0,"x":755.2816925048828,"y":2401.8413076400757,"wires":[["9a3a38c4.74ddc8","9402e650.4f14a8"]]},{"id":"97faf5e0.a83c38","type":"function","z":"8dddd7b6.86c838","name":"global get realductpress","func":"msg.payload = global.get('realductpress');\nmsg.topic = 'realductpress';\nreturn msg;","outputs":1,"noerr":0,"x":746.6745681762695,"y":2474.7461366653442,"wires":[["9a3a38c4.74ddc8","98d4bb5b.542358"]]},{"id":"b6996088.5e8fe","type":"function","z":"8dddd7b6.86c838","name":"step 7","func":"if (global.get('pcstep7')===1 ) {\n    global.set ('blwr', 3);\nreturn;}\n","outputs":1,"noerr":0,"x":685.9047317504883,"y":885.0596323013306,"wires":[[]]},{"id":"1489fde7.c400f2","type":"function","z":"8dddd7b6.86c838","name":"step 6","func":"var diff3 = Math.abs(global.get('ductPres') - global.get('realductpress'));\nif (global.get ('pcstep6')==1 && global.get('ductPres')>1 && (diff3 <= 0.1)) {\nglobal.set ('pcstep6', 2);\nreturn msg;\n} else \nif (global.get('pcstep6')==1 && global.get('ducted_check')===0){\n    global.set ('pcstep6', 2);\nreturn msg;} \n","outputs":1,"noerr":0,"x":711.0000076293945,"y":798.7500352859497,"wires":[["9fbb647f.9aab98"]]},{"id":"9fbb647f.9aab98","type":"delay","z":"8dddd7b6.86c838","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":914.0000076293945,"y":803.2500009536743,"wires":[["2d32b345.69b2fc"]]},{"id":"2d32b345.69b2fc","type":"function","z":"8dddd7b6.86c838","name":"global set pcstep7","func":"if(global.get('pcstep6')===2){\n    global.set('pcstep7', 1 );\nreturn;}","outputs":1,"noerr":0,"x":1176.2858543395996,"y":804.5357828140259,"wires":[[]]},{"id":"3022ed0c.824aa2","type":"function","z":"8dddd7b6.86c838","name":"reset press_calibration","func":"if(global.get('pcstep7')===2){\n    global.set('pcstep1',0);\n    global.set('pcstep2',0);\n    global.set('pcstep3',0);\n    global.set('pcstep4',0);\n    global.set('pcstep5',0);\n    global.set('pcstep6',0);\n    global.set('press_calibration', 0 );\nreturn;}","outputs":1,"noerr":0,"x":1151.0000076293945,"y":915.2500009536743,"wires":[[]]},{"id":"aa5e6526.ef8968","type":"function","z":"8dddd7b6.86c838","name":"calculate scrub_slope","func":"if (global.get('pcstep5')===1 && global.get('rawScrub')>0.1) {\nvar scrub_temp = global.get('realscrubpress') / (global.get('rawScrub') - global.get('scrub_offset'));\nglobal.set('scrub_slope',scrub_temp);\nmsg.payload = global.get('scrub_slope');\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":768.1505889892578,"y":753.6647872924805,"wires":[[]]},{"id":"1438bb06.f81b35","type":"function","z":"8dddd7b6.86c838","name":"qualifier to write filt_slope to database","func":"if (global.get ('pcstep4')===2) {\nmsg.payload = global.get ('filt_slope');\nreturn msg;\n}\n","outputs":1,"noerr":0,"x":734.2904739379883,"y":1569.5070810317993,"wires":[["7c1329c3.a59548"]]},{"id":"aed2d98b.69bdb8","type":"function","z":"8dddd7b6.86c838","name":"write filt_slope on factreset","func":"global.set ('filt_slope', 1 );\nmsg.payload = global.get('filt_slope');\nreturn msg;\n","outputs":1,"noerr":0,"x":767.1038818359375,"y":1608.8245248794556,"wires":[["7c1329c3.a59548"]]},{"id":"7c1329c3.a59548","type":"change","z":"8dddd7b6.86c838","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/filt_slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1034.7902069091797,"y":1587.5744543075562,"wires":[["11e62192.8805be"]]},{"id":"11e62192.8805be","type":"DataIn","z":"8dddd7b6.86c838","collection":"21117e52.b711d2","name":"","update":false,"path":"/filt_slope","x":1220.2707176208496,"y":1588.9635038375854,"wires":[]},{"id":"93fbb600.23b0b8","type":"function","z":"8dddd7b6.86c838","name":"qualifier to write scrub_slope to database","func":"if (global.get ('pcstep5')===2) {\nmsg.payload = global.get ('scrub_slope');\nreturn msg;\n}\n","outputs":1,"noerr":0,"x":749.2904739379883,"y":1647.0070810317993,"wires":[["6eba0bc.8c099f4"]]},{"id":"fad21cf2.2549","type":"function","z":"8dddd7b6.86c838","name":"write scrub_slope on factreset","func":"global.set ('scrub_slope', 1 );\nmsg.payload = global.get('scrub_slope');\nreturn msg;\n","outputs":1,"noerr":0,"x":782.1038818359375,"y":1686.3245248794556,"wires":[["6eba0bc.8c099f4"]]},{"id":"6eba0bc.8c099f4","type":"change","z":"8dddd7b6.86c838","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/scrub_slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1039.7902069091797,"y":1665.0744543075562,"wires":[["cd5f6c7f.0a0e7"]]},{"id":"cd5f6c7f.0a0e7","type":"DataIn","z":"8dddd7b6.86c838","collection":"21117e52.b711d2","name":"","update":false,"path":"/scrub_slope","x":1235.2707176208496,"y":1666.4635038375854,"wires":[]},{"id":"2ac62656.8372aa","type":"function","z":"8dddd7b6.86c838","name":"calculate filt_slope","func":"if (global.get('pcstep4')===1 && global.get('rawFilt')>0.1) {\nvar filt_temp = global.get('realfiltpress') / (global.get('rawFilt') - global.get('filt_offset'));\nglobal.set('filt_slope',filt_temp);\nmsg.payload = global.get('filt_slope');\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":733.2903594970703,"y":638.348014831543,"wires":[["3dc87053.ec1d2"]]},{"id":"72195c1a.9e2404","type":"function","z":"8dddd7b6.86c838","name":"calculate duct_slope","func":"if (global.get('pcstep6')===1 && global.get('rawDuct')>0.1) {\nvar duct_temp = global.get('realductpress') / (global.get('rawDuct') - global.get('duct_offset'));\nglobal.set('duct_slope',duct_temp);\nmsg.payload = global.get('duct_slope');\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":746.7677764892578,"y":840.098014831543,"wires":[[]]},{"id":"9773c89e.0cd138","type":"function","z":"8dddd7b6.86c838","name":"qualifier to write duct_slope to database","func":"if (global.get ('pcstep6')===2) {\nmsg.payload = global.get ('duct_slope');\nreturn msg;\n}\n","outputs":1,"noerr":0,"x":749.5177879333496,"y":1727.6887311935425,"wires":[["b0435eb9.6bc75"]]},{"id":"5b50077d.6972b8","type":"function","z":"8dddd7b6.86c838","name":"write duct_slope on factreset","func":"global.set ('duct_slope', 1 );\nmsg.payload = global.get('duct_slope');\nreturn msg;\n","outputs":1,"noerr":0,"x":772.3311958312988,"y":1767.0061750411987,"wires":[["b0435eb9.6bc75"]]},{"id":"b0435eb9.6bc75","type":"change","z":"8dddd7b6.86c838","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/duct_slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040.017520904541,"y":1745.7561044692993,"wires":[["1ad5eb70.35e665"]]},{"id":"1ad5eb70.35e665","type":"DataIn","z":"8dddd7b6.86c838","collection":"21117e52.b711d2","name":"","update":false,"path":"/duct_slope","x":1235.498031616211,"y":1747.1451539993286,"wires":[]},{"id":"952e0947.5edb18","type":"inject","z":"8dddd7b6.86c838","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1041.392765045166,"y":1819.5745496749878,"wires":[["11e62192.8805be","cd5f6c7f.0a0e7","1ad5eb70.35e665"]]},{"id":"37415444.12913c","type":"change","z":"8dddd7b6.86c838","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/scrub_slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":596.7904815673828,"y":2112.575309753418,"wires":[["f9a2723d.c1a42"]]},{"id":"a1b24000.5ff87","type":"change","z":"8dddd7b6.86c838","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/filt_slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":602.0404205322266,"y":2056.3967809677124,"wires":[["b284f522.9eee28"]]},{"id":"b47426f8.2aac08","type":"change","z":"8dddd7b6.86c838","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/duct_slope","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":605.290397644043,"y":2152.8967571258545,"wires":[["8a4f699e.f1b738"]]},{"id":"f9a2723d.c1a42","type":"DataOut","z":"8dddd7b6.86c838","collection":"21117e52.b711d2","name":"","path":"/scrub_slope","error":false,"x":790.1833648681641,"y":2107.539354324341,"wires":[["773ff0a8.84dd4"]]},{"id":"b284f522.9eee28","type":"DataOut","z":"8dddd7b6.86c838","collection":"21117e52.b711d2","name":"","path":"/filt_slope","error":false,"x":789.790412902832,"y":2056.1470918655396,"wires":[["cde8bba.a07cc48"]]},{"id":"8a4f699e.f1b738","type":"DataOut","z":"8dddd7b6.86c838","collection":"21117e52.b711d2","name":"","path":"/duct_slope","error":false,"x":793.7904510498047,"y":2158.3966131210327,"wires":[["c4250e1.0aeeff"]]},{"id":"773ff0a8.84dd4","type":"function","z":"8dddd7b6.86c838","name":"global set scrub_slope","func":"var scrub_slope = global.set('scrub_slope', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1044.0047149658203,"y":2107.646777153015,"wires":[[]]},{"id":"cde8bba.a07cc48","type":"function","z":"8dddd7b6.86c838","name":"global set filt_slope","func":"var filt_slope = global.set('filt_slope', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1049.5404891967773,"y":2056.1470918655396,"wires":[["8adb6636.338938"]]},{"id":"c4250e1.0aeeff","type":"function","z":"8dddd7b6.86c838","name":"global set duct_slope","func":"var duct_slope = global.set('duct_slope', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1042.7904510498047,"y":2153.3966131210327,"wires":[[]]},{"id":"d78a7db4.d89fb","type":"function","z":"8dddd7b6.86c838","name":"get scrub_slope","func":"msg.payload = global.get('scrub_slope');\nmsg.topic = 'scrub_slope';\nreturn msg;","outputs":1,"noerr":0,"x":755.5404815673828,"y":2556.6664123535156,"wires":[["9a3a38c4.74ddc8","f5732647.0ac688"]]},{"id":"b5aa380f.aa77c8","type":"function","z":"8dddd7b6.86c838","name":"global get filt_slope","func":"msg.payload = global.get('filt_slope');\nmsg.topic = 'filt_slope';\nreturn msg;","outputs":1,"noerr":0,"x":752.433235168457,"y":2510.119225502014,"wires":[["9a3a38c4.74ddc8","ee749fb7.232cf"]]},{"id":"cde928c.ebf77d8","type":"function","z":"8dddd7b6.86c838","name":"global get duct_slope","func":"msg.payload = global.get('duct_slope');\nmsg.topic = 'duct_slope';\nreturn msg;","outputs":1,"noerr":0,"x":758.8261108398438,"y":2599.2738304138184,"wires":[["9a3a38c4.74ddc8","1a71b1a0.ad925e"]]},{"id":"e9666c2e.eddd7","type":"comment","z":"8dddd7b6.86c838","name":"Measured Pressures from VIS during calibration","info":"","x":646.1654853820801,"y":999.6349363327026,"wires":[]},{"id":"c44f8fdb.70b79","type":"comment","z":"8dddd7b6.86c838","name":"Reset calibration variables on factreset","info":"","x":349.1235656738281,"y":1375.3203125,"wires":[]},{"id":"4087edc1.947624","type":"comment","z":"8dddd7b6.86c838","name":"Store calibration variables in database","info":"","x":849.1129379272461,"y":1277.8062181472778,"wires":[]},{"id":"99a5a385.8901","type":"comment","z":"8dddd7b6.86c838","name":"send variables to VIS","info":"","x":669.1129016876221,"y":2234.0632276535034,"wires":[]},{"id":"c1dee6df.5ec338","type":"debug","z":"8dddd7b6.86c838","name":"","active":false,"console":"false","complete":"false","x":1299.5781059265137,"y":1921.1724996566772,"wires":[]},{"id":"8adb6636.338938","type":"debug","z":"8dddd7b6.86c838","name":"","active":false,"console":"false","complete":"false","x":1263.331657409668,"y":2076.1761713027954,"wires":[]},{"id":"4c67110d.42cd7","type":"inject","z":"8dddd7b6.86c838","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":1204.4040603637695,"y":2362.9162607192993,"wires":[["3b7c990c.5bd076","fab19b31.2b2918","51873c0d.1e0aa4","dac9ad34.3ec7c","5abf1ded.3f1214","8b5c7857.5d1fa8","9769e7d7.a4bab8","2221ee61.8bcc32"]]},{"id":"3b7c990c.5bd076","type":"function","z":"8dddd7b6.86c838","name":"global get pcstep1","func":"msg.payload = global.get('pcstep1');\nmsg.topic = 'pcstep1';\nreturn msg;","outputs":1,"noerr":0,"x":1464.6619148254395,"y":2293.1781220436096,"wires":[["a3cd298c.e01628"]]},{"id":"a3cd298c.e01628","type":"vis in","z":"8dddd7b6.86c838","language":"en","x":1649.7571830749512,"y":2363.213677406311,"wires":[[]]},{"id":"fab19b31.2b2918","type":"function","z":"8dddd7b6.86c838","name":"global get pcstep2","func":"msg.payload = global.get('pcstep2');\nmsg.topic = 'pcstep2';\nreturn msg;","outputs":1,"noerr":0,"x":1459.972297668457,"y":2353.5979013442993,"wires":[["a3cd298c.e01628"]]},{"id":"51873c0d.1e0aa4","type":"function","z":"8dddd7b6.86c838","name":"global get pcstep3","func":"msg.payload = global.get('pcstep3');\nmsg.topic = 'pcstep3';\nreturn msg;","outputs":1,"noerr":0,"x":1454.972297668457,"y":2403.5979013442993,"wires":[["a3cd298c.e01628"]]},{"id":"dac9ad34.3ec7c","type":"function","z":"8dddd7b6.86c838","name":"global get pcstep4","func":"msg.payload = global.get('pcstep4');\nmsg.topic = 'pcstep4';\nreturn msg;","outputs":1,"noerr":0,"x":1443.722297668457,"y":2456.0979013442993,"wires":[["a3cd298c.e01628"]]},{"id":"5abf1ded.3f1214","type":"function","z":"8dddd7b6.86c838","name":"global get pcstep5","func":"msg.payload = global.get('pcstep5');\nmsg.topic = 'pcstep5';\nreturn msg;","outputs":1,"noerr":0,"x":1456.222297668457,"y":2523.5979013442993,"wires":[["a3cd298c.e01628"]]},{"id":"8b5c7857.5d1fa8","type":"function","z":"8dddd7b6.86c838","name":"global get pcstep6","func":"msg.payload = global.get('pcstep6');\nmsg.topic = 'pcstep6';\nreturn msg;","outputs":1,"noerr":0,"x":1458.722297668457,"y":2574.8479013442993,"wires":[["a3cd298c.e01628"]]},{"id":"9769e7d7.a4bab8","type":"function","z":"8dddd7b6.86c838","name":"global get pcstep7","func":"msg.payload = global.get('pcstep7');\nmsg.topic = 'pcstep7';\nreturn msg;","outputs":1,"noerr":0,"x":1454.972297668457,"y":2632.3479013442993,"wires":[["a3cd298c.e01628"]]},{"id":"2221ee61.8bcc32","type":"function","z":"8dddd7b6.86c838","name":"global get press_calibration","func":"msg.payload = global.get('press_calibration');\nmsg.topic = 'press_calibration';\nreturn msg;","outputs":1,"noerr":0,"x":1479.745002746582,"y":2675.9843759536743,"wires":[["a3cd298c.e01628"]]},{"id":"ee749fb7.232cf","type":"debug","z":"8dddd7b6.86c838","name":"","active":false,"console":"false","complete":"false","x":1005.0714263916016,"y":2538.714286804199,"wires":[]},{"id":"98d4bb5b.542358","type":"debug","z":"8dddd7b6.86c838","name":"","active":false,"console":"false","complete":"false","x":1016.0714263916016,"y":2500.714286804199,"wires":[]},{"id":"9402e650.4f14a8","type":"debug","z":"8dddd7b6.86c838","name":"","active":false,"console":"false","complete":"false","x":1000.0714263916016,"y":2425.714286804199,"wires":[]},{"id":"365797f6.2c25e8","type":"debug","z":"8dddd7b6.86c838","name":"","active":false,"console":"false","complete":"false","x":1006.0714263916016,"y":2458.714286804199,"wires":[]},{"id":"49ae8d5.3f48f74","type":"debug","z":"8dddd7b6.86c838","name":"","active":false,"console":"false","complete":"false","x":1023.0714263916016,"y":2239.714286804199,"wires":[]},{"id":"b0a0f642.c3fdf8","type":"debug","z":"8dddd7b6.86c838","name":"","active":false,"console":"false","complete":"false","x":1020.0714263916016,"y":2272.714286804199,"wires":[]},{"id":"b702046.87b68f8","type":"debug","z":"8dddd7b6.86c838","name":"","active":false,"console":"false","complete":"false","x":1014.0714263916016,"y":2313.714286804199,"wires":[]},{"id":"f5732647.0ac688","type":"debug","z":"8dddd7b6.86c838","name":"","active":false,"console":"false","complete":"false","x":999.0714263916016,"y":2577.714286804199,"wires":[]},{"id":"1a71b1a0.ad925e","type":"debug","z":"8dddd7b6.86c838","name":"","active":false,"console":"false","complete":"false","x":1004.0714263916016,"y":2617.714286804199,"wires":[]},{"id":"3dc87053.ec1d2","type":"debug","z":"8dddd7b6.86c838","name":"","active":false,"console":"false","complete":"false","x":977.0714263916016,"y":640.7142868041992,"wires":[]},{"id":"99e09519.ad9958","type":"debug","z":"8dddd7b6.86c838","name":"","active":false,"console":"false","complete":"false","x":764.2500305175781,"y":158.25000762939453,"wires":[]},{"id":"fc70ac46.4f115","type":"function","z":"8ee48a3f.e52898","name":"global get blwr","func":"if (global.get ('blwr') <= 2 && \nglobal.get ('blwr') >0) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":349.99999237060547,"y":633.166646361351,"wires":[["22816900.371338"]]},{"id":"1c4aca6c.14c746","type":"function","z":"8ee48a3f.e52898","name":"global get ballvalve","func":"if (global.get ('ballvalve') == 1 ) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":341.71424102783203,"y":958.6904367208481,"wires":[["4a3f7410.97a0cc"]]},{"id":"b9b5b12f.7486d","type":"inject","z":"8ee48a3f.e52898","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":205.44443893432617,"y":734.8333123922348,"wires":[["257607b4.f2e768"]]},{"id":"22816900.371338","type":"switch","z":"8ee48a3f.e52898","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":508.99999237060547,"y":632.166646361351,"wires":[["c10dab72.626c98","3e74e6dd.f6ed8a","99a5e45d.5f2978"],["1a6c82ec.9e4f8d"]]},{"id":"bde404c7.9877d8","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1241.857322692871,"y":1043.3214906454086,"wires":[["2400a677.94121a"]]},{"id":"8e315f1e.4cd76","type":"function","z":"8ee48a3f.e52898","name":"Reset runtime variables","func":"var brtemp = global.set ('brtemp', 0);\nvar brperm = global.set ('brperm', 0);var blwrcount = global.set ('blwrcount', 0);\nvar bvtemp = global.set ('bvtemp', 0);\nvar bvperm = global.set ('bvperm', 0);\nvar cvtemp = global.set ('cvtemp', 0);\nvar cvperm = global.set ('cvperm', 0);\n\nreturn msg; \n","outputs":"1","noerr":0,"x":540.7263069152832,"y":1616.5711421966553,"wires":[["27022eb6.613e42","5c073106.2bf38","6c4079f3.d3b328"]]},{"id":"f76a31b3.41fec","type":"switch","z":"8ee48a3f.e52898","name":"reset runtimes on factreset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"factreset","vt":"str"}],"checkall":"true","outputs":1,"x":457.69053840637207,"y":1697.1427555084229,"wires":[["8e315f1e.4cd76"]]},{"id":"a934d083.3fae","type":"function","z":"8ee48a3f.e52898","name":"global set brtemp","func":"var brtemp = global.set('brtemp',0);\nreturn msg;","outputs":1,"noerr":0,"x":955.9999923706055,"y":780.166646361351,"wires":[["8abd0a38.998fb8"]]},{"id":"c7b4bbed.91f558","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BRperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":583.2858715057373,"y":166.52386510372162,"wires":[["c01b64e.5e8d698"]]},{"id":"89a8b026.6a9c9","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":579.8572826385498,"y":226.3809665441513,"wires":[["d44303c6.39b3"]]},{"id":"fd641b5e.c6a368","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"bvpermhrs","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1082.3216075897217,"y":262.8810123205185,"wires":[["1e1950ea.6fe55f"]]},{"id":"8e9655c4.f41788","type":"function","z":"8ee48a3f.e52898","name":"global set brperm","func":"var temp = global.get('brperm') -( -global.get('brtemp')); \nvar brperm = global.set('brperm',temp);\nmsg.payload = global.get('brperm');\nreturn msg;","outputs":1,"noerr":0,"x":962.9999923706055,"y":723.166646361351,"wires":[["25b73952.204b36"]]},{"id":"25b73952.204b36","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BRperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1248.9999923706055,"y":726.166646361351,"wires":[["32368a14.720606"]]},{"id":"30213bac.877134","type":"inject","z":"8ee48a3f.e52898","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":345.6905403137207,"y":1581.1427364349365,"wires":[["8e315f1e.4cd76"]]},{"id":"27022eb6.613e42","type":"function","z":"8ee48a3f.e52898","name":"global get brperm","func":"msg.payload = global.get('brperm');\nmsg.topic = 'brperm';\nreturn msg;","outputs":1,"noerr":0,"x":825.1191253662109,"y":1619.2856283187866,"wires":[["565dc531.a45c8c"]]},{"id":"5c073106.2bf38","type":"function","z":"8ee48a3f.e52898","name":"global get bvperm","func":"msg.payload = global.get('bvperm');\nmsg.topic = 'bvperm';\nreturn msg;","outputs":1,"noerr":0,"x":820.6905899047852,"y":1698.2855052947998,"wires":[["a6f0c417.2d7ee8"]]},{"id":"565dc531.a45c8c","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BRperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1099.6905555725098,"y":1613.1427402496338,"wires":[["5903ef6d.65055"]]},{"id":"a6f0c417.2d7ee8","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1088.4050598144531,"y":1698.9524612426758,"wires":[["4df26933.22a728"]]},{"id":"c8518ae9.b233c8","type":"inject","z":"8ee48a3f.e52898","name":"BLOWER 1","topic":"blwr","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":212.99999237060547,"y":466.16668701171875,"wires":[["1f6bc1f6.74414e"]]},{"id":"1f6bc1f6.74414e","type":"function","z":"8ee48a3f.e52898","name":"global set blwr","func":"global.set('blwr',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":548.7619400024414,"y":481.3690767288208,"wires":[[]]},{"id":"14594c79.4c4bc4","type":"inject","z":"8ee48a3f.e52898","name":"BLOWER 0","topic":"blwr","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":213.83332061767578,"y":430.49998474121094,"wires":[["1f6bc1f6.74414e"]]},{"id":"7a2120fd.2fb7b","type":"inject","z":"8ee48a3f.e52898","name":"BLOWER 2","topic":"blwr","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":211.99999237060547,"y":503.16668701171875,"wires":[["1f6bc1f6.74414e"]]},{"id":"1c251270.e30c6e","type":"inject","z":"8ee48a3f.e52898","name":"BLOWER 3","topic":"blwr","payload":"3","payloadType":"num","repeat":"","crontab":"","once":false,"x":211.99999237060547,"y":539.1666870117188,"wires":[["1f6bc1f6.74414e"]]},{"id":"1a6c82ec.9e4f8d","type":"trigger","z":"8ee48a3f.e52898","op1":"0","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":709.9999923706055,"y":694.166646361351,"wires":[["8e9655c4.f41788","a934d083.3fae"]]},{"id":"c10dab72.626c98","type":"counter","z":"8ee48a3f.e52898","name":"","outputs":1,"x":740.0000228881836,"y":583.666672706604,"wires":[["74361e4d.22122"]]},{"id":"8abd0a38.998fb8","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":835.357250213623,"y":515.8094120025635,"wires":[["c10dab72.626c98"]]},{"id":"3e74e6dd.f6ed8a","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":625.9999923706055,"y":747.166646361351,"wires":[["1a6c82ec.9e4f8d"]]},{"id":"a217a918.3535f8","type":"counter","z":"8ee48a3f.e52898","name":"","outputs":1,"x":728.7142486572266,"y":901.9404462575912,"wires":[["b12b9915.1161f8"]]},{"id":"f56a58d5.cf8328","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":913.7142486572266,"y":841.9404462575912,"wires":[["a217a918.3535f8"]]},{"id":"6bec6c2c.aec8a4","type":"trigger","z":"8ee48a3f.e52898","op1":"0","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":726.2142486572266,"y":1019.9404462575912,"wires":[["2dde2591.500b8a","eaa803ef.95b3"]]},{"id":"402aaf73.fd015","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":642.2142486572266,"y":1072.9404462575912,"wires":[["6bec6c2c.aec8a4"]]},{"id":"4a3f7410.97a0cc","type":"switch","z":"8ee48a3f.e52898","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":525.2142486572266,"y":957.9404462575912,"wires":[["a217a918.3535f8","402aaf73.fd015","871d9864.dc0c08"],["6bec6c2c.aec8a4"]]},{"id":"2dde2591.500b8a","type":"function","z":"8ee48a3f.e52898","name":"global set bvperm","func":"var temp = global.get('bvperm') -( -global.get('bvtemp')); \nvar bvperm = global.set('bvperm',temp);\nmsg.payload = global.get('bvperm');\nreturn msg;","outputs":1,"noerr":0,"x":979.2142486572266,"y":1048.9404462575912,"wires":[["bde404c7.9877d8"]]},{"id":"eaa803ef.95b3","type":"function","z":"8ee48a3f.e52898","name":"global set bvtemp","func":"var bvtemp = global.set('bvtemp',0);\nreturn msg;","outputs":1,"noerr":0,"x":972.2142486572266,"y":1105.9404462575912,"wires":[["f56a58d5.cf8328"]]},{"id":"feff9483.0aef58","type":"inject","z":"8ee48a3f.e52898","name":"Ball valve 1","topic":"ballvalve","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":217.3571319580078,"y":1118.2975076436996,"wires":[["e31f806c.4a6dc"]]},{"id":"e31f806c.4a6dc","type":"function","z":"8ee48a3f.e52898","name":"global set ballvalve","func":"global.set('ballvalve',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":428.47618103027344,"y":1098.1428407430649,"wires":[[]]},{"id":"fa8ac20.3b1fe4","type":"inject","z":"8ee48a3f.e52898","name":"Ball valve 0","topic":"ballvalve","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":206.04756927490234,"y":1048.5237611532211,"wires":[["e31f806c.4a6dc"]]},{"id":"5903ef6d.65055","type":"DataIn","z":"8ee48a3f.e52898","collection":"6ab1b86.2115848","name":"","update":false,"path":"/BRperm","x":1305.1904563903809,"y":1609.5713939666748,"wires":[]},{"id":"4df26933.22a728","type":"DataIn","z":"8ee48a3f.e52898","collection":"6ab1b86.2115848","name":"","update":false,"path":"/BVperm","x":1290.4761695861816,"y":1705.0000343322754,"wires":[]},{"id":"32368a14.720606","type":"DataIn","z":"8ee48a3f.e52898","collection":"6ab1b86.2115848","name":"","update":false,"path":"/BRperm","x":1433.7142715454102,"y":724.4523657560349,"wires":[]},{"id":"2400a677.94121a","type":"DataIn","z":"8ee48a3f.e52898","collection":"6ab1b86.2115848","name":"","update":false,"path":"/BVperm","x":1439.7143001556396,"y":1046.5476850271225,"wires":[]},{"id":"d44303c6.39b3","type":"DataOut","z":"8ee48a3f.e52898","collection":"6ab1b86.2115848","name":"","path":"/BVperm","error":false,"x":771.8572521209717,"y":225.809601187706,"wires":[["1b64f008.252d4","1e2667c.b8bb798"]]},{"id":"290616ed.091baa","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BRperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":625.8095169067383,"y":2011.7857803106308,"wires":[["9f37e967.0041e8"]]},{"id":"7979bad9.29a194","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":627.3809127807617,"y":2101.642877936363,"wires":[["2458780a.dbafd8"]]},{"id":"9f37e967.0041e8","type":"DataOut","z":"8ee48a3f.e52898","collection":"6ab1b86.2115848","name":"","path":"/BRperm","error":false,"x":815.3809432983398,"y":2007.3572038412094,"wires":[["6fccbc7.36f5e44"]]},{"id":"2458780a.dbafd8","type":"DataOut","z":"8ee48a3f.e52898","collection":"6ab1b86.2115848","name":"","path":"/BVperm","error":false,"x":815.3808555603027,"y":2093.071519255638,"wires":[["78aff6f1.be3888"]]},{"id":"ddfa8ed.795e97","type":"inject","z":"8ee48a3f.e52898","name":"","topic":"","payload":"startup","payloadType":"str","repeat":"","crontab":"","once":true,"x":310.30953216552734,"y":2106.7860431671143,"wires":[["290616ed.091baa","7979bad9.29a194","6c0296.2e7fad6c"]]},{"id":"6fccbc7.36f5e44","type":"function","z":"8ee48a3f.e52898","name":"global set brperm","func":"var brperm = global.set('brperm',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1004.8095169067383,"y":1999.7857803106308,"wires":[[]]},{"id":"78aff6f1.be3888","type":"function","z":"8ee48a3f.e52898","name":"global set bvperm","func":"var bvperm = global.set('bvperm',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1008.8095169067383,"y":2093.785780310631,"wires":[[]]},{"id":"210aedc.065f612","type":"inject","z":"8ee48a3f.e52898","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":234.33338737487793,"y":264.3334583044052,"wires":[["c7b4bbed.91f558","89a8b026.6a9c9","6ed62da8.3d7334"]]},{"id":"41dfe28d.cf564c","type":"comment","z":"8ee48a3f.e52898","name":"Send runtimes to vis","info":"","x":707.8333320617676,"y":59,"wires":[]},{"id":"bc2a6714.136ad8","type":"comment","z":"8ee48a3f.e52898","name":"Blower runtime ","info":"","x":792.6904640197754,"y":432.9762029647827,"wires":[]},{"id":"82cdfa12.309488","type":"comment","z":"8ee48a3f.e52898","name":"Ball Valve runtime","info":"","x":598.3333282470703,"y":827.8333343267441,"wires":[]},{"id":"70b6deb5.69ed3","type":"comment","z":"8ee48a3f.e52898","name":"Factory reset runtimes","info":"","x":657.8333282470703,"y":1522.8334770202637,"wires":[]},{"id":"f8365435.3359d8","type":"comment","z":"8ee48a3f.e52898","name":"Read runtimes from DB on startup","info":"","x":656.1428985595703,"y":1945.785650253296,"wires":[]},{"id":"1e1950ea.6fe55f","type":"vis in","z":"8ee48a3f.e52898","language":"en","x":1550.4445037841797,"y":225.50003719329834,"wires":[[]]},{"id":"1b64f008.252d4","type":"range","z":"8ee48a3f.e52898","minin":"0","maxin":"3600","minout":"0","maxout":"1","action":"scale","round":true,"name":"","x":918.4999523162842,"y":256.00000035762787,"wires":[["fd641b5e.c6a368"]]},{"id":"8d775ae5.183758","type":"range","z":"8ee48a3f.e52898","minin":"0","maxin":"3600","minout":"0","maxout":"1","action":"scale","round":true,"name":"","x":916.0000133514404,"y":174.00000035762787,"wires":[["1a43d4b8.ad1a0b"]]},{"id":"1a43d4b8.ad1a0b","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"brpermhrs","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1112.5717296600342,"y":168.27388036251068,"wires":[["1e1950ea.6fe55f","6e110d8c.df4ea4"]]},{"id":"d615678b.9a4108","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"bvpermmins","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1267.8216075897217,"y":216.8810123205185,"wires":[["1e1950ea.6fe55f"]]},{"id":"113c6484.a4c1eb","type":"vis in","z":"8ee48a3f.e52898","language":"en","x":226.99993133544922,"y":1629.0000400543213,"wires":[["f76a31b3.41fec","b56e21b0.b27b7","59341440.dc719c","e3f693c.c78cc7"]]},{"id":"17266283.fb3f0d","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"brpermmins","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1359.5000610351562,"y":120.99995803833008,"wires":[["1e1950ea.6fe55f","73c279ec.7090f8"]]},{"id":"257607b4.f2e768","type":"delay","z":"8ee48a3f.e52898","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":310.49996185302734,"y":805.4999622106552,"wires":[["fc70ac46.4f115","1c4aca6c.14c746","233f6da6.5abdc2"]]},{"id":"694f4eb7.b240b","type":"function","z":"8ee48a3f.e52898","name":"calculate minutes from seconds","func":"var originalval = msg.payload;\nvar var1 = \"\";\n\nvar1 = parseFloat(originalval/3600).toFixed(5);\nvar2 = Math.trunc(originalval/3600);\nvar3 = var1 - var2;\nvar4 = Math.trunc(var3*60);\nmsg.payload = var4;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1112,"y":120.99995362758636,"wires":[["17266283.fb3f0d"]]},{"id":"1e2667c.b8bb798","type":"function","z":"8ee48a3f.e52898","name":"calculate minutes from seconds","func":"var originalval = msg.payload;\nvar var1 = \"\";\n\nvar1 = parseFloat(originalval/3600).toFixed(5);\nvar2 = Math.trunc(originalval/3600);\nvar3 = var1 - var2;\nvar4 = Math.trunc(var3*60);\nmsg.payload = var4;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":991.9999523162842,"y":217.99995458126068,"wires":[["d615678b.9a4108"]]},{"id":"6ed62da8.3d7334","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":584.5,"y":339.99998474121094,"wires":[["3ba4f813.d1b0e8"]]},{"id":"3ba4f813.d1b0e8","type":"DataOut","z":"8ee48a3f.e52898","collection":"6ab1b86.2115848","name":"","path":"/CVperm","error":false,"x":769.0714111328125,"y":337.57139587402344,"wires":[["93fd850f.b842d8","f79791d5.38e09"]]},{"id":"93fd850f.b842d8","type":"range","z":"8ee48a3f.e52898","minin":"0","maxin":"3600","minout":"0","maxout":"1","action":"scale","round":true,"name":"","x":931.2141036987305,"y":324.4761161804199,"wires":[["76f4c13f.26158"]]},{"id":"76f4c13f.26158","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"cvpermhrs","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1081.7858428955078,"y":322.74998664855957,"wires":[["1e1950ea.6fe55f"]]},{"id":"f79791d5.38e09","type":"function","z":"8ee48a3f.e52898","name":"calculate minutes from seconds","func":"var originalval = msg.payload;\nvar var1 = \"\";\n\nvar1 = parseFloat(originalval/3600).toFixed(5);\nvar2 = Math.trunc(originalval/3600);\nvar3 = var1 - var2;\nvar4 = Math.trunc(var3*60);\nmsg.payload = var4;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1007.2141036987305,"y":361.4760694503784,"wires":[["4dfa3053.867f2"]]},{"id":"4dfa3053.867f2","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"cvpermmins","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1238.214183807373,"y":357.47605895996094,"wires":[["1e1950ea.6fe55f"]]},{"id":"233f6da6.5abdc2","type":"function","z":"8ee48a3f.e52898","name":"global get conveyor","func":"if (global.get ('conveyor') == 1 ) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":375.99999809265137,"y":1278.5000022649765,"wires":[["deb62c04.22cc4"]]},{"id":"191e3d79.d43b73","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1276.1430797576904,"y":1363.131056189537,"wires":[["d456304c.216ab"]]},{"id":"9efa7043.7044c","type":"counter","z":"8ee48a3f.e52898","name":"","outputs":1,"x":763.0000057220459,"y":1221.7500118017197,"wires":[["acb087dd.725788"]]},{"id":"34a3a521.489efa","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":948.0000057220459,"y":1161.7500118017197,"wires":[["9efa7043.7044c"]]},{"id":"8b06bc24.23357","type":"trigger","z":"8ee48a3f.e52898","op1":"0","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":760.5000057220459,"y":1339.7500118017197,"wires":[["a86f8792.645c48","71e8689.9c46898"]]},{"id":"71c7f9b5.3f9878","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":676.5000057220459,"y":1392.7500118017197,"wires":[["8b06bc24.23357"]]},{"id":"deb62c04.22cc4","type":"switch","z":"8ee48a3f.e52898","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":559.5000057220459,"y":1277.7500118017197,"wires":[["9efa7043.7044c","71c7f9b5.3f9878","f5c54496.b42048"],["8b06bc24.23357"]]},{"id":"a86f8792.645c48","type":"function","z":"8ee48a3f.e52898","name":"global set cvperm","func":"var temp = global.get('cvperm') -( -global.get('cvtemp')); \nvar cvperm = global.set('cvperm',temp);\nmsg.payload = global.get('cvperm');\nreturn msg;","outputs":1,"noerr":0,"x":1013.5000057220459,"y":1368.7500118017197,"wires":[["191e3d79.d43b73"]]},{"id":"71e8689.9c46898","type":"function","z":"8ee48a3f.e52898","name":"global set cvtemp","func":"var cvtemp = global.set('cvtemp',0);\nreturn msg;","outputs":1,"noerr":0,"x":1006.5000057220459,"y":1425.7500118017197,"wires":[["34a3a521.489efa"]]},{"id":"1b4a8a83.fef265","type":"inject","z":"8ee48a3f.e52898","name":"conveyor 1","topic":"conveyor","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":241.64288902282715,"y":1438.107073187828,"wires":[["1eb6206f.8112b"]]},{"id":"1eb6206f.8112b","type":"function","z":"8ee48a3f.e52898","name":"global set conveyor","func":"global.set('conveyor',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":462.7619380950928,"y":1417.9524062871933,"wires":[[]]},{"id":"205b8a41.c22716","type":"inject","z":"8ee48a3f.e52898","name":"conveyor 0","topic":"conveyor","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":230.33332633972168,"y":1368.3333266973495,"wires":[["1eb6206f.8112b"]]},{"id":"d456304c.216ab","type":"DataIn","z":"8ee48a3f.e52898","collection":"6ab1b86.2115848","name":"","update":false,"path":"/CVperm","x":1474.000057220459,"y":1366.357250571251,"wires":[]},{"id":"b8f7b3f7.a9e98","type":"comment","z":"8ee48a3f.e52898","name":"Conveyor runtime","info":"","x":632.6190853118896,"y":1147.6428998708725,"wires":[]},{"id":"c01b64e.5e8d698","type":"DataOut","z":"8ee48a3f.e52898","collection":"6ab1b86.2115848","name":"","path":"/BRperm","error":false,"x":771.8572521209717,"y":164.09529149532318,"wires":[["8d775ae5.183758","694f4eb7.b240b","2194018f.27ffde"]]},{"id":"6c4079f3.d3b328","type":"function","z":"8ee48a3f.e52898","name":"global get cvperm","func":"msg.payload = global.get('cvperm');\nmsg.topic = 'cvperm';\nreturn msg;","outputs":1,"noerr":0,"x":837.1901187896729,"y":1765.219098687172,"wires":[["179b7737.d48ec9"]]},{"id":"179b7737.d48ec9","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1084.2616138458252,"y":1773.2427326440811,"wires":[["e9c3b47.e673948"]]},{"id":"e9c3b47.e673948","type":"DataIn","z":"8ee48a3f.e52898","collection":"6ab1b86.2115848","name":"","update":false,"path":"/CVperm","x":1294.7614269256592,"y":1782.1712490320206,"wires":[]},{"id":"a89d22e4.f9295","type":"function","z":"8ee48a3f.e52898","name":"global set cvperm","func":"var cvperm = global.set('cvperm',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":986.5930633544922,"y":2165.0261640548706,"wires":[[]]},{"id":"71d2c8b8.55bc48","type":"DataOut","z":"8ee48a3f.e52898","collection":"6ab1b86.2115848","name":"","path":"/CVperm","error":false,"x":797.1644897460938,"y":2172.597587585449,"wires":[["a89d22e4.f9295"]]},{"id":"6c0296.2e7fad6c","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":607.5930633544922,"y":2177.0261640548706,"wires":[["71d2c8b8.55bc48"]]},{"id":"b56e21b0.b27b7","type":"switch","z":"8ee48a3f.e52898","name":"reset blower runtime","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"brreset","vt":"str"}],"checkall":"true","outputs":1,"x":316.34851264953613,"y":1781.157247543335,"wires":[["f070ffab.38f02"]]},{"id":"f070ffab.38f02","type":"function","z":"8ee48a3f.e52898","name":"Reset blower runtime","func":"var brtemp = global.set ('brtemp', 0);\nvar brperm = global.set ('brperm', 0);\nvar blwrcount = global.set ('blwrcount', 0);\nvar brreset = global.set ('brreset', 0);\nreturn msg; \n","outputs":"1","noerr":0,"x":547.3485126495361,"y":1781.157247543335,"wires":[["27022eb6.613e42"]]},{"id":"59341440.dc719c","type":"switch","z":"8ee48a3f.e52898","name":"reset ball valve runtime","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"bvreset","vt":"str"}],"checkall":"true","outputs":1,"x":322.34851264953613,"y":1828.157247543335,"wires":[["67bcac8.adb9e54"]]},{"id":"67bcac8.adb9e54","type":"function","z":"8ee48a3f.e52898","name":"Reset ball valve runtime","func":"var bvtemp = global.set ('bvtemp', 0);\nvar bvperm = global.set ('bvperm', 0);\nvar bvcount = global.set ('bvcount', 0);\nvar bvreset = global.set ('bvreset', 0);\nreturn msg; \n","outputs":"1","noerr":0,"x":553.3485126495361,"y":1828.157247543335,"wires":[["5c073106.2bf38"]]},{"id":"e3f693c.c78cc7","type":"switch","z":"8ee48a3f.e52898","name":"reset conveyor runtime","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"cvreset","vt":"str"}],"checkall":"true","outputs":1,"x":308.34851264953613,"y":1873.157247543335,"wires":[["8978f8ff.e1be88"]]},{"id":"8978f8ff.e1be88","type":"function","z":"8ee48a3f.e52898","name":"Reset conveyor runtime","func":"var cvtemp = global.set ('cvtemp', 0);\nvar cvperm = global.set ('cvperm', 0);\nvar cvcount = global.set ('cvcount', 0);\nvar cvreset = global.set ('cvreset', 0);\nreturn msg; \n","outputs":"1","noerr":0,"x":549.3485126495361,"y":1873.157247543335,"wires":[["6c4079f3.d3b328"]]},{"id":"714c4dee.0d30e4","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BRperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1073.270751953125,"y":640.7741584777832,"wires":[["4a8dc73c.b9f968"]]},{"id":"4a8dc73c.b9f968","type":"DataIn","z":"8ee48a3f.e52898","collection":"6ab1b86.2115848","name":"","update":false,"path":"/BRperm","x":1310.4135360717773,"y":642.9883184432983,"wires":[]},{"id":"74361e4d.22122","type":"function","z":"8ee48a3f.e52898","name":"global set brtemp","func":"if (global.get('brtemp')< 60) \n    {global.set('brtemp',msg.payload);}\nelse if (global.get('brtemp')>= 60)\n    {global.set('brtemp',0);\n    return msg;}\n\n","outputs":1,"noerr":0,"x":1089.0191802978516,"y":587.50159740448,"wires":[["8abd0a38.998fb8"]]},{"id":"99a5e45d.5f2978","type":"function","z":"8ee48a3f.e52898","name":"global set brperm","func":"if (global.get('brtemp')>= 60) {\nvar temp = global.get('brperm') -(-60); \nvar brperm = global.set('brperm',temp);\nmsg.payload = global.get('brperm');\nreturn msg;}\n","outputs":1,"noerr":0,"x":785.7486724853516,"y":635.5369520187378,"wires":[["714c4dee.0d30e4"]]},{"id":"b12b9915.1161f8","type":"function","z":"8ee48a3f.e52898","name":"global set bvtemp","func":"if (global.get('bvtemp')< 60) \n    {global.set('bvtemp',msg.payload);}\nelse if (global.get('bvtemp')>= 60)\n    {global.set('bvtemp',0);\n    return msg;}\n\n","outputs":1,"noerr":0,"x":1107.6879348754883,"y":910.2290544509888,"wires":[["f56a58d5.cf8328"]]},{"id":"871d9864.dc0c08","type":"function","z":"8ee48a3f.e52898","name":"global set bvperm","func":"if (global.get('bvtemp')>= 60) {\nvar temp2 = global.get('bvperm') -(-60); \nvar bvperm = global.set('bvperm',temp2);\nmsg.payload = global.get('bvperm');\nreturn msg;}\n","outputs":1,"noerr":0,"x":790.1315803527832,"y":953.2645053863525,"wires":[["14596b82.6c5d54"]]},{"id":"14596b82.6c5d54","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1091.2251510620117,"y":959.9299354553223,"wires":[["8f3f0a02.e2adf8"]]},{"id":"8f3f0a02.e2adf8","type":"DataIn","z":"8ee48a3f.e52898","collection":"6ab1b86.2115848","name":"","update":false,"path":"/BVperm","x":1307.296543121338,"y":958.2157754898071,"wires":[]},{"id":"acb087dd.725788","type":"function","z":"8ee48a3f.e52898","name":"global set cvtemp","func":"if (global.get('cvtemp')< 60) \n    {global.set('cvtemp',msg.payload);}\nelse if (global.get('cvtemp')>= 60)\n    {global.set('cvtemp',0);\n    return msg;}\n\n","outputs":1,"noerr":0,"x":1159.5060958862305,"y":1228.378189086914,"wires":[["34a3a521.489efa"]]},{"id":"f5c54496.b42048","type":"function","z":"8ee48a3f.e52898","name":"global set cvperm","func":"if (global.get('cvtemp')>= 60) {\nvar temp3 = global.get('cvperm') -(-60); \nvar cvperm = global.set('cvperm',temp3);\nmsg.payload = global.get('cvperm');\nreturn msg;}\n","outputs":1,"noerr":0,"x":851.9498443603516,"y":1279.270770072937,"wires":[["f53a5b5f.77cdb8"]]},{"id":"f53a5b5f.77cdb8","type":"change","z":"8ee48a3f.e52898","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVperm","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1136.615089416504,"y":1282.0078783035278,"wires":[["5d7e26c3.0a7dd8"]]},{"id":"5d7e26c3.0a7dd8","type":"DataIn","z":"8ee48a3f.e52898","collection":"6ab1b86.2115848","name":"","update":false,"path":"/CVperm","x":1366.6149063110352,"y":1285.650652885437,"wires":[]},{"id":"73c279ec.7090f8","type":"debug","z":"8ee48a3f.e52898","name":"","active":false,"console":"false","complete":"false","x":1562.3429412841797,"y":117.78567504882812,"wires":[]},{"id":"6e110d8c.df4ea4","type":"debug","z":"8ee48a3f.e52898","name":"","active":false,"console":"false","complete":"false","x":1605.200267791748,"y":184.57140922546387,"wires":[]},{"id":"2194018f.27ffde","type":"debug","z":"8ee48a3f.e52898","name":"","active":false,"console":"false","complete":"false","x":989.8429216657364,"y":84.57138315268924,"wires":[]},{"id":"c9755259.eba26","type":"inject","z":"8ee48a3f.e52898","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":1046.271713256836,"y":503.14285469055176,"wires":[["74361e4d.22122"]]},{"id":"5fc13c75.d19b64","type":"inject","z":"8ee48a3f.e52898","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":1124.8430099487305,"y":831.7143049240112,"wires":[["b12b9915.1161f8"]]},{"id":"252b406d.46db9","type":"inject","z":"8ee48a3f.e52898","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":1169.4857864379883,"y":1147.7858037948608,"wires":[["acb087dd.725788"]]},{"id":"5bac1d67.c5b874","type":"change","z":"40de537b.64e2bc","name":"","rules":[{"t":"set","p":"topic ","pt":"msg","to":"PS0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":543.3333053588867,"y":226.3809642791748,"wires":[["5953466e.adeca8"]]},{"id":"c8bd3929.828d48","type":"change","z":"40de537b.64e2bc","name":"","rules":[{"t":"set","p":"topic ","pt":"msg","to":"PS1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":563.8689422607422,"y":317.20240783691406,"wires":[["574c93e0.98748c","ffb6bada.a0a648"]]},{"id":"48ef1666.a09f38","type":"inject","z":"40de537b.64e2bc","name":"Auto Tune PULSE","topic":"","payload":"","payloadType":"num","repeat":"1","crontab":"","once":true,"x":193.5475082397461,"y":597.1310005187988,"wires":[["98fc9356.3dcc7","5149303f.4a83f","856744c3.150a58","b2cf29e6.5ab788","6b3b1685.076328","234be15e.32c19e","b28f400d.27771","e5d88891.7841a8","2a134e4.a3e3eb2","168a126a.7f198e","fb3197c9.3fe428","ebd2c7ef.d62408","60ff92e9.3ae80c"]]},{"id":"5953466e.adeca8","type":"function","z":"40de537b.64e2bc","name":"qualifier for write to data base set press","func":"if (global.get ('step4')===1) {\nglobal.set ('PS0', msg.payload );\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":898.8452377319336,"y":226.78573989868164,"wires":[["e8dd7145.cdbe1","389e5e2c.0b19c2"]]},{"id":"ffb6bada.a0a648","type":"function","z":"40de537b.64e2bc","name":"qualifier for write to data base set press","func":"if (global.get ('step4')===1) {\nglobal.set ('PS1', msg.payload );\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":919.9761505126953,"y":336.96430015563965,"wires":[["63a0a60c.b9a618","e7c37e2b.8313"]]},{"id":"920f542a.b68048","type":"comment","z":"40de537b.64e2bc","name":"Help Get Data","info":"Push to get the /myRootTest/currentTime a from the collection Test.\nThat time has been set by the set data.","x":756.8808517456055,"y":466.33333921432495,"wires":[]},{"id":"d33f5b86.ba8fd8","type":"change","z":"40de537b.64e2bc","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":876.4641952514648,"y":514.9285764694214,"wires":[["8d0dda29.8efee8"]]},{"id":"1fcf334e.46174d","type":"comment","z":"40de537b.64e2bc","name":"Help Get Data","info":"Push to get the /myRootTest/currentTime a from the collection Test.\nThat time has been set by the set data.","x":634.4998626708984,"y":511.5714120864868,"wires":[]},{"id":"af527acc.824fe8","type":"function","z":"40de537b.64e2bc","name":"global set PS0","func":"var PS0 = global.set ('PS0', msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1335.6902389526367,"y":541.6666412353516,"wires":[[]]},{"id":"457592e0.1e75cc","type":"function","z":"40de537b.64e2bc","name":"global set PS1","func":"var PS1 = global.set ('PS1', msg.payload);\nreturn;","outputs":1,"noerr":0,"x":1334.261817932129,"y":690.7143259048462,"wires":[[]]},{"id":"4b82638f.7e28cc","type":"inject","z":"40de537b.64e2bc","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":true,"x":590.6904373168945,"y":553.2857646942139,"wires":[["d33f5b86.ba8fd8"]]},{"id":"8b8f66fe.5bba98","type":"change","z":"40de537b.64e2bc","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":898.4999618530273,"y":624.7142963409424,"wires":[["7cb52947.71ecc8"]]},{"id":"574c93e0.98748c","type":"function","z":"40de537b.64e2bc","name":"actFilt","func":"global.set ('actFilt', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":819.9760131835938,"y":412.2856864929199,"wires":[[]]},{"id":"e5d88891.7841a8","type":"function","z":"40de537b.64e2bc","name":"global setPress","func":"global.set ('setPres', global.get('PS0'));\nreturn;","outputs":1,"noerr":0,"x":306.6428527832031,"y":235.4762053489685,"wires":[[]]},{"id":"c6917811.fd7328","type":"DataIn","z":"40de537b.64e2bc","collection":"a99ce543.88b118","name":"","update":true,"path":"/SP0","x":1366.9761276245117,"y":122.23810195922852,"wires":[]},{"id":"d6006222.b0e9e","type":"DataIn","z":"40de537b.64e2bc","collection":"a99ce543.88b118","name":"","update":false,"path":"/SP1","x":1431.1189556121826,"y":443.2381057739258,"wires":[]},{"id":"7cb52947.71ecc8","type":"DataOut","z":"40de537b.64e2bc","collection":"a99ce543.88b118","name":"","path":"SP1","error":false,"x":1092.6903686523438,"y":555.3809623718262,"wires":[["457592e0.1e75cc"]]},{"id":"c6d4dc9.f83172","type":"inject","z":"40de537b.64e2bc","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":629.1189460754395,"y":587.8095512390137,"wires":[["8b8f66fe.5bba98"]]},{"id":"8d0dda29.8efee8","type":"DataOut","z":"40de537b.64e2bc","collection":"a99ce543.88b118","name":"","path":"/SP0","error":false,"x":1090.6903686523438,"y":501.3809623718262,"wires":[["af527acc.824fe8"]]},{"id":"e8dd7145.cdbe1","type":"change","z":"40de537b.64e2bc","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1157.5474586486816,"y":123.66667556762695,"wires":[["c6917811.fd7328"]]},{"id":"63a0a60c.b9a618","type":"change","z":"40de537b.64e2bc","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1184.6904678344727,"y":434.04763984680176,"wires":[["d6006222.b0e9e"]]},{"id":"389e5e2c.0b19c2","type":"delay","z":"40de537b.64e2bc","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1414.976082938058,"y":220.66667665754045,"wires":[["d33f5b86.ba8fd8"]]},{"id":"e7c37e2b.8313","type":"delay","z":"40de537b.64e2bc","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1447.8331832885742,"y":344.9523687362671,"wires":[["8b8f66fe.5bba98"]]},{"id":"5149303f.4a83f","type":"function","z":"40de537b.64e2bc","name":"qualifier for write to data base set press","func":"if (global.get ('step3')===1) {\nglobal.set ('PS1', 0 );\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":461.40472412109375,"y":968.8809900283813,"wires":[["42c8f74.f8d8008"]]},{"id":"98fc9356.3dcc7","type":"function","z":"40de537b.64e2bc","name":"qualifier for write to data base set press","func":"if (global.get ('step3')===1) {\nglobal.set ('PS0', 0 );\nmsg.payload = global.get('PS0');\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":462.77378845214844,"y":930.4881172180176,"wires":[["d2aafb37.3863b8"]]},{"id":"42c8f74.f8d8008","type":"rbe","z":"40de537b.64e2bc","name":"","func":"rbe","gap":"","start":"","inout":"out","x":882.404655456543,"y":965.523853302002,"wires":[["8b8f66fe.5bba98"]]},{"id":"d2aafb37.3863b8","type":"rbe","z":"40de537b.64e2bc","name":"","func":"rbe","gap":"","start":"","inout":"out","x":762.5475387573242,"y":934.666675567627,"wires":[["d33f5b86.ba8fd8"]]},{"id":"a5f3e24d.58fad","type":"change","z":"40de537b.64e2bc","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP03","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":844.0235900878906,"y":1231.380846977234,"wires":[["47b05cd8.b6cf94","c7e757f7.d262a8"]]},{"id":"b4fad7c2.702588","type":"change","z":"40de537b.64e2bc","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP02","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":852.9284057617188,"y":1191.2856998443604,"wires":[["28747502.70316a","4c2a28ab.85c6a8"]]},{"id":"5f34529c.4e7f3c","type":"change","z":"40de537b.64e2bc","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP04","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":845.6902618408203,"y":1281.3808393478394,"wires":[["630d4053.ce7ec","6fed2421.1d8c6c"]]},{"id":"28747502.70316a","type":"DataIn","z":"40de537b.64e2bc","collection":"a99ce543.88b118","name":"","update":false,"path":"/SP02","x":1119.0237884521484,"y":1184.7143001556396,"wires":[]},{"id":"47b05cd8.b6cf94","type":"DataIn","z":"40de537b.64e2bc","collection":"a99ce543.88b118","name":"","update":false,"path":"/SP03","x":1120.6902923583984,"y":1226.3809280395508,"wires":[]},{"id":"630d4053.ce7ec","type":"DataIn","z":"40de537b.64e2bc","collection":"a99ce543.88b118","name":"","update":false,"path":"/SP04","x":1122.3570404052734,"y":1279.714303970337,"wires":[]},{"id":"2fbd87cb.cb4768","type":"DataOut","z":"40de537b.64e2bc","collection":"a99ce543.88b118","name":"","path":"/SP02","error":false,"x":1059.0236320495605,"y":1403.047640800476,"wires":[["266f56ec.39340a"]]},{"id":"76c07b26.b18374","type":"change","z":"40de537b.64e2bc","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP03","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":810.6903076171875,"y":1453.0475883483887,"wires":[["3f7df39b.67135c"]]},{"id":"f44fba65.020638","type":"change","z":"40de537b.64e2bc","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP02","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":819.5951232910156,"y":1412.9524412155151,"wires":[["2fbd87cb.cb4768"]]},{"id":"ad8ac569.4e5668","type":"inject","z":"40de537b.64e2bc","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"x":582.357048034668,"y":1424.714373588562,"wires":[["f44fba65.020638"]]},{"id":"3cb6b0ef.cd9c8","type":"change","z":"40de537b.64e2bc","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/SP04","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":812.3569793701172,"y":1503.0475807189941,"wires":[["7143df24.cb7d9"]]},{"id":"3f7df39b.67135c","type":"DataOut","z":"40de537b.64e2bc","collection":"a99ce543.88b118","name":"","path":"/SP03","error":false,"x":1070.3570365905762,"y":1472.3808794021606,"wires":[["e47217dd.b164e8"]]},{"id":"7143df24.cb7d9","type":"DataOut","z":"40de537b.64e2bc","collection":"a99ce543.88b118","name":"","path":"/SP04","error":false,"x":1065.3570556640625,"y":1515.7143363952637,"wires":[["83d0572f.87f138"]]},{"id":"575afc34.f78d54","type":"inject","z":"40de537b.64e2bc","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"x":582.3569946289062,"y":1461.3809623718262,"wires":[["76c07b26.b18374"]]},{"id":"c1ccf02b.91b4e","type":"inject","z":"40de537b.64e2bc","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"x":580.6903686523438,"y":1508.0475883483887,"wires":[["3cb6b0ef.cd9c8"]]},{"id":"856744c3.150a58","type":"function","z":"40de537b.64e2bc","name":"qualifier for write to data base set press","func":"if (global.get ('step6')===1) {\nmsg.payload = global.get ('oldPhi');\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":274.97601318359375,"y":1064.952356338501,"wires":[["b4fad7c2.702588"]]},{"id":"b2cf29e6.5ab788","type":"function","z":"40de537b.64e2bc","name":"qualifier for write to data base set press","func":"if (global.get ('step6')===1) {\nmsg.payload = global.get ('oldPlo');\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":276.40464782714844,"y":1106.3808574676514,"wires":[["a5f3e24d.58fad"]]},{"id":"6b3b1685.076328","type":"function","z":"40de537b.64e2bc","name":"qualifier for write to data base set press","func":"if (global.get ('step6')===1) {\nmsg.payload = global.get ('oldFilt');\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":283.5475044250488,"y":1149.2381572723389,"wires":[["5f34529c.4e7f3c"]]},{"id":"266f56ec.39340a","type":"function","z":"40de537b.64e2bc","name":"global set PS2","func":"var PS2 = global.set ('PS2', msg.payload);\nvar oldPhi = global.set ('oldPhi', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1517.35693359375,"y":1399.7143478393555,"wires":[[]]},{"id":"e47217dd.b164e8","type":"function","z":"40de537b.64e2bc","name":"global set PS3","func":"var PS3 = global.set ('PS3', msg.payload);\nvar oldPlo = global.set ('oldPlo', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1519.0236206054688,"y":1443.0475883483887,"wires":[[]]},{"id":"83d0572f.87f138","type":"function","z":"40de537b.64e2bc","name":"global set PS4","func":"var PS4 = global.set ('PS4', msg.payload);\nvar oldDirt = global.set ('oldFilt', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1505.6903915405273,"y":1481.3808975219727,"wires":[[]]},{"id":"4c2a28ab.85c6a8","type":"delay","z":"40de537b.64e2bc","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":257.3570442199707,"y":1346.3810138702393,"wires":[["f44fba65.020638"]]},{"id":"c7e757f7.d262a8","type":"delay","z":"40de537b.64e2bc","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":279.023681640625,"y":1393.0475883483887,"wires":[["76c07b26.b18374"]]},{"id":"6fed2421.1d8c6c","type":"delay","z":"40de537b.64e2bc","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":290.69036865234375,"y":1431.3809623718262,"wires":[["3cb6b0ef.cd9c8"]]},{"id":"234be15e.32c19e","type":"function","z":"40de537b.64e2bc","name":"actPres","func":"msg.payload = global.get ('actPres');\nreturn msg;","outputs":1,"noerr":0,"x":262.416561126709,"y":190.7976360321045,"wires":[["5bac1d67.c5b874"]]},{"id":"b28f400d.27771","type":"function","z":"40de537b.64e2bc","name":"actFilt","func":"msg.payload = global.get ('actFilt');\nreturn msg;","outputs":1,"noerr":0,"x":275.6903305053711,"y":270.7618808746338,"wires":[["c8bd3929.828d48"]]},{"id":"2a134e4.a3e3eb2","type":"function","z":"40de537b.64e2bc","name":"global get PS2","func":"msg.payload = global.get('PS2');\nmsg.topic = 'PS2';\nreturn msg;","outputs":1,"noerr":0,"x":1238.6903991699219,"y":828.2857475280762,"wires":[["c57d6923.c13988"]]},{"id":"168a126a.7f198e","type":"function","z":"40de537b.64e2bc","name":"global get PS3","func":"msg.payload = global.get('PS3');\nmsg.topic = 'PS3';\nreturn msg;","outputs":1,"noerr":0,"x":1249.6903991699219,"y":868.2857475280762,"wires":[["c57d6923.c13988"]]},{"id":"fb3197c9.3fe428","type":"function","z":"40de537b.64e2bc","name":"global get PS4","func":"msg.payload = global.get('PS4');\nmsg.topic = 'PS4';\nreturn msg;","outputs":1,"noerr":0,"x":1253.6903991699219,"y":915.2857475280762,"wires":[["c57d6923.c13988"]]},{"id":"ebd2c7ef.d62408","type":"function","z":"40de537b.64e2bc","name":"global get PS0","func":"msg.payload = global.get('PS0');\nmsg.topic = 'PS0';\nreturn msg;","outputs":1,"noerr":0,"x":1231.6903991699219,"y":740.2857475280762,"wires":[["c57d6923.c13988"]]},{"id":"60ff92e9.3ae80c","type":"function","z":"40de537b.64e2bc","name":"global get PS1","func":"msg.payload = global.get('PS1');\nmsg.topic = 'PS1';\nreturn msg;","outputs":1,"noerr":0,"x":1236.3095397949219,"y":781.3333549499512,"wires":[["c57d6923.c13988"]]},{"id":"5caef7b2.102c48","type":"inject","z":"40de537b.64e2bc","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1026.3333053588867,"y":86.66667556762695,"wires":[["c6917811.fd7328","d6006222.b0e9e"]]},{"id":"c7b96055.23444","type":"inject","z":"40de537b.64e2bc","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":957.9999122619629,"y":463.3333065509796,"wires":[["8d0dda29.8efee8"]]},{"id":"c6e5432e.0081","type":"inject","z":"40de537b.64e2bc","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":942.9999313354492,"y":576.666675567627,"wires":[["7cb52947.71ecc8"]]},{"id":"acdf8dde.f665d","type":"inject","z":"40de537b.64e2bc","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":824.666633605957,"y":1136.6667175292969,"wires":[["28747502.70316a","47b05cd8.b6cf94","630d4053.ce7ec"]]},{"id":"ffa0204d.9c7ea","type":"inject","z":"40de537b.64e2bc","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":841.3332443237305,"y":1354.999927520752,"wires":[["2fbd87cb.cb4768","3f7df39b.67135c","7143df24.cb7d9"]]},{"id":"c57d6923.c13988","type":"vis in","z":"40de537b.64e2bc","language":"en","x":1471.047508239746,"y":820.666675567627,"wires":[[]]},{"id":"3c0cbf0f.784b6","type":"function","z":"40de537b.64e2bc","name":"write oldPhi on factreset","func":"msg.payload = global.get ('oldPhi');\nreturn msg;\n","outputs":1,"noerr":0,"x":533.3333053588867,"y":774.666675567627,"wires":[["b4fad7c2.702588"]]},{"id":"e43d929.d61ba7","type":"vis in","z":"40de537b.64e2bc","language":"en","x":161.33330535888672,"y":493.66667556762695,"wires":[["6b312f06.54dce"]]},{"id":"6b312f06.54dce","type":"switch","z":"40de537b.64e2bc","name":"factreset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"factreset","vt":"str"}],"checkall":"true","outputs":1,"x":304.8451461791992,"y":495.23796463012695,"wires":[["3c0cbf0f.784b6","49f207a3.8ef428","6f4fc0af.30592","6e66d37e.ac16bc","4507ed84.0c6004"]]},{"id":"49f207a3.8ef428","type":"function","z":"40de537b.64e2bc","name":"write oldPlo on factreset","func":"msg.payload = global.get ('oldPlo');\nreturn msg;\n","outputs":1,"noerr":0,"x":533.3333053588867,"y":811.666675567627,"wires":[["a5f3e24d.58fad"]]},{"id":"6f4fc0af.30592","type":"function","z":"40de537b.64e2bc","name":"write oldFilt on factreset","func":"msg.payload = global.get ('oldFilt');\nreturn msg;\n","outputs":1,"noerr":0,"x":527.3333053588867,"y":848.666675567627,"wires":[["5f34529c.4e7f3c"]]},{"id":"6e66d37e.ac16bc","type":"function","z":"40de537b.64e2bc","name":"write PS0 on factreset","func":"global.set ('PS0', 0 );\nmsg.payload = global.get('PS0');\nreturn msg;\n","outputs":1,"noerr":0,"x":679.3333053588867,"y":151.66667556762695,"wires":[["e8dd7145.cdbe1"]]},{"id":"4507ed84.0c6004","type":"function","z":"40de537b.64e2bc","name":"write PS1 on factreset","func":"global.set ('PS1', 0 );\nmsg.payload = global.get('PS1');\nreturn msg;\n","outputs":1,"noerr":0,"x":600.3333053588867,"y":433.66667556762695,"wires":[["63a0a60c.b9a618"]]},{"id":"2286c85b.c474c8","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/phase_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":514.9999923706055,"y":171.42858362197876,"wires":[["53571526.f7aa1c"]]},{"id":"53571526.f7aa1c","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/phase_check","error":false,"x":727.1429061889648,"y":170.1428771018982,"wires":[["cfe7d7f0.3766c8"]]},{"id":"2cb1cc1e.9177a4","type":"inject","z":"294ea918.69a4f6","name":"","topic":"","payload":"ddd","payloadType":"str","repeat":"","crontab":"","once":true,"x":159.21424865722656,"y":161.0000195503235,"wires":[["2286c85b.c474c8","866043.123a4fc","490ff99b.eae718","19f4b961.e5ddc7","e56d5d9f.e8329","6ad0be1b.4daad","7276f2bc.e4afcc","4d611661.5eae68","6e000465.1a371c","a29737b0.c2f618"]]},{"id":"cfe7d7f0.3766c8","type":"function","z":"294ea918.69a4f6","name":"global set phase_check","func":"var phase_check = global.set('phase_check', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":984.714225769043,"y":169.0000195503235,"wires":[["a7c0bfd8.54f55"]]},{"id":"eef939a5.c91418","type":"comment","z":"294ea918.69a4f6","name":"Read variables from DB on startup","info":"","x":528.5476226806641,"y":47.00000858306885,"wires":[]},{"id":"866043.123a4fc","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setPhi","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":513.9999923706055,"y":209.00000429153442,"wires":[["aff47bb4.e75878"]]},{"id":"490ff99b.eae718","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setPlo","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":515.9999923706055,"y":248.00000429153442,"wires":[["c4453857.c17488"]]},{"id":"19f4b961.e5ddc7","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setDirt","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":519.9999923706055,"y":288.0000042915344,"wires":[["12f6c5fb.1d50da"]]},{"id":"aff47bb4.e75878","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/setPhi","error":false,"x":707.9999923706055,"y":220.00000429153442,"wires":[["186c85c5.1dc4da"]]},{"id":"c4453857.c17488","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/setPlo","error":false,"x":706.9999923706055,"y":256.0000042915344,"wires":[["82ff5afd.21ae18"]]},{"id":"12f6c5fb.1d50da","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/setDirt","error":false,"x":700.9999923706055,"y":294.0000042915344,"wires":[["d199fb32.a12338"]]},{"id":"186c85c5.1dc4da","type":"function","z":"294ea918.69a4f6","name":"global set setPhi","func":"var setPhi = global.set('setPhi', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":958.9999923706055,"y":210.00000429153442,"wires":[[]]},{"id":"82ff5afd.21ae18","type":"function","z":"294ea918.69a4f6","name":"global set setPlo","func":"var setPlo = global.set('setPlo', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":955.9999923706055,"y":251.00000429153442,"wires":[[]]},{"id":"d199fb32.a12338","type":"function","z":"294ea918.69a4f6","name":"global set setDirt","func":"var setDirt = global.set('setDirt', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":957.9999923706055,"y":290.0000042915344,"wires":[[]]},{"id":"e56d5d9f.e8329","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/conveyor_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500.7142562866211,"y":334.71429109573364,"wires":[["f8d13cb4.c6cd5"]]},{"id":"f8d13cb4.c6cd5","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/conveyor_check","error":false,"x":722.8571701049805,"y":333.4285845756531,"wires":[["50c07d6e.39d324"]]},{"id":"50c07d6e.39d324","type":"function","z":"294ea918.69a4f6","name":"global set conveyor_check","func":"var conveyor_check = global.set('conveyor_check', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":980.4284896850586,"y":332.28572702407837,"wires":[[]]},{"id":"6ad0be1b.4daad","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/conveyor_control","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":504.7142562866211,"y":381.71429109573364,"wires":[["ea42a819.276d68"]]},{"id":"ea42a819.276d68","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/conveyor_control","error":false,"x":726.8571701049805,"y":380.4285845756531,"wires":[["16d6609e.55598f"]]},{"id":"16d6609e.55598f","type":"function","z":"294ea918.69a4f6","name":"global set conveyor_control","func":"var conveyor_control = global.set('conveyor_control', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":984.4284896850586,"y":379.28572702407837,"wires":[[]]},{"id":"7276f2bc.e4afcc","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/afterfilter_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":504.7142562866211,"y":423.71429109573364,"wires":[["4bc563ed.845bac"]]},{"id":"4bc563ed.845bac","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/afterfilter_check","error":false,"x":726.8571701049805,"y":422.4285845756531,"wires":[["ece5b61e.c55af8"]]},{"id":"ece5b61e.c55af8","type":"function","z":"294ea918.69a4f6","name":"global set afterfilter_check","func":"var afterfilter_check = global.set('afterfilter_check', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":984.4284896850586,"y":421.28572702407837,"wires":[[]]},{"id":"4d611661.5eae68","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/ducted_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":501.7142562866211,"y":464.71429109573364,"wires":[["b0f00eab.7794d"]]},{"id":"b0f00eab.7794d","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/ducted_check","error":false,"x":713.8571701049805,"y":463.4285845756531,"wires":[["29987f2d.cc617"]]},{"id":"29987f2d.cc617","type":"function","z":"294ea918.69a4f6","name":"global set ducted_check","func":"var ducted_check = global.set('ducted_check', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":971.4284896850586,"y":462.28572702407837,"wires":[[]]},{"id":"2c62b16b.f9bb7e","type":"inject","z":"294ea918.69a4f6","name":"","topic":"","payload":"ddd","payloadType":"str","repeat":"","crontab":"","once":true,"x":168.7142562866211,"y":484.71429109573364,"wires":[["b95d1a97.07d068","cabbf9c8.e866b8","1ed828cf.b9ae57","f5c7577b.eeeb18","71aad245.da969c","12070845.42a9a8","b4af9f0.44ae36","81cf06d.39ad2f8","1b929a53.c155a6"]]},{"id":"1ed828cf.b9ae57","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/post_time","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":493.2142639160156,"y":590.4285626411438,"wires":[["130b5a4c.c09e96"]]},{"id":"cabbf9c8.e866b8","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/off_time","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":496.2142639160156,"y":549.4285626411438,"wires":[["150abb8c.3b5084"]]},{"id":"b95d1a97.07d068","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/on_time","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":496.2142639160156,"y":507.4285626411438,"wires":[["6cb14a4.9ffe5b4"]]},{"id":"6cb14a4.9ffe5b4","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/on_time","error":false,"x":688.357177734375,"y":506.14285612106323,"wires":[["aefbc5b.6865338"]]},{"id":"150abb8c.3b5084","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/off_time","error":false,"x":688.357177734375,"y":548.1428561210632,"wires":[["f4f36a04.f18498"]]},{"id":"130b5a4c.c09e96","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/post_time","error":false,"x":695.357177734375,"y":589.1428561210632,"wires":[["a34e867a.fd26d8"]]},{"id":"aefbc5b.6865338","type":"function","z":"294ea918.69a4f6","name":"global set on_time","func":"var on_time = global.set('on_time', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":945.9284973144531,"y":504.9999985694885,"wires":[[]]},{"id":"f4f36a04.f18498","type":"function","z":"294ea918.69a4f6","name":"global set off_time","func":"var off_time = global.set('off_time', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":945.9284973144531,"y":546.9999985694885,"wires":[[]]},{"id":"a34e867a.fd26d8","type":"function","z":"294ea918.69a4f6","name":"global set post_time","func":"var post_time = global.set('post_time', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":952.9284973144531,"y":587.9999985694885,"wires":[[]]},{"id":"f5c7577b.eeeb18","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setfspassword","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":488.45006561279297,"y":636.6234097480774,"wires":[["26b7c763.874de8"]]},{"id":"26b7c763.874de8","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/setfspassword","error":false,"x":700.5929794311523,"y":635.3377032279968,"wires":[["cd8505a4.f34148"]]},{"id":"cd8505a4.f34148","type":"function","z":"294ea918.69a4f6","name":"global set setfspassword","func":"var setfspassword = global.set('setfspassword', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":958.1642990112305,"y":634.1948456764221,"wires":[[]]},{"id":"71aad245.da969c","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/alarmonly_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":487.63350677490234,"y":689.1211895942688,"wires":[["4698738.246288c"]]},{"id":"4698738.246288c","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/alarmonly_check","error":false,"x":709.7764205932617,"y":687.8354830741882,"wires":[["d593987e.ec4cf8"]]},{"id":"d593987e.ec4cf8","type":"function","z":"294ea918.69a4f6","name":"global set alarmonly_check","func":"var alarmonly_check = global.set('alarmonly_check', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":967.3477401733398,"y":686.6926255226135,"wires":[[]]},{"id":"ad9443c6.0ee52","type":"comment","z":"5b7e9b69.9ef434","name":"This flow emails address set in vis when an alarm occurs","info":"","x":281.5,"y":47,"wires":[]},{"id":"645b9724.dcf1f8","type":"vis in","z":"5b7e9b69.9ef434","language":"en","x":127.99998474121094,"y":175,"wires":[["4d77bc28.1cfca4","6ee6588c.ead6e8"]]},{"id":"4d77bc28.1cfca4","type":"switch","z":"5b7e9b69.9ef434","name":"set topic alarm_email","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"alarm_email","vt":"str"}],"checkall":"true","outputs":1,"x":322.11114501953125,"y":172.222412109375,"wires":[["954173f.cac559"]]},{"id":"954173f.cac559","type":"function","z":"5b7e9b69.9ef434","name":"global set alarm_email","func":"global.set('alarm_email',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":594.2703857421875,"y":175.07115173339844,"wires":[["f2e58bfd.c546c8"]]},{"id":"ac6137ec.6bad38","type":"function","z":"5b7e9b69.9ef434","name":"permPhi email","func":"msg.payload = 'Unit ' + global.get('unit_id') + ' had a high water alarm.';\nmsg.topic = 'High Water alarm on unit ' + global.get('unit_id');\nmsg.to = global.get('alarm_email');\nreturn msg;\n","outputs":1,"noerr":0,"x":725.939453125,"y":590.2786865234375,"wires":[["6cc61741.53a678"]]},{"id":"c2e76ac5.e53828","type":"inject","z":"5b7e9b69.9ef434","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":137,"y":578.0000305175781,"wires":[["3577d6d6.c7963a","4b55a1b3.93aed","7aadeafd.2b1d24"]]},{"id":"3577d6d6.c7963a","type":"function","z":"5b7e9b69.9ef434","name":"check permPhi","func":"if (global.get ('permPhi') == 1 ) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":377,"y":543.0000305175781,"wires":[["d8b2e4f2.e663e8"]]},{"id":"d8b2e4f2.e663e8","type":"switch","z":"5b7e9b69.9ef434","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":524.5,"y":583.2500305175781,"wires":[["7f4e58b2.7b3ab8"],["7f4e58b2.7b3ab8"]]},{"id":"6ee6588c.ead6e8","type":"switch","z":"5b7e9b69.9ef434","name":"set topic unit_id","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"unit_id","vt":"str"}],"checkall":"true","outputs":1,"x":316,"y":229,"wires":[["7c020843.752f98"]]},{"id":"7c020843.752f98","type":"function","z":"5b7e9b69.9ef434","name":"global set unit_id","func":"global.set('unit_id',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":579.1592407226562,"y":231.84873962402344,"wires":[["8a9dc1b1.22344"]]},{"id":"6cc61741.53a678","type":"debug","z":"5b7e9b69.9ef434","name":"","active":false,"console":"false","complete":"false","x":1050,"y":580,"wires":[]},{"id":"12070845.42a9a8","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/alarm_email","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":479.00003814697266,"y":742.0000004768372,"wires":[["c8e365ce.25cf48"]]},{"id":"c8e365ce.25cf48","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/alarm_email","error":false,"x":681.142951965332,"y":740.7142939567566,"wires":[["6de3dbf7.caf4b4"]]},{"id":"6de3dbf7.caf4b4","type":"function","z":"294ea918.69a4f6","name":"global set alarm_email","func":"var alarm_email = global.set('alarm_email', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":938.7142715454102,"y":739.5714364051819,"wires":[[]]},{"id":"b4af9f0.44ae36","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/unit_id","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":483.7500419616699,"y":799.2500004768372,"wires":[["a21709f9.21ec68"]]},{"id":"a21709f9.21ec68","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/unit_id","error":false,"x":672.1429824829102,"y":799.2142949104309,"wires":[["9426dbf4.d73a48"]]},{"id":"9426dbf4.d73a48","type":"function","z":"294ea918.69a4f6","name":"global set unit_id","func":"var unit_id = global.set('unit_id', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":932.2142715454102,"y":798.0714116096497,"wires":[[]]},{"id":"f2e58bfd.c546c8","type":"debug","z":"5b7e9b69.9ef434","name":"","active":true,"console":"false","complete":"false","x":837.5,"y":166,"wires":[]},{"id":"8a9dc1b1.22344","type":"debug","z":"5b7e9b69.9ef434","name":"","active":true,"console":"false","complete":"false","x":800.5,"y":224,"wires":[]},{"id":"2b971ee7.456e52","type":"inject","z":"5b7e9b69.9ef434","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":179,"y":382,"wires":[["49ad5458.914ebc","af5bd179.05396"]]},{"id":"49ad5458.914ebc","type":"function","z":"5b7e9b69.9ef434","name":"get alarm_email","func":"msg.payload = global.get('alarm_email');\nmsg.topic = 'alarm_email';\nreturn msg;","outputs":1,"noerr":0,"x":478.6072463989258,"y":327.321439743042,"wires":[["3820afee.4c5bd"]]},{"id":"3820afee.4c5bd","type":"vis in","z":"5b7e9b69.9ef434","language":"en","x":750.2501335144043,"y":377.17860174179077,"wires":[[]]},{"id":"af5bd179.05396","type":"function","z":"5b7e9b69.9ef434","name":"get unit_id","func":"msg.payload = global.get('unit_id');\nmsg.topic = 'unit_id';\nreturn msg;","outputs":1,"noerr":0,"x":477,"y":393,"wires":[["3820afee.4c5bd"]]},{"id":"72fe7bfc.398b84","type":"e-mail","z":"5b7e9b69.9ef434","server":"smtp.powweb.com","port":"465","secure":true,"name":"","dname":"","x":989.5,"y":749,"wires":[]},{"id":"7f4e58b2.7b3ab8","type":"trigger","z":"5b7e9b69.9ef434","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"0","name":"","x":650.5,"y":515,"wires":[["ac6137ec.6bad38"]]},{"id":"226a05d1.4e4bfa","type":"function","z":"5b7e9b69.9ef434","name":"permPlo email","func":"msg.payload = 'Unit ' + global.get('unit_id') + ' had a low water alarm.';\nmsg.topic = 'Low Water alarm on unit ' + global.get('unit_id');\nmsg.to = global.get('alarm_email');\nreturn msg;\n","outputs":1,"noerr":0,"x":709,"y":725,"wires":[["6cc61741.53a678"]]},{"id":"4b55a1b3.93aed","type":"function","z":"5b7e9b69.9ef434","name":"check permPlo","func":"if (global.get ('permPlo') == 1 ) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":360.060546875,"y":677.7213439941406,"wires":[["f0af2e99.f1693"]]},{"id":"f0af2e99.f1693","type":"switch","z":"5b7e9b69.9ef434","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":507.560546875,"y":717.9713439941406,"wires":[["b88ff3a7.b1c1f"],["b88ff3a7.b1c1f"]]},{"id":"b88ff3a7.b1c1f","type":"trigger","z":"5b7e9b69.9ef434","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"0","name":"","x":633.560546875,"y":649.7213134765625,"wires":[["226a05d1.4e4bfa"]]},{"id":"b549b3d0.c3bb","type":"function","z":"5b7e9b69.9ef434","name":"permDirt email","func":"msg.payload = 'Unit ' + global.get('unit_id') + ' had a dirty filter alarm.';\nmsg.topic = 'Dirty Filter alarm on unit ' + global.get('unit_id');\nmsg.to = global.get('alarm_email');\nreturn msg;\n","outputs":1,"noerr":0,"x":696,"y":860,"wires":[["6cc61741.53a678"]]},{"id":"7aadeafd.2b1d24","type":"function","z":"5b7e9b69.9ef434","name":"check permDirt","func":"if (global.get ('permDirt') == 1 ) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":347.060546875,"y":812.7213439941406,"wires":[["e9fe3bbc.ae1218"]]},{"id":"e9fe3bbc.ae1218","type":"switch","z":"5b7e9b69.9ef434","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":494.560546875,"y":852.9713439941406,"wires":[["a1e7db66.adc438"],["a1e7db66.adc438"]]},{"id":"a1e7db66.adc438","type":"trigger","z":"5b7e9b69.9ef434","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"0","name":"","x":620.560546875,"y":784.7213134765625,"wires":[["b549b3d0.c3bb"]]},{"id":"81cf06d.39ad2f8","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dynFilldb","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":485.6666946411133,"y":850.9999394416809,"wires":[["1bac78a1.6dcae7"]]},{"id":"1bac78a1.6dcae7","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/dynFilldb","error":false,"x":674.0596351623535,"y":850.9642338752747,"wires":[["cd861073.6dc34"]]},{"id":"cd861073.6dc34","type":"function","z":"294ea918.69a4f6","name":"global set dynFilldb","func":"var dynFilldb = global.set('dynFilldb', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":934.1309242248535,"y":849.8213505744934,"wires":[[]]},{"id":"1b929a53.c155a6","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/multiunit","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":476.00003814697266,"y":905.0000004768372,"wires":[["b84fb0d0.1889a"]]},{"id":"b84fb0d0.1889a","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/multiunit","error":false,"x":664.3929786682129,"y":904.9642949104309,"wires":[["401fa8c2.e19e68"]]},{"id":"401fa8c2.e19e68","type":"function","z":"294ea918.69a4f6","name":"global set multiunit","func":"var multiunit = global.set('multiunit', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":924.4642677307129,"y":903.8214116096497,"wires":[[]]},{"id":"436b0b86.e264b4","type":"switch","z":"5acbf982.b822a8","name":"set topic start_stop_all","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"start_stop_all","vt":"str"}],"checkall":"true","outputs":1,"x":482,"y":1128,"wires":[["8d40ad60.5062a"]]},{"id":"2f2b4e9d.929d82","type":"vis in","z":"41fc4f72.a07cb","language":"en","x":153,"y":183,"wires":[["6b17c305.0cf1ac","af0be62.6a3b318","8b401673.445c28","b4d71985.d1d118","464b25eb.7bfc9c","90fdbc9b.cc49c","6c87f188.65db"]]},{"id":"6b17c305.0cf1ac","type":"switch","z":"41fc4f72.a07cb","name":"set topic dist_name","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"dist_name","vt":"str"}],"checkall":"true","outputs":1,"x":337.1111602783203,"y":180.222412109375,"wires":[["65f5f1b0.2f918"]]},{"id":"65f5f1b0.2f918","type":"function","z":"41fc4f72.a07cb","name":"global set dist_name","func":"global.set('dist_name',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":619.2704010009766,"y":183.07115173339844,"wires":[["39f324b4.b063bc"]]},{"id":"af0be62.6a3b318","type":"switch","z":"41fc4f72.a07cb","name":"set topic dist_phone","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"dist_phone","vt":"str"}],"checkall":"true","outputs":1,"x":357.00001525878906,"y":275,"wires":[["8e39f45a.3a4b88"]]},{"id":"8e39f45a.3a4b88","type":"function","z":"41fc4f72.a07cb","name":"global set dist_phone","func":"global.set('dist_phone',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":629.1592559814453,"y":277.84873962402344,"wires":[["e7076868.7528b8"]]},{"id":"39f324b4.b063bc","type":"debug","z":"41fc4f72.a07cb","name":"","active":true,"console":"false","complete":"false","x":862.5000152587891,"y":174,"wires":[]},{"id":"e7076868.7528b8","type":"debug","z":"41fc4f72.a07cb","name":"","active":true,"console":"false","complete":"false","x":842.5,"y":278,"wires":[]},{"id":"8b401673.445c28","type":"switch","z":"41fc4f72.a07cb","name":"set topic dist_address","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"dist_address","vt":"str"}],"checkall":"true","outputs":1,"x":351.00001525878906,"y":227,"wires":[["1be22b3e.615b95"]]},{"id":"1be22b3e.615b95","type":"function","z":"41fc4f72.a07cb","name":"global set dist_address","func":"global.set('dist_address',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":633.1592559814453,"y":229.84873962402344,"wires":[["8ad365fa.b9be38"]]},{"id":"8ad365fa.b9be38","type":"debug","z":"41fc4f72.a07cb","name":"","active":true,"console":"false","complete":"false","x":866.3888702392578,"y":220.777587890625,"wires":[]},{"id":"b4d71985.d1d118","type":"switch","z":"41fc4f72.a07cb","name":"set topic dist_web","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"dist_web","vt":"str"}],"checkall":"true","outputs":1,"x":342,"y":326,"wires":[["f68d0172.817c7"]]},{"id":"f68d0172.817c7","type":"function","z":"41fc4f72.a07cb","name":"global set dist_web","func":"global.set('dist_web',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":614.1592407226562,"y":328.84873962402344,"wires":[["234fba45.13a986"]]},{"id":"234fba45.13a986","type":"debug","z":"41fc4f72.a07cb","name":"","active":true,"console":"false","complete":"false","x":835.5,"y":329,"wires":[]},{"id":"14caa02c.9b63","type":"inject","z":"41fc4f72.a07cb","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":245,"y":858.8214111328125,"wires":[["5edd43cd.a5695c","bc3835b.1dcb0c8","3b6154b5.8cb1bc","a8209b02.a20578","8d27cd70.55f19","a5514bca.5b2668","4cb64908.6cb668"]]},{"id":"5edd43cd.a5695c","type":"function","z":"41fc4f72.a07cb","name":"get dist_name","func":"msg.payload = global.get('dist_name');\nmsg.topic = 'dist_name';\nreturn msg;","outputs":1,"noerr":0,"x":531.7500915527344,"y":687.5714111328125,"wires":[["3afe3fa3.4c127"]]},{"id":"3afe3fa3.4c127","type":"vis in","z":"41fc4f72.a07cb","language":"en","x":799.2501220703125,"y":832,"wires":[[]]},{"id":"bc3835b.1dcb0c8","type":"function","z":"41fc4f72.a07cb","name":"get dist_address","func":"msg.payload = global.get('dist_address');\nmsg.topic = 'dist_address';\nreturn msg;","outputs":1,"noerr":0,"x":536,"y":733.8214111328125,"wires":[["3afe3fa3.4c127"]]},{"id":"3b6154b5.8cb1bc","type":"function","z":"41fc4f72.a07cb","name":"get dist_phone","func":"msg.payload = global.get('dist_phone');\nmsg.topic = 'dist_phone';\nreturn msg;","outputs":1,"noerr":0,"x":526,"y":776.8214111328125,"wires":[["3afe3fa3.4c127"]]},{"id":"a8209b02.a20578","type":"function","z":"41fc4f72.a07cb","name":"get dist_web","func":"msg.payload = global.get('dist_web');\nmsg.topic = 'dist_web';\nreturn msg;","outputs":1,"noerr":0,"x":521,"y":823.0000128746033,"wires":[["3afe3fa3.4c127"]]},{"id":"464b25eb.7bfc9c","type":"switch","z":"41fc4f72.a07cb","name":"set topic dist_email","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"dist_email","vt":"str"}],"checkall":"true","outputs":1,"x":344,"y":374,"wires":[["e105d682.a142a8"]]},{"id":"e105d682.a142a8","type":"function","z":"41fc4f72.a07cb","name":"global set dist_email","func":"global.set('dist_email',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":626.1592407226562,"y":376.84873962402344,"wires":[["a1e57dee.7b7e7"]]},{"id":"a1e57dee.7b7e7","type":"debug","z":"41fc4f72.a07cb","name":"","active":true,"console":"false","complete":"false","x":837.5,"y":377,"wires":[]},{"id":"8d27cd70.55f19","type":"function","z":"41fc4f72.a07cb","name":"get dist_email","func":"msg.payload = global.get('dist_email');\nmsg.topic = 'dist_email';\nreturn msg;","outputs":1,"noerr":0,"x":532,"y":869,"wires":[["3afe3fa3.4c127"]]},{"id":"90fdbc9b.cc49c","type":"switch","z":"41fc4f72.a07cb","name":"set topic dist_contact","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"dist_contact","vt":"str"}],"checkall":"true","outputs":1,"x":353,"y":420,"wires":[["6d295b34.8344b4"]]},{"id":"6d295b34.8344b4","type":"function","z":"41fc4f72.a07cb","name":"global set dist_contact","func":"global.set('dist_contact',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":625.1592407226562,"y":422.84873962402344,"wires":[["fbc3843d.2bdc28"]]},{"id":"fbc3843d.2bdc28","type":"debug","z":"41fc4f72.a07cb","name":"","active":true,"console":"false","complete":"false","x":836.5,"y":423,"wires":[]},{"id":"a5514bca.5b2668","type":"function","z":"41fc4f72.a07cb","name":"get dist_contact","func":"msg.payload = global.get('dist_contact');\nmsg.topic = 'dist_contact';\nreturn msg;","outputs":1,"noerr":0,"x":537,"y":912,"wires":[["3afe3fa3.4c127"]]},{"id":"3fc12a9.7f415d6","type":"inject","z":"294ea918.69a4f6","name":"","topic":"","payload":"ddd","payloadType":"str","repeat":"","crontab":"","once":true,"x":172.8572120666504,"y":1205.0000081062317,"wires":[["cca4df26.ec41f","8431fac6.44eac8","21732a2d.ba7346","8a7d9e80.e37b5","c0bb33d5.18c08","75f9cb25.0b0844","348141e7.78166e","29ee0589.4e937a","2ac1c968.507db6"]]},{"id":"cca4df26.ec41f","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dist_name","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":465.143009185791,"y":1106.285713672638,"wires":[["c8a3d802.940b18"]]},{"id":"c8a3d802.940b18","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/dist_name","error":false,"x":661.2858924865723,"y":1107.0000081062317,"wires":[["d0c18b58.cfdd88"]]},{"id":"d0c18b58.cfdd88","type":"function","z":"294ea918.69a4f6","name":"global set dist_name","func":"var dist_name = global.set('dist_name', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":898.8572425842285,"y":1101.8571248054504,"wires":[[]]},{"id":"8431fac6.44eac8","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dist_address","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":468.0000648498535,"y":1147.0000081062317,"wires":[["402c6add.c9fe04"]]},{"id":"402c6add.c9fe04","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/dist_address","error":false,"x":674.1429481506348,"y":1147.7143025398254,"wires":[["85921177.014cc"]]},{"id":"85921177.014cc","type":"function","z":"294ea918.69a4f6","name":"global set dist_address","func":"var dist_address = global.set('dist_address', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":911.714298248291,"y":1142.5714192390442,"wires":[[]]},{"id":"21732a2d.ba7346","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dist_contact","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":464.0000648498535,"y":1193.0000081062317,"wires":[["b3628d47.9a426"]]},{"id":"b3628d47.9a426","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/dist_contact","error":false,"x":666.1429786682129,"y":1191.7143015861511,"wires":[["8b1a8e0e.ecfd7"]]},{"id":"8b1a8e0e.ecfd7","type":"function","z":"294ea918.69a4f6","name":"global set dist_contact","func":"var dist_contact = global.set('dist_contact', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":923.714298248291,"y":1190.5714440345764,"wires":[[]]},{"id":"c0bb33d5.18c08","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dist_web","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":464.7500686645508,"y":1284.2500081062317,"wires":[["1de37236.e79b2e"]]},{"id":"1de37236.e79b2e","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/dist_web","error":false,"x":653.143009185791,"y":1284.2143025398254,"wires":[["e4502c77.98aae"]]},{"id":"e4502c77.98aae","type":"function","z":"294ea918.69a4f6","name":"global set dist_web","func":"var dist_web = global.set('dist_web', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":913.214298248291,"y":1283.0714192390442,"wires":[[]]},{"id":"8a7d9e80.e37b5","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dist_phone","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":462.0000648498535,"y":1237.0000081062317,"wires":[["b102bc20.236ea"]]},{"id":"b102bc20.236ea","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/dist_phone","error":false,"x":662.143009185791,"y":1240.7143025398254,"wires":[["130d35e5.a0b6fa"]]},{"id":"130d35e5.a0b6fa","type":"function","z":"294ea918.69a4f6","name":"global set dist_phone","func":"var dist_phone = global.set('dist_phone', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":911.714298248291,"y":1240.5714192390442,"wires":[[]]},{"id":"75f9cb25.0b0844","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dist_email","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":466.66672134399414,"y":1335.9999470710754,"wires":[["76864cc.81ebdb4"]]},{"id":"76864cc.81ebdb4","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/dist_email","error":false,"x":665.0596618652344,"y":1335.9642415046692,"wires":[["1c951ad1.fce7f5"]]},{"id":"1c951ad1.fce7f5","type":"function","z":"294ea918.69a4f6","name":"global set dist_email","func":"var dist_email = global.set('dist_email', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":925.1309509277344,"y":1334.821358203888,"wires":[[]]},{"id":"b8c98633.d67d58","type":"debug","z":"41fc4f72.a07cb","name":"","active":true,"console":"false","complete":"payload","x":1040.857177734375,"y":568.8570556640625,"wires":[]},{"id":"d1d8f1ab.635e6","type":"http request","z":"41fc4f72.a07cb","name":"","method":"GET","ret":"bin","url":"","tls":"","x":878.857177734375,"y":529.8570556640625,"wires":[["b8c98633.d67d58","806386ee.406418"]]},{"id":"806386ee.406418","type":"file","z":"41fc4f72.a07cb","name":"save image","filename":"/home/pi/.node-red/vis/filter1/logo.png","appendNewline":false,"createDir":false,"overwriteFile":"true","x":1048.857177734375,"y":495.8570556640625,"wires":[[]]},{"id":"316bbd02.45e6b2","type":"change","z":"41fc4f72.a07cb","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":700.5714111328125,"y":527.5714111328125,"wires":[["d1d8f1ab.635e6"]]},{"id":"6c87f188.65db","type":"switch","z":"41fc4f72.a07cb","name":"set topic dist_url","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"dist_url","vt":"str"}],"checkall":"true","outputs":1,"x":331,"y":459,"wires":[["24c465f5.abf7da"]]},{"id":"24c465f5.abf7da","type":"function","z":"41fc4f72.a07cb","name":"global set dist_url","func":"global.set('dist_url',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":613.1592407226562,"y":461.84873962402344,"wires":[["fc10568f.fa5498","316bbd02.45e6b2"]]},{"id":"fc10568f.fa5498","type":"debug","z":"41fc4f72.a07cb","name":"","active":true,"console":"false","complete":"false","x":834.5,"y":462,"wires":[]},{"id":"4cb64908.6cb668","type":"function","z":"41fc4f72.a07cb","name":"get dist_url","func":"msg.payload = global.get('dist_url');\nmsg.topic = 'dist_url';\nreturn msg;","outputs":1,"noerr":0,"x":542,"y":962,"wires":[["3afe3fa3.4c127"]]},{"id":"348141e7.78166e","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dist_url","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":471.0000648498535,"y":1392.0000081062317,"wires":[["f46531e2.20887"]]},{"id":"f46531e2.20887","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/dist_url","error":false,"x":659.3930053710938,"y":1391.9643025398254,"wires":[["eaef9b95.ca4768"]]},{"id":"eaef9b95.ca4768","type":"function","z":"294ea918.69a4f6","name":"global set dist_url","func":"var dist_url = global.set('dist_url', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":919.4642944335938,"y":1390.8214192390442,"wires":[[]]},{"id":"1744644d.47bafc","type":"exec","z":"fd027482.cad878","command":"sudo timedatectl set-time ","addpay":true,"append":"","useSpawn":"","timer":"","name":"","x":585.51416015625,"y":369.5851745605469,"wires":[["238214f3.01c57c"],[],[]]},{"id":"66622972.4fd318","type":"inject","z":"fd027482.cad878","name":"","topic":"","payload":"\"2017-09-05 15:30:00\"","payloadType":"str","repeat":"","crontab":"","once":false,"x":252.51988220214844,"y":321.8863525390625,"wires":[["1744644d.47bafc"]]},{"id":"ba284b50.17b4c8","type":"vis in","z":"fd027482.cad878","language":"en","x":100.01420974731445,"y":156.82386207580566,"wires":[["ef06b78.73b5d48","fee74a5b.339428","e6b3e8e4.e59298","8dfed258.e0d85"]]},{"id":"ef06b78.73b5d48","type":"switch","z":"fd027482.cad878","name":"set topic set_date","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"set_date","vt":"str"}],"checkall":"true","outputs":1,"x":298.4586944580078,"y":154.49046325683594,"wires":[["2ca92cae.f94884"]]},{"id":"c94776dc.29b548","type":"function","z":"fd027482.cad878","name":"set set date and time","func":"var temp = ('\"' + global.get('set_date') + ' ' + global.get('set_hour') + ':' + global.get('set_minutes') + ':00\"');\nmsg.payload = temp;\nreturn msg;","outputs":1,"noerr":0,"x":917.2846069335938,"y":215.67274475097656,"wires":[["90f5a730.2278b8","1744644d.47bafc"]]},{"id":"90f5a730.2278b8","type":"debug","z":"fd027482.cad878","name":"","active":true,"console":"false","complete":"false","x":1082.5143127441406,"y":170.88350105285645,"wires":[]},{"id":"2ca92cae.f94884","type":"rbe","z":"fd027482.cad878","name":"","func":"rbe","gap":"","start":"","inout":"out","x":461.5111999511719,"y":154.2755126953125,"wires":[["c0aebe5c.15fbd"]]},{"id":"238214f3.01c57c","type":"debug","z":"fd027482.cad878","name":"","active":true,"console":"false","complete":"false","x":829.6562843322754,"y":361.15343475341797,"wires":[]},{"id":"7929a5f.4d87a5c","type":"inject","z":"fd027482.cad878","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":285.7869338989258,"y":514.877815246582,"wires":[["d0daea1c.613c88"]]},{"id":"d0daea1c.613c88","type":"exec","z":"fd027482.cad878","command":"date","addpay":false,"append":"","useSpawn":"","timer":"","name":"","x":442.2869338989258,"y":521.0056686401367,"wires":[["e536e3fa.1058f"],[],[]]},{"id":"37c26cde.14f8e4","type":"debug","z":"fd027482.cad878","name":"","active":false,"console":"false","complete":"false","x":689.7897644042969,"y":563.6107330322266,"wires":[]},{"id":"a5cb6671.ece4f8","type":"function","z":"fd027482.cad878","name":"set dateandtime","func":"var dateandtime = global.set ('dateandtime', msg.payload);\nmsg.topic = 'dateandtime';\nreturn msg;\n","outputs":"1","noerr":0,"x":650.9659385681152,"y":622.0398120880127,"wires":[["f918431f.a5078","b255480.b0cd9b8"]]},{"id":"f918431f.a5078","type":"vis in","z":"fd027482.cad878","language":"en","x":891.46875,"y":653.005615234375,"wires":[[]]},{"id":"d1936d08.acb94","type":"function","z":"fd027482.cad878","name":"date to string","func":"msg.payload = new Date().toString();\nreturn msg;","outputs":1,"noerr":0,"x":447.4687690734863,"y":625.9091339111328,"wires":[["a5cb6671.ece4f8","37c26cde.14f8e4"]]},{"id":"7bdba751.f9efc8","type":"inject","z":"fd027482.cad878","name":"","topic":"","payload":"0","payloadType":"num","repeat":"1","crontab":"","once":false,"x":256.24715423583984,"y":679.2528076171875,"wires":[["798937bc.5922d8","b4355d37.e0d0b","21457224.42928e","bda36fa4.ce9ba","d1936d08.acb94"]]},{"id":"95814c3b.2b878","type":"function","z":"f6e410f4.f25f1","name":"Input 3: 32","func":"msg.payload = msg.payload[0];\nreturn msg;","outputs":1,"noerr":0,"x":690,"y":280,"wires":[["5e18947f.634b1c","1e1ec82f.455e18"]]},{"id":"5e18947f.634b1c","type":"change","z":"f6e410f4.f25f1","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"0","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":918.2143230438232,"y":316.42857551574707,"wires":[["9a4647e3.b48c78"]]},{"id":"9a4647e3.b48c78","type":"function","z":"f6e410f4.f25f1","name":"safety","func":"global.set ('safety', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1074.4761867523193,"y":306.19054317474365,"wires":[["31318fdd.45ddb"]]},{"id":"b2c1de2.a03212","type":"inject","z":"5acbf982.b822a8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":167.0142059326172,"y":33.00568389892578,"wires":[["d3f07982.dd3278"]]},{"id":"255b6796.2f9698","type":"inject","z":"5acbf982.b822a8","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":168.3475799560547,"y":67.33904361724854,"wires":[["d3f07982.dd3278"]]},{"id":"d3f07982.dd3278","type":"function","z":"5acbf982.b822a8","name":"global set safety","func":"global.set('safety',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":375.3475561141968,"y":42.624732971191406,"wires":[[]]},{"id":"d5a523d4.5c97e","type":"inject","z":"75124cce.05e034","name":"step 1 1","topic":"step1","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":136,"y":136.77375984191895,"wires":[["15a038ef.408437"]]},{"id":"2c8debeb.760584","type":"inject","z":"75124cce.05e034","name":"step 1 0","topic":"step1","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":129.53968048095703,"y":94.69439315795898,"wires":[["15a038ef.408437"]]},{"id":"b8ef7ac7.f597e8","type":"inject","z":"75124cce.05e034","name":"step 2 0","topic":"step2","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":137.41665649414062,"y":339.9880714416504,"wires":[["8c8b01e9.2ac43"]]},{"id":"bcf5cda6.c2c33","type":"inject","z":"75124cce.05e034","name":"step 2 1","topic":"step2","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":154.98807907104492,"y":379.84521198272705,"wires":[["8c8b01e9.2ac43"]]},{"id":"261635bd.8aad8a","type":"inject","z":"75124cce.05e034","name":"step 3 0","topic":"step3","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":141.82142639160156,"y":607.0713443756104,"wires":[["58b1b90c.bc00e8"]]},{"id":"54aec02d.25885","type":"inject","z":"75124cce.05e034","name":"step 3 1","topic":"step3","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":159.39284896850586,"y":646.928484916687,"wires":[["58b1b90c.bc00e8"]]},{"id":"2cdcde13.de8182","type":"inject","z":"75124cce.05e034","name":"step 4 0","topic":"step4","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":165.92856216430664,"y":753.8569107055664,"wires":[["3a808d89.bfe0d2"]]},{"id":"8897af5b.5899d","type":"inject","z":"75124cce.05e034","name":"step 4 1","topic":"step4","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":173.49998474121094,"y":793.7140512466431,"wires":[["3a808d89.bfe0d2"]]},{"id":"83d42053.eab49","type":"inject","z":"75124cce.05e034","name":"step 5 0","topic":"step5","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":177.3571434020996,"y":1027.6068744659424,"wires":[["b43e209b.42e75"]]},{"id":"9f51db41.66ee98","type":"inject","z":"75124cce.05e034","name":"step 5 1","topic":"step5","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":194.9285659790039,"y":1067.464015007019,"wires":[["b43e209b.42e75"]]},{"id":"f082f3cb.cd7ba","type":"inject","z":"75124cce.05e034","name":"step 6 0","topic":"step6","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":174.67856216430664,"y":1169.9284572601318,"wires":[["1b41db0d.db3175"]]},{"id":"3f4669e5.079ce6","type":"inject","z":"75124cce.05e034","name":"step 6 1","topic":"step6","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":192.24998474121094,"y":1209.7855978012085,"wires":[["1b41db0d.db3175"]]},{"id":"ef49abc1.e67418","type":"switch","z":"75124cce.05e034","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"begin","vt":"str"}],"checkall":"true","outputs":1,"x":773.7778396606445,"y":74,"wires":[["7c0dcbd8.e7c4e4"]]},{"id":"d4e6a9e9.8d61c8","type":"function","z":"75124cce.05e034","name":"step 1","func":"if (global.get('phase')==1 && (global.get ('step1')==1)) {\nglobal.set ('step1',2);\nreturn msg;}\nelse return;","outputs":1,"noerr":0,"x":549.5397262573242,"y":177.20238494873047,"wires":[["ff21c0af.0955b"]]},{"id":"abe4308e.90de9","type":"inject","z":"75124cce.05e034","name":"step 1 2","topic":"step1","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":133.8253936767578,"y":175.53571605682373,"wires":[["15a038ef.408437"]]},{"id":"8e08a78f.44ea58","type":"inject","z":"75124cce.05e034","name":"step 2 2","topic":"step2","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":150.49206924438477,"y":409.8214635848999,"wires":[["8c8b01e9.2ac43"]]},{"id":"a8101f0.16bcfe","type":"inject","z":"75124cce.05e034","name":"step 3 2","topic":"step3","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":151.68255233764648,"y":682.4404726028442,"wires":[["58b1b90c.bc00e8"]]},{"id":"9fa7ffc7.5343f","type":"inject","z":"75124cce.05e034","name":"step 4 2","topic":"step4","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":171.6825408935547,"y":836.7260482311249,"wires":[["3a808d89.bfe0d2"]]},{"id":"ceaaa473.dd2f08","type":"inject","z":"75124cce.05e034","name":"step 5 2","topic":"step5","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":190.25397491455078,"y":1108.1545877456665,"wires":[["b43e209b.42e75"]]},{"id":"589db759.af6028","type":"inject","z":"75124cce.05e034","name":"step 6 2","topic":"step6","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":183.1111068725586,"y":1243.8690195083618,"wires":[["1b41db0d.db3175"]]},{"id":"1fdc1462.40dabc","type":"inject","z":"75124cce.05e034","name":"Auto Tune PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":147.00397491455078,"y":239.4881477355957,"wires":[["9e4c8976.081c88","5b22bf24.a51c8","87cd25e9.ae3ff8","2dc5ff16.def49","a17a2729.643588","4019b111.516db"]]},{"id":"15a038ef.408437","type":"function","z":"75124cce.05e034","name":"global set step1","func":"global.set('step1',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":360.34920501708984,"y":100.82143211364746,"wires":[[]]},{"id":"9e4c8976.081c88","type":"function","z":"75124cce.05e034","name":"global get step1","func":"msg.payload = global.get('step1');\nmsg.topic = 'step1';\nif(msg.payload===1){ var tune = global.set ('tune', 1);\n    global.set('gate',0);\n} else \nif(msg.payload===0){ var tune = global.set ('tune', 0);}\nreturn msg;","outputs":1,"noerr":0,"x":359.30162048339844,"y":186.72620296478271,"wires":[["d4e6a9e9.8d61c8","2f4a2da9.54ef62"]]},{"id":"ffbc8b37.fb0ec8","type":"function","z":"75124cce.05e034","name":"global set step1","func":"if (msg.payload ===0) {global.set('step1', 0 );\n    global.set('step2',0);\n    global.set('step3',0);\n    global.set('step4',0);\n    global.set('step5',0);\n    global.set('step6',0);\n    global.set('step7',0);\n    global.set('blwr', 0);\n    global.set('gate',0);\n}\nif (msg.payload ===1) {global.set('step1', 1);}\nreturn;","outputs":1,"noerr":0,"x":1144.7777786254883,"y":141.25000762939453,"wires":[[]]},{"id":"7c0dcbd8.e7c4e4","type":"change","z":"75124cce.05e034","name":"begin / cancel","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":891.9206695556641,"y":119.82143974304199,"wires":[["ffbc8b37.fb0ec8"]]},{"id":"8c8b01e9.2ac43","type":"function","z":"75124cce.05e034","name":"global set step2","func":"global.set('step2',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":379.06349182128906,"y":376.9643039703369,"wires":[[]]},{"id":"5b22bf24.a51c8","type":"function","z":"75124cce.05e034","name":"global get step2","func":"if(global.get('step1')==2) {\nmsg.payload = global.get('step2');\nmsg.topic = 'step2';\nreturn msg;}\nelse {global.set ('step2', 0); msg.topic = 'step2';\n    msg.payload = global.get('step2');\n}\nreturn msg;","outputs":1,"noerr":0,"x":380.49203872680664,"y":318.3928732872009,"wires":[["867a3d93.22a65","a15f0ee5.77faf","2f4a2da9.54ef62"]]},{"id":"867a3d93.22a65","type":"function","z":"75124cce.05e034","name":"step 2","func":"if (global.get('flt')===0 && global.get ('step2')===1 &&\n global.get('blwr')===0 ) {\nglobal.set ('ballvalve',0);\nglobal.set ('step2',2);\nreturn msg;}\nelse\nif (global.get ('step2')===1 && global.get('test_mode')===1){\nglobal.set ('step2',2);\nreturn msg;}\nelse\nif (global.get ('step2')===1 && global.get('demo_mode')===1){\nglobal.set ('step2',2);\nreturn msg;}\nelse return;","outputs":1,"noerr":0,"x":547.634880065918,"y":288.39285373687744,"wires":[["a6eae4b0.ad61a8"]]},{"id":"ff21c0af.0955b","type":"delay","z":"75124cce.05e034","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":711.9206379481725,"y":168.39286286490324,"wires":[["ba5e0b6a.28d948"]]},{"id":"ba5e0b6a.28d948","type":"function","z":"75124cce.05e034","name":"global set step1","func":"global.set('step2', 1 );\nreturn;","outputs":1,"noerr":0,"x":906.2063522338867,"y":198.39285850524902,"wires":[[]]},{"id":"5027e75.c1ebf18","type":"inject","z":"75124cce.05e034","name":"FLOAT:Off 1","topic":"flt","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":145.96826934814453,"y":478.86909198760986,"wires":[["c9e40faa.d9878"]]},{"id":"bb8f96e5.ae3848","type":"inject","z":"75124cce.05e034","name":"FLOAT:On 0","topic":"flt","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":140.1349105834961,"y":523.6786451339722,"wires":[["c9e40faa.d9878"]]},{"id":"c9e40faa.d9878","type":"function","z":"75124cce.05e034","name":"global set flt","func":"global.set('flt',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":414.2064514160156,"y":487.1666679382324,"wires":[[]]},{"id":"a6eae4b0.ad61a8","type":"delay","z":"75124cce.05e034","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":769.6349029541016,"y":287.3928813934326,"wires":[["bd7d25c3.2f88a8"]]},{"id":"bd7d25c3.2f88a8","type":"function","z":"75124cce.05e034","name":"global set step3","func":"global.set('step3', 1 );\nreturn;","outputs":1,"noerr":0,"x":1007.6349105834961,"y":355.53573513031006,"wires":[[]]},{"id":"a15f0ee5.77faf","type":"function","z":"75124cce.05e034","name":"step 2","func":"if (global.get('step2')==1 && global.get ('flt')==1 && global.get('timedout_alarm')===0)\n{global.set ('ballvalve',1);\n    return;}\nif (global.get('step2')==1 && global.get ('flt')===0) \n{global.set ('ballvalve',0);\n    return;}\nelse if (global.get('timedout_alarm')==1) {\nglobal.set ('ballvalve',0);\n    return;}\nmsg.payload=global.get('ballvalve');\nreturn msg;","outputs":1,"noerr":0,"x":581.9206161499023,"y":395.05955696105957,"wires":[[]]},{"id":"58b1b90c.bc00e8","type":"function","z":"75124cce.05e034","name":"global set step 3","func":"global.set('step3',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":403.1111297607422,"y":658.1548767089844,"wires":[[]]},{"id":"87cd25e9.ae3ff8","type":"function","z":"75124cce.05e034","name":"global get step3","func":"if(global.get('step2')==2) {\nmsg.payload = global.get('step3');\nmsg.topic = 'step3';\nreturn msg;}\nelse {global.set ('step3', 0); msg.topic = 'step3';\n    msg.payload = global.get('step3');\n}\nreturn msg;","outputs":1,"noerr":0,"x":379.3968276977539,"y":562.773871421814,"wires":[["f8c7c393.198ea","992d2f3b.89124","2f4a2da9.54ef62"]]},{"id":"f8c7c393.198ea","type":"function","z":"75124cce.05e034","name":"step 3","func":"if (global.get('blwr')===2 && global.get ('step3')===1 ) {\nglobal.set ('step3',2);\nreturn msg;\n}\nreturn ;","outputs":1,"noerr":0,"x":600.9682235717773,"y":564.8213977813721,"wires":[["961c6785.340268"]]},{"id":"961c6785.340268","type":"delay","z":"75124cce.05e034","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":778.3490905761719,"y":563.1548118591309,"wires":[["8f363019.a313a"]]},{"id":"8f363019.a313a","type":"function","z":"75124cce.05e034","name":"global set step4","func":"if(global.get('step3')===2){\nglobal.set('step4', 1 );\nreturn;}","outputs":1,"noerr":0,"x":999.7183227539062,"y":574.285795211792,"wires":[["ee448c63.3cac3"]]},{"id":"992d2f3b.89124","type":"function","z":"75124cce.05e034","name":"step 3","func":"if (global.get('step3')===1 ) {\nglobal.set ('blwr',1);\n}\nreturn;","outputs":1,"noerr":0,"x":614.0634460449219,"y":651.7262487411499,"wires":[[]]},{"id":"a17a2729.643588","type":"function","z":"75124cce.05e034","name":"global get step4","func":"if(global.get('step3')==2) {\nmsg.payload = global.get('step4');\nmsg.topic = 'step4';\nreturn msg;}\nelse {global.set ('step4', 0); msg.topic = 'step4';\n    msg.payload = global.get('step4');\n}\nreturn msg;","outputs":1,"noerr":0,"x":377.63500595092773,"y":717.440553188324,"wires":[["55e0029d.c3a11c","f4b1da11.ac3df8","2f4a2da9.54ef62","cd23403b.9bd1e"]]},{"id":"72afbdb4.53b1b4","type":"delay","z":"75124cce.05e034","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":791.8730010986328,"y":704.8691215515137,"wires":[["f4332841.be69d8"]]},{"id":"f4332841.be69d8","type":"function","z":"75124cce.05e034","name":"global set step5","func":"global.set('step5', 1 );\nreturn;","outputs":1,"noerr":0,"x":1023.1111793518066,"y":779.5834349393845,"wires":[["ee448c63.3cac3"]]},{"id":"3a808d89.bfe0d2","type":"function","z":"75124cce.05e034","name":"global set step4","func":"global.set('step4',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":425.96826553344727,"y":802.9166860580444,"wires":[[]]},{"id":"64260bf1.506f94","type":"inject","z":"75124cce.05e034","name":"setPres 2","topic":"setPres","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":166.20637130737305,"y":912.2024564743042,"wires":[["fd39c130.2a3cd"]]},{"id":"14d812ae.8f5edd","type":"inject","z":"75124cce.05e034","name":"setPres 4","topic":"setPres","payload":"7","payloadType":"num","repeat":"","crontab":"","once":false,"x":166.08730697631836,"y":963.9167442321777,"wires":[["fd39c130.2a3cd"]]},{"id":"fd39c130.2a3cd","type":"function","z":"75124cce.05e034","name":"global set setPres","func":"global.set('setPres',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":422.5396842956543,"y":897.643009185791,"wires":[[]]},{"id":"b43e209b.42e75","type":"function","z":"75124cce.05e034","name":"global set step5","func":"global.set('step5',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":410.2539863586426,"y":1083.8690299987793,"wires":[[]]},{"id":"2dc5ff16.def49","type":"function","z":"75124cce.05e034","name":"global get step5","func":"if(global.get('step4')==2) {\nmsg.payload = global.get('step5');\nmsg.topic = 'step5';\nreturn msg;}\nelse {global.set ('step5', 0); msg.topic = 'step5';\n    msg.payload = global.get('step5');\n}\nreturn msg;","outputs":1,"noerr":0,"x":427.3968620300293,"y":1001.0121514797211,"wires":[["d474ed55.1b883","8e419dd2.a2536","c89a8465.b6edf8","ee448c63.3cac3"]]},{"id":"d474ed55.1b883","type":"function","z":"75124cce.05e034","name":"step 5","func":"if (global.get('step5')===1 ) {\n    var newval1 = global.get ('PS0') - (- global.get ('setPhi'));\n    var newval2 = global.get ('PS0') - global.get ('setPlo');\n    var newval3 = global.get ('setFilt') + global.get ('setDirt');\n    global.set ('oldPhi', newval1);\n    global.set ('oldPlo', newval2); \n    global.set ('oldFilt', newval3);\n}\nreturn msg;","outputs":1,"noerr":0,"x":631.682559967041,"y":1079.7740097045898,"wires":[["f21a93bc.f2a45","b3e70270.71ba","26f7091a.b27046"]]},{"id":"dd7bf9b6.7ca7b8","type":"delay","z":"75124cce.05e034","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":785.3968544006348,"y":998.4405136108398,"wires":[["5ff060d5.46548"]]},{"id":"5ff060d5.46548","type":"function","z":"75124cce.05e034","name":"global set step6","func":"global.set('step6', 1 );\nreturn;","outputs":1,"noerr":0,"x":1094.6826934814453,"y":1000.7262954711914,"wires":[["ee448c63.3cac3"]]},{"id":"d87b18ca.7c66d8","type":"inject","z":"75124cce.05e034","name":"setFilt 0.2","topic":"setFilt","payload":".2","payloadType":"num","repeat":"","crontab":"","once":false,"x":655.9682807922363,"y":881.0119800567627,"wires":[["600a030e.1dbb9c"]]},{"id":"be4e7f8b.dbd5d","type":"inject","z":"75124cce.05e034","name":"setFilt 0.75","topic":"setFilt","payload":".75","payloadType":"num","repeat":"","crontab":"","once":false,"x":664.6587257385254,"y":928.2024068832397,"wires":[["600a030e.1dbb9c"]]},{"id":"600a030e.1dbb9c","type":"function","z":"75124cce.05e034","name":"global set setFilt","func":"global.set('setFilt',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":927.3015937805176,"y":914.785816192627,"wires":[["ee448c63.3cac3"]]},{"id":"1b41db0d.db3175","type":"function","z":"75124cce.05e034","name":"global set step6","func":"global.set('step6',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":371.6825752258301,"y":1225.2976245880127,"wires":[[]]},{"id":"4019b111.516db","type":"function","z":"75124cce.05e034","name":"global get step6","func":"if(global.get('step5')==2) {\nmsg.payload = global.get('step6');\nmsg.topic = 'step6';\nreturn msg;}\nelse {global.set ('step6', 0); msg.topic = 'step6';\n    msg.payload = global.get('step6');\n}\nreturn msg;","outputs":1,"noerr":0,"x":417.3968391418457,"y":1165.2976245880127,"wires":[["1437741c.1ef61c","c159a5e2.0f2948","ee448c63.3cac3"]]},{"id":"1437741c.1ef61c","type":"function","z":"75124cce.05e034","name":"step 6","func":"if (global.get('blwr') === 0 && global.get('step6')=== 1) {\nglobal.set ('step6',2);\nglobal.set ('begin',0);\nreturn;\n} else if(global.get('step6')==2){\n    global.set('step1', 0);\n    global.set('step7', 2);\nreturn msg;}\n","outputs":1,"noerr":0,"x":657.3967132568359,"y":1179.583324432373,"wires":[["436a08d6.0af5d8"]]},{"id":"c159a5e2.0f2948","type":"function","z":"75124cce.05e034","name":"step 6","func":"if (global.get('step6')===1 ) {\n    global.set ('alarm', 0);\n    global.set ('blwr', 3);\n    //global.set ('start_stop', 0);\n}\nreturn;","outputs":1,"noerr":0,"x":663.111083984375,"y":1261.0119190216064,"wires":[[]]},{"id":"663fd05c.5754b","type":"delay","z":"75124cce.05e034","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":977.3968544006348,"y":1239.5831909179688,"wires":[["ee448c63.3cac3"]]},{"id":"55e0029d.c3a11c","type":"function","z":"75124cce.05e034","name":"step 4","func":"if (global.get('step4')==1 ) {\nglobal.set ('setPres', global.get ('PS0'));\nmsg.payload = global.get ('setPres');\nreturn msg; }\nelse \nreturn;","outputs":1,"noerr":0,"x":630.7302360534668,"y":784.5834445953369,"wires":[[]]},{"id":"f4b1da11.ac3df8","type":"function","z":"75124cce.05e034","name":"step 4","func":"if (global.get('setPres') > 3 && global.get ('step4')==1 ) {\nglobal.set ('step4', 2 );\nreturn msg;\n} else ;\nreturn;","outputs":1,"noerr":0,"x":623.3492546081543,"y":701.2499961853027,"wires":[["72afbdb4.53b1b4"]]},{"id":"436a08d6.0af5d8","type":"rbe","z":"75124cce.05e034","name":"","func":"rbe","gap":"","start":"","inout":"out","x":811.6825180053711,"y":1212.440578699112,"wires":[["663fd05c.5754b"]]},{"id":"ef46b9cb.2436f8","type":"inject","z":"75124cce.05e034","name":"blwr 0","topic":"blwr","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1200.015869140625,"y":431.3452310562134,"wires":[["42fe3518.f2d71c"]]},{"id":"ae31720b.b6e4","type":"inject","z":"75124cce.05e034","name":"blwr 1","topic":"blwr","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1203.3492126464844,"y":474.6786050796509,"wires":[["42fe3518.f2d71c"]]},{"id":"42fe3518.f2d71c","type":"function","z":"75124cce.05e034","name":"global set blwr","func":"global.set('blwr',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1428.0159149169922,"y":502.01195430755615,"wires":[["ee448c63.3cac3"]]},{"id":"206652f7.1dfd6e","type":"inject","z":"75124cce.05e034","name":"blwr 2","topic":"blwr","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":1206.6825408935547,"y":533.0119791030884,"wires":[["42fe3518.f2d71c"]]},{"id":"f6900558.58ed78","type":"inject","z":"75124cce.05e034","name":"blwr 3","topic":"blwr","payload":"3","payloadType":"num","repeat":"","crontab":"","once":false,"x":1203.34912109375,"y":584.6785745620728,"wires":[["42fe3518.f2d71c"]]},{"id":"f21a93bc.f2a45","type":"function","z":"75124cce.05e034","name":"oldPhi","func":"msg.payload = global.get('oldPhi');\nmsg.topic = 'oldPhi';\nreturn msg;","outputs":1,"noerr":0,"x":788.230167388916,"y":1080.1706161499023,"wires":[["ee448c63.3cac3"]]},{"id":"b3e70270.71ba","type":"function","z":"75124cce.05e034","name":"oldPlo","func":"msg.payload = global.get('oldPlo');\nmsg.topic = 'oldPlo';\nreturn msg;","outputs":1,"noerr":0,"x":792.5158729553223,"y":1127.3134384155273,"wires":[["ee448c63.3cac3"]]},{"id":"26f7091a.b27046","type":"function","z":"75124cce.05e034","name":"oldFilt","func":"msg.payload = global.get('oldFilt');\nmsg.topic = 'oldFilt';\nreturn msg;","outputs":1,"noerr":0,"x":793.9444618225098,"y":1163.0277938842773,"wires":[["ee448c63.3cac3"]]},{"id":"cd23403b.9bd1e","type":"function","z":"75124cce.05e034","name":"global set setFilt","func":"if (global.get('step4')==1 ) {\n    msg.payload = Math.abs(global.get('actFilt'));\nglobal.set('setFilt',msg.payload);\nreturn msg;}\nelse \nreturn;","outputs":1,"noerr":0,"x":648.0872344970703,"y":745.0277519226074,"wires":[[]]},{"id":"87d64bbc.e38828","type":"comment","z":"75124cce.05e034","name":"step 2 test mode modification","info":"We will ignore float input and move to next step","x":652.7896881103516,"y":240.19439506530762,"wires":[]},{"id":"f3c5ed7a.7cc6f","type":"function","z":"75124cce.05e034","name":"step 3","func":"if (global.get('step3')===1 )\nreturn msg;","outputs":1,"noerr":0,"x":554.8015899658203,"y":1492.3134536743164,"wires":[["b09594be.b54f68","385dd6bf.010c0a"]]},{"id":"db88d8e0.687fa8","type":"inject","z":"75124cce.05e034","name":"1 Sec PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":192.80160522460938,"y":1412.313398361206,"wires":[["bf3793f5.72133"]]},{"id":"c25b3a6f.8367d8","type":"function","z":"75124cce.05e034","name":"step 2","func":"if (global.get('step2')===1 )\nreturn msg;","outputs":1,"noerr":0,"x":559.8015899658203,"y":1405.3134536743164,"wires":[["cd20bbd0.ba2358","7807354d.496c8c"]]},{"id":"f5d1b7e2.395058","type":"function","z":"75124cce.05e034","name":"step 1","func":"if (global.get('step1')===1 )\nreturn msg;","outputs":1,"noerr":0,"x":555.0873260498047,"y":1329.5991439819336,"wires":[["cbfa8ec.089d37"]]},{"id":"ecced56f.3cd758","type":"function","z":"75124cce.05e034","name":"step 4","func":"if (global.get('step4')===1 )\nreturn msg;","outputs":1,"noerr":0,"x":554.8015899658203,"y":1561.3134536743164,"wires":[["8e3a368c.931008","d40e6f96.2ae04"]]},{"id":"7c8616ec.90df88","type":"function","z":"75124cce.05e034","name":"step 5","func":"if (global.get('step5')===1 )\nreturn msg;","outputs":1,"noerr":0,"x":563.8015899658203,"y":1635.3134536743164,"wires":[["3104154a.5f078a","701155ef.129b1c"]]},{"id":"ad8651bf.d9f26","type":"function","z":"75124cce.05e034","name":"set step 5 timed out alarm ","func":"if (global.get('step5')===1 ) {\n    global.set ('timedout', 1);\n    global.set ('blwr', 0);\n    global.set ('start_stop', 0);\n}\nreturn;","outputs":1,"noerr":0,"x":1034.8015899658203,"y":1621.3134536743164,"wires":[[]]},{"id":"ebfa138e.fd42a","type":"function","z":"75124cce.05e034","name":"set step 4 timed out alarm ","func":"if (global.get('step4')===1 ) {\n    global.set ('timedout', 1);\n    global.set ('blwr', 0);\n    global.set ('start_stop', 0);\n}\nreturn;","outputs":1,"noerr":0,"x":1030.8015899658203,"y":1545.3134536743164,"wires":[[]]},{"id":"4ab8884.2748878","type":"function","z":"75124cce.05e034","name":"set step 3 timed out alarm ","func":"if (global.get('step3')===1 ) {\n    global.set ('timedout', 1);\n    global.set ('blwr', 0);\n    global.set ('start_stop', 0);\n}\nreturn;","outputs":1,"noerr":0,"x":1037.8015899658203,"y":1474.3134536743164,"wires":[[]]},{"id":"8bc29113.1bf82","type":"function","z":"75124cce.05e034","name":"set step 2 timed out alarm ","func":"if (global.get('step2')===1 ) {\n    global.set ('timedout', 1);\n    global.set ('blwr', 0);\n    global.set ('start_stop', 0);\n}\nreturn;","outputs":1,"noerr":0,"x":1042.8015899658203,"y":1402.3134536743164,"wires":[[]]},{"id":"40e8ee69.8bddb","type":"function","z":"75124cce.05e034","name":"set step 1 timed out alarm ","func":"if (global.get('step1')===1 ) {\n    global.set ('timedout', 1);\n    global.set ('blwr', 0);\n    global.set ('start_stop', 0);\n}\nreturn;","outputs":1,"noerr":0,"x":1043.8015899658203,"y":1332.3134536743164,"wires":[[]]},{"id":"cd20bbd0.ba2358","type":"trigger","z":"75124cce.05e034","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"30","extend":false,"units":"min","reset":"99","name":"","x":820.3015899658203,"y":1405.3134536743164,"wires":[["8bc29113.1bf82"]]},{"id":"b09594be.b54f68","type":"change","z":"75124cce.05e034","name":"reset 99","rules":[{"t":"set","p":"payload","pt":"msg","to":"99","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":669.8015899658203,"y":1444.3134536743164,"wires":[["cd20bbd0.ba2358"]]},{"id":"7807354d.496c8c","type":"change","z":"75124cce.05e034","name":"reset 99","rules":[{"t":"set","p":"payload","pt":"msg","to":"99","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":681.8015899658203,"y":1365.3134536743164,"wires":[["cbfa8ec.089d37"]]},{"id":"8e3a368c.931008","type":"change","z":"75124cce.05e034","name":"reset 99","rules":[{"t":"set","p":"payload","pt":"msg","to":"99","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":671.8015899658203,"y":1521.3134536743164,"wires":[["385dd6bf.010c0a"]]},{"id":"3104154a.5f078a","type":"change","z":"75124cce.05e034","name":"reset 99","rules":[{"t":"set","p":"payload","pt":"msg","to":"99","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":682.8015899658203,"y":1592.3134536743164,"wires":[["d40e6f96.2ae04"]]},{"id":"cbfa8ec.089d37","type":"trigger","z":"75124cce.05e034","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"20","extend":false,"units":"s","reset":"99","name":"","x":824.3015899658203,"y":1333.3134536743164,"wires":[["40e8ee69.8bddb"]]},{"id":"385dd6bf.010c0a","type":"trigger","z":"75124cce.05e034","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"100","extend":false,"units":"s","reset":"99","name":"","x":816.8015899658203,"y":1478.3134536743164,"wires":[["4ab8884.2748878"]]},{"id":"d40e6f96.2ae04","type":"trigger","z":"75124cce.05e034","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"20","extend":false,"units":"s","reset":"99","name":"","x":816.8015899658203,"y":1547.3134536743164,"wires":[["ebfa138e.fd42a"]]},{"id":"701155ef.129b1c","type":"trigger","z":"75124cce.05e034","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"20","extend":false,"units":"s","reset":"99","name":"","x":814.8015899658203,"y":1618.3134536743164,"wires":[["ad8651bf.d9f26"]]},{"id":"bf3793f5.72133","type":"function","z":"75124cce.05e034","name":"global get test or  demo mode","func":"if (global.get ('test_mode') ===1 || \nglobal.get ('demo_mode')===1) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":281.2301788330078,"y":1496.599220275879,"wires":[["3ed99617.1662ea"]]},{"id":"3ed99617.1662ea","type":"switch","z":"75124cce.05e034","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":402.32545471191406,"y":1423.1447525024414,"wires":[[],["7c8616ec.90df88","ecced56f.3cd758","f3c5ed7a.7cc6f","c25b3a6f.8367d8","f5d1b7e2.395058"]]},{"id":"c89a8465.b6edf8","type":"function","z":"75124cce.05e034","name":"if test or  demo mode","func":"if (global.get('step5')===1 && (global.get ('test_mode') ===1 || \nglobal.get ('demo_mode')===1)) {\nreturn msg;} \n\n","outputs":1,"noerr":0,"x":676.2301788330078,"y":1041.599220275879,"wires":[["6ce408ba.591718"]]},{"id":"8e419dd2.a2536","type":"function","z":"75124cce.05e034","name":"step 5","func":"if (2.0< global.get('oldPlo') < global.get ('actPres') && \nglobal.get('step5')===1 && global.get ('actPres') <global.get('oldPhi') < 9.0)  {\nglobal.set ('step5',2);\nreturn msg;\n}\nreturn ;","outputs":1,"noerr":0,"x":633.3967933654785,"y":1000.0120468139648,"wires":[["dd7bf9b6.7ca7b8"]]},{"id":"6ce408ba.591718","type":"delay","z":"75124cce.05e034","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":873.7301788330078,"y":1041.599220275879,"wires":[["5ff060d5.46548"]]},{"id":"2f4a2da9.54ef62","type":"vis in","z":"75124cce.05e034","language":"en","x":570,"y":50,"wires":[["ef49abc1.e67418"]]},{"id":"ee448c63.3cac3","type":"vis in","z":"75124cce.05e034","language":"en","x":1534.666603088379,"y":1054.0001239776611,"wires":[[]]},{"id":"6e000465.1a371c","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/safety_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":516.0000381469727,"y":133.42856454849243,"wires":[["a951f38.e26df1"]]},{"id":"a951f38.e26df1","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/safety_check","error":false,"x":728.142951965332,"y":132.14285802841187,"wires":[["b6ceb3c4.712ac"]]},{"id":"b6ceb3c4.712ac","type":"function","z":"294ea918.69a4f6","name":"global set safety_check","func":"var safety_check = global.set('safety_check', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":985.7142715454102,"y":131.00000047683716,"wires":[[]]},{"id":"fee74a5b.339428","type":"switch","z":"fd027482.cad878","name":"set topic set_hour","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"set_hour","vt":"str"}],"checkall":"true","outputs":1,"x":299,"y":194,"wires":[["7712059f.4714fc"]]},{"id":"7712059f.4714fc","type":"rbe","z":"fd027482.cad878","name":"","func":"rbe","gap":"","start":"","inout":"out","x":462.05250549316406,"y":193.78504943847656,"wires":[["917ccff3.4f4d8"]]},{"id":"e6b3e8e4.e59298","type":"switch","z":"fd027482.cad878","name":"set topic set_minutes","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"set_minutes","vt":"str"}],"checkall":"true","outputs":1,"x":295,"y":230,"wires":[["3cbb578b.451728"]]},{"id":"3cbb578b.451728","type":"rbe","z":"fd027482.cad878","name":"","func":"rbe","gap":"","start":"","inout":"out","x":461.05250549316406,"y":229.78504943847656,"wires":[["2a715b11.bfd194"]]},{"id":"c0aebe5c.15fbd","type":"function","z":"fd027482.cad878","name":"global set set_date","func":"global.set('set_date',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":636,"y":155,"wires":[["c94776dc.29b548"]]},{"id":"917ccff3.4f4d8","type":"function","z":"fd027482.cad878","name":"global set set_hour","func":"global.set('set_hour',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":636,"y":196,"wires":[["c94776dc.29b548"]]},{"id":"2a715b11.bfd194","type":"function","z":"fd027482.cad878","name":"global set set_minutes","func":"global.set('set_minutes',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":645,"y":231,"wires":[["c94776dc.29b548"]]},{"id":"798937bc.5922d8","type":"function","z":"fd027482.cad878","name":"get set_date","func":"msg.payload = global.get('set_date');\nmsg.topic = 'set_date';\nreturn msg;","outputs":1,"noerr":0,"x":647.2262573242188,"y":667.7262573242188,"wires":[["f918431f.a5078"]]},{"id":"b4355d37.e0d0b","type":"function","z":"fd027482.cad878","name":"get set_hour","func":"msg.payload = global.get('set_hour');\nmsg.topic = 'set_hour';\nreturn msg;","outputs":1,"noerr":0,"x":643,"y":707,"wires":[["f918431f.a5078"]]},{"id":"21457224.42928e","type":"function","z":"fd027482.cad878","name":"get set_minutes","func":"msg.payload = global.get('set_minutes');\nmsg.topic = 'set_minutes';\nreturn msg;","outputs":1,"noerr":0,"x":654,"y":747,"wires":[["f918431f.a5078"]]},{"id":"29ee0589.4e937a","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/desk_unit","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":466.0000343322754,"y":1060.7143120765686,"wires":[["f4c36e10.46b9b"]]},{"id":"f4c36e10.46b9b","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/desk_unit","error":false,"x":664.3929748535156,"y":1060.6786065101624,"wires":[["e71153be.a6a3a"]]},{"id":"e71153be.a6a3a","type":"function","z":"294ea918.69a4f6","name":"global set desk_unit","func":"var desk_unit = global.set('desk_unit', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":924.4642639160156,"y":1059.535723209381,"wires":[[]]},{"id":"2ac1c968.507db6","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/horn","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":465.6000442504883,"y":1011.7999882698059,"wires":[["8489f872.2f7da8"]]},{"id":"8489f872.2f7da8","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/horn","error":false,"x":643.9929847717285,"y":1011.7642827033997,"wires":[["bbbc930f.4e14b"]]},{"id":"bbbc930f.4e14b","type":"function","z":"294ea918.69a4f6","name":"global set horn","func":"var horn = global.set('horn', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":904.0642738342285,"y":1010.6213994026184,"wires":[[]]},{"id":"8dfed258.e0d85","type":"switch","z":"fd027482.cad878","name":"set topic set_timezone","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"set_timezone","vt":"str"}],"checkall":"true","outputs":1,"x":305.19993591308594,"y":118.80000686645508,"wires":[["e309dc8f.62949"]]},{"id":"e309dc8f.62949","type":"rbe","z":"fd027482.cad878","name":"","func":"rbe","gap":"","start":"","inout":"out","x":471.25244140625,"y":118.58505630493164,"wires":[["32f0dabb.5c78b6"]]},{"id":"32f0dabb.5c78b6","type":"function","z":"fd027482.cad878","name":"global set set_timezone","func":"global.set('set_timezone',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":665.1999359130859,"y":119.80000686645508,"wires":[["9a6c0677.df55b8"]]},{"id":"9a6c0677.df55b8","type":"exec","z":"fd027482.cad878","command":"sudo timedatectl set-timezone ","addpay":true,"append":"","useSpawn":"","timer":"","name":"","x":952.599983215332,"y":123.60003471374512,"wires":[["9fb1e6fa.f4a718"],[],[]]},{"id":"bda36fa4.ce9ba","type":"function","z":"fd027482.cad878","name":"get set_timezone","func":"msg.payload = global.get('set_timezone');\nmsg.topic = 'set_timezone';\nreturn msg;","outputs":1,"noerr":0,"x":666,"y":791,"wires":[["f918431f.a5078"]]},{"id":"9fb1e6fa.f4a718","type":"debug","z":"fd027482.cad878","name":"","active":true,"console":"false","complete":"false","x":1043.099998474121,"y":51.800034523010254,"wires":[]},{"id":"e536e3fa.1058f","type":"debug","z":"fd027482.cad878","name":"","active":true,"console":"false","complete":"false","x":629.8999710083008,"y":499.40002059936523,"wires":[]},{"id":"b255480.b0cd9b8","type":"debug","z":"fd027482.cad878","name":"","active":false,"console":"false","complete":"false","x":852.899938583374,"y":597.4000301361084,"wires":[]},{"id":"861644c0.7300f8","type":"inject","z":"fd027482.cad878","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":406.1000213623047,"y":455.4000015258789,"wires":[["e536e3fa.1058f"]]},{"id":"a29737b0.c2f618","type":"change","z":"294ea918.69a4f6","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/HiDuct","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":515.7999877929688,"y":88,"wires":[["ba85ec54.c203c"]]},{"id":"ba85ec54.c203c","type":"DataOut","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","path":"/HiDuct","error":false,"x":720.8000068664551,"y":89.00000381469727,"wires":[["d5792ca9.ff28b"]]},{"id":"d5792ca9.ff28b","type":"function","z":"294ea918.69a4f6","name":"global set HiDuct","func":"var HiDuct = global.set('HiDuct', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":960.7999877929688,"y":89,"wires":[[]]},{"id":"638aba2b.214a44","type":"switch","z":"5acbf982.b822a8","name":"set topic press_calibration","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"press_calibration","vt":"str"}],"checkall":"true","outputs":1,"x":440.00003814697266,"y":1240.0000591278076,"wires":[["353e932c.7b464c"]]},{"id":"353e932c.7b464c","type":"function","z":"5acbf982.b822a8","name":"press_calibration reset windup","func":"if (msg.payload === 0) {msg.payload = 99;\nreturn msg;\n}\nelse\nreturn;","outputs":1,"noerr":0,"x":991.2500915527344,"y":1241.2500553131104,"wires":[["bd63bfca.00508"]]},{"id":"2d70e66d.88163a","type":"function","z":"8b60d34d.49277","name":"global get blwr","func":"if (global.get ('blwr') <= 2 && \nglobal.get ('blwr') >0) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":446.33353424072266,"y":701.6666383743286,"wires":[["de27edcc.ea27e"]]},{"id":"fdd5a62d.69d9c8","type":"function","z":"8b60d34d.49277","name":"global get ballvalve","func":"if (global.get ('ballvalve') == 1 ) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":463.0477752685547,"y":827.1905555725098,"wires":[["26b68026.f283d"]]},{"id":"35dc8f2b.b8245","type":"inject","z":"8b60d34d.49277","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":176.7779312133789,"y":758.3333388566971,"wires":[["ec6dfd2e.a39c1"]]},{"id":"de27edcc.ea27e","type":"switch","z":"8b60d34d.49277","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":605.3335342407227,"y":700.6666383743286,"wires":[["be4f53e2.214a8"],["9a17a5e.f9d3258"]]},{"id":"67a55c7a.440524","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1299.8335571289062,"y":710.666633605957,"wires":[["d92c294.30cbed8"]]},{"id":"d1dde954.170dc8","type":"function","z":"8b60d34d.49277","name":"Reset count variables","func":"var blwrcount = global.set ('blwrcount', 0);\nvar bvcount = global.set ('bvcount', 0);\nvar cvtemp = global.set ('cvtemp', 0);\nvar cvcount = global.set ('cvcount', 0);\nvar Phicount = global.set ('Phicount', 0);\nvar Plocount = global.set ('Plocount', 0);\nvar Dirtcount = global.set ('Dirtcount', 0);\nvar Timedoutcount = global.set ('Timedoutcount', 0);\nvar hdpcount = global.set ('hdpcount', 0);\nreturn msg; \n","outputs":"1","noerr":0,"x":469.5597686767578,"y":1357.5712575912476,"wires":[["93579178.d2f27","6cd6f592.d6d57c","e0c38659.cceef8","41b9aee0.8965","7eb6d0b4.5de1c","f5439898.734de8","b2e5821a.21607","c1a04c00.4ec9"]]},{"id":"93bfb661.10eab8","type":"switch","z":"8b60d34d.49277","name":"reset counts on factreset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"factreset","vt":"str"}],"checkall":"true","outputs":1,"x":386.5240001678467,"y":1438.1428709030151,"wires":[["d1dde954.170dc8"]]},{"id":"8cd5668f.e58ff8","type":"function","z":"8b60d34d.49277","name":"global set blwrcount","func":"var temp = global.get('blwrcount') - (-1);\nvar blwrcount = global.set('blwrcount', temp);\nmsg.payload = global.get('blwrcount');\nreturn msg;","outputs":1,"noerr":0,"x":1077.119239807129,"y":709.6665878295898,"wires":[["67a55c7a.440524"]]},{"id":"487c420.38e40c","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":497.9051513671875,"y":99.95242595672607,"wires":[["d22fd930.582318"]]},{"id":"141dc2bf.e639ad","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"blwrcount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":859.6908569335938,"y":103.55958843231201,"wires":[["ac9a81bc.9ec18"]]},{"id":"3c27ff6b.c0f4b","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":496.90506744384766,"y":154.9523515701294,"wires":[["feb7ef50.06e6a"]]},{"id":"30b02de2.9ac172","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"bvcount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":856.3694229125977,"y":156.3095293045044,"wires":[["ac9a81bc.9ec18"]]},{"id":"646ce81b.9bea88","type":"function","z":"8b60d34d.49277","name":"global set bvcount","func":"var temp = global.get('bvcount') - (-1);\nvar bvcount = global.set('bvcount', temp);\nmsg.payload = global.get('bvcount');\nreturn msg;","outputs":1,"noerr":0,"x":1074.7978057861328,"y":825.6904830932617,"wires":[["b31f0eff.2062"]]},{"id":"b31f0eff.2062","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1306.5478134155273,"y":843.6904830932617,"wires":[["8a697547.df8678"]]},{"id":"502288f.4bf9478","type":"inject","z":"8b60d34d.49277","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":284.5240020751953,"y":1322.1428518295288,"wires":[["d1dde954.170dc8"]]},{"id":"93579178.d2f27","type":"function","z":"8b60d34d.49277","name":"global get blwrcount","func":"msg.payload = global.get('blwrcount');\nmsg.topic = 'blwrcount';\nreturn msg;","outputs":1,"noerr":0,"x":774.5240020751953,"y":1317.1428518295288,"wires":[["c736e415.e6bc58"]]},{"id":"6cd6f592.d6d57c","type":"function","z":"8b60d34d.49277","name":"global get bvcount","func":"msg.payload = global.get('bvcount');\nmsg.topic = 'bvcount';\nreturn msg;","outputs":1,"noerr":0,"x":766.5240859985352,"y":1369.071517944336,"wires":[["770aa2cd.bd8f8c"]]},{"id":"c736e415.e6bc58","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1056.5240173339844,"y":1311.142855644226,"wires":[["5f6f009b.2837f"]]},{"id":"770aa2cd.bd8f8c","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1042.5240783691406,"y":1365.7858047485352,"wires":[["3d4646fe.0b0a7a"]]},{"id":"2b15a752.addbe8","type":"inject","z":"8b60d34d.49277","name":"BLOWER 1","topic":"blwr","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":136.83351135253906,"y":569.6666860580444,"wires":[["3074f0f3.68ee5"]]},{"id":"3074f0f3.68ee5","type":"function","z":"8b60d34d.49277","name":"global set blwr","func":"global.set('blwr',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":472.595458984375,"y":584.8690757751465,"wires":[[]]},{"id":"37d7825a.ec907e","type":"inject","z":"8b60d34d.49277","name":"BLOWER 0","topic":"blwr","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":137.66683959960938,"y":533.9999837875366,"wires":[["3074f0f3.68ee5"]]},{"id":"352ad099.3adf4","type":"inject","z":"8b60d34d.49277","name":"BLOWER 2","topic":"blwr","payload":"2","payloadType":"num","repeat":"","crontab":"","once":false,"x":135.83351135253906,"y":606.6666860580444,"wires":[["3074f0f3.68ee5"]]},{"id":"2830dd6.6532a22","type":"inject","z":"8b60d34d.49277","name":"BLOWER 3","topic":"blwr","payload":"3","payloadType":"num","repeat":"","crontab":"","once":false,"x":135.83351135253906,"y":642.6666860580444,"wires":[["3074f0f3.68ee5"]]},{"id":"be4f53e2.214a8","type":"trigger","z":"8b60d34d.49277","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":824.3335571289062,"y":675.666633605957,"wires":[["8cd5668f.e58ff8"]]},{"id":"9a17a5e.f9d3258","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":797.8335571289062,"y":713.666633605957,"wires":[["be4f53e2.214a8"]]},{"id":"647f9dc5.7e49e4","type":"trigger","z":"8b60d34d.49277","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":830.5477981567383,"y":808.9404830932617,"wires":[["646ce81b.9bea88"]]},{"id":"762a526a.f4879c","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":804.0477981567383,"y":846.9404830932617,"wires":[["647f9dc5.7e49e4"]]},{"id":"26b68026.f283d","type":"switch","z":"8b60d34d.49277","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":626.547830581665,"y":826.4405636787415,"wires":[["647f9dc5.7e49e4"],["762a526a.f4879c"]]},{"id":"955a53d0.4ef0c","type":"inject","z":"8b60d34d.49277","name":"Ball valve 1","topic":"ballvalve","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":241.19061279296875,"y":1089.297519683838,"wires":[["3a8e8493.c2e22c"]]},{"id":"3a8e8493.c2e22c","type":"function","z":"8b60d34d.49277","name":"global set ballvalve","func":"global.set('ballvalve',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":452.3096618652344,"y":1069.1428527832031,"wires":[[]]},{"id":"a2d71406.e4e868","type":"inject","z":"8b60d34d.49277","name":"Ball valve 0","topic":"ballvalve","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":229.88105010986328,"y":1019.5237731933594,"wires":[["3a8e8493.c2e22c"]]},{"id":"5f6f009b.2837f","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/BC","x":1243.02396774292,"y":1308.2858142852783,"wires":[]},{"id":"3d4646fe.0b0a7a","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/BVC","x":1238.309669494629,"y":1369.2144622802734,"wires":[]},{"id":"d92c294.30cbed8","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/BC","x":1477.2621459960938,"y":713.5238037109375,"wires":[]},{"id":"8a697547.df8678","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/BVC","x":1486.119400024414,"y":842.5476312637329,"wires":[]},{"id":"d22fd930.582318","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/BC","error":false,"x":681.0480346679688,"y":97.66673564910889,"wires":[["141dc2bf.e639ad"]]},{"id":"feb7ef50.06e6a","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/BVC","error":false,"x":679.1908340454102,"y":153.9524278640747,"wires":[["30b02de2.9ac172"]]},{"id":"66a4d988.764968","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":554.9288024902344,"y":1843.2145204544067,"wires":[["2b1b11d4.eeb8ae"]]},{"id":"27cb057a.c2a96a","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/BVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":554.9287242889404,"y":1905.2147159576416,"wires":[["3dfac00.cb1fe4"]]},{"id":"2b1b11d4.eeb8ae","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/BC","error":false,"x":737.0717163085938,"y":1841.9288139343262,"wires":[["32993ad4.5dfbb6"]]},{"id":"3dfac00.cb1fe4","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/BVC","error":false,"x":734.2145023345947,"y":1901.214786708355,"wires":[["3495413c.212a8e"]]},{"id":"a347c864.4ab348","type":"inject","z":"8b60d34d.49277","name":"","topic":"","payload":"startup","payloadType":"str","repeat":"","crontab":"","once":true,"x":294.14307975769043,"y":1922.7862148284912,"wires":[["66a4d988.764968","27cb057a.c2a96a","414f03f2.313a5c","9ad0a11a.be44c"]]},{"id":"32993ad4.5dfbb6","type":"function","z":"8b60d34d.49277","name":"global set blwrcount","func":"var blwrcount = global.set('blwrcount', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":946.6430587768555,"y":1839.7859563827515,"wires":[[]]},{"id":"3495413c.212a8e","type":"function","z":"8b60d34d.49277","name":"global set bvcount","func":"var bvcount = global.set('bvcount', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":937.6430797576904,"y":1898.7862195968628,"wires":[[]]},{"id":"d9b8b398.2742e","type":"inject","z":"8b60d34d.49277","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":153.1668472290039,"y":130.3334608078003,"wires":[["487c420.38e40c","3c27ff6b.c0f4b","337c92b.9c6236e"]]},{"id":"11c54757.1c6349","type":"comment","z":"8b60d34d.49277","name":"Send counts to vis","info":"","x":636.6667995452881,"y":35.0000034570694,"wires":[]},{"id":"1c369642.39d99a","type":"comment","z":"8b60d34d.49277","name":"Blower start counts","info":"","x":701.5239562988281,"y":591.4762020111084,"wires":[]},{"id":"2bc63243.fc558e","type":"comment","z":"8b60d34d.49277","name":"Ball Valve start counts","info":"","x":674.6668243408203,"y":766.3333463668823,"wires":[]},{"id":"224aacec.38a3d4","type":"comment","z":"8b60d34d.49277","name":"Factory reset counts to 0","info":"","x":619.1667938232422,"y":1266.3335256576538,"wires":[]},{"id":"d08d777d.b2d1b8","type":"comment","z":"8b60d34d.49277","name":"Read counts from DB on startup","info":"","x":609.9763412475586,"y":1784.285647392273,"wires":[]},{"id":"9830d5a6.6069b8","type":"comment","z":"8b60d34d.49277","name":"Alarm counts","info":"","x":614.6906242370605,"y":2322.666899204254,"wires":[]},{"id":"337740d1.42d3b","type":"inject","z":"8b60d34d.49277","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":201.83349227905273,"y":2479.0953316688538,"wires":[["fcc1bd48.f514","ef84b9e6.3113d8","4b7723bf.46163c","c8d004ef.3a5cb8","7d43f438.1d01dc"]]},{"id":"fcc1bd48.f514","type":"function","z":"8b60d34d.49277","name":"get Phi alarm","func":"if (global.get ('permPhi') ==1 || global.get('warnPhi')==1)\n{\nmsg.payload = 1;\nreturn msg;\n} \nelse\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":453.24607849121094,"y":2383.0001282691956,"wires":[["e599f5c7.3e9218"]]},{"id":"e599f5c7.3e9218","type":"switch","z":"8b60d34d.49277","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":612.2460784912109,"y":2379.0001282691956,"wires":[["ebe84604.46eac8"],["70d7f0f4.f2aa"]]},{"id":"ebe84604.46eac8","type":"trigger","z":"8b60d34d.49277","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":806.7460784912109,"y":2371.0001282691956,"wires":[["adce3169.b2b3d"]]},{"id":"70d7f0f4.f2aa","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":798.2460784912109,"y":2420.0001282691956,"wires":[["ebe84604.46eac8"]]},{"id":"adce3169.b2b3d","type":"function","z":"8b60d34d.49277","name":"global set Phicount","func":"var temp = global.get('Phicount') - (-1);\nvar Phicount = global.set('Phicount', temp);\nmsg.payload = global.get('Phicount');\nreturn msg;","outputs":1,"noerr":0,"x":1022.2460784912109,"y":2379.0001282691956,"wires":[["95635492.89a778"]]},{"id":"95635492.89a778","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PHC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1247.246078491211,"y":2412.0001282691956,"wires":[["dc873864.ff11e8"]]},{"id":"dc873864.ff11e8","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/PHC","x":1416.6746673583984,"y":2411.8573060035706,"wires":[]},{"id":"ef84b9e6.3113d8","type":"function","z":"8b60d34d.49277","name":"get Plo alarm","func":"if (global.get ('permPlo') ==1 || global.get('warnPlo')==1)\n{\nmsg.payload = 1;\nreturn msg;\n} \nelse\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":433.11925888061523,"y":2473.381106853485,"wires":[["4ef8424e.c75a2c"]]},{"id":"4ef8424e.c75a2c","type":"switch","z":"8b60d34d.49277","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":612.1192512512207,"y":2469.3810696601868,"wires":[["280ea36a.6d425c"],["c2712992.bb4b48"]]},{"id":"280ea36a.6d425c","type":"trigger","z":"8b60d34d.49277","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":806.6192512512207,"y":2461.3810696601868,"wires":[["fb4f1035.2d412"]]},{"id":"c2712992.bb4b48","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":798.1192512512207,"y":2510.3810696601868,"wires":[["280ea36a.6d425c"]]},{"id":"fb4f1035.2d412","type":"function","z":"8b60d34d.49277","name":"global set Plocount","func":"var temp = global.get('Plocount') - (-1);\nvar Plocount = global.set('Plocount', temp);\nmsg.payload = global.get('Plocount');\nreturn msg;","outputs":1,"noerr":0,"x":1022.1192512512207,"y":2469.3810696601868,"wires":[["bd8c90ef.b3003"]]},{"id":"bd8c90ef.b3003","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PLC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1247.1192512512207,"y":2502.3810696601868,"wires":[["2956c92c.b68396"]]},{"id":"2956c92c.b68396","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/PLC","x":1416.5478401184082,"y":2502.2382473945618,"wires":[]},{"id":"4b7723bf.46163c","type":"function","z":"8b60d34d.49277","name":"get permDirt alarm","func":"if (global.get('permDirt') ==1 || global.get('warnDirt')==1)\n{\nmsg.payload = 1;\nreturn msg;\n} \nelse\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":440.54775619506836,"y":2558.523937702179,"wires":[["a05eb107.2f8f6"]]},{"id":"a05eb107.2f8f6","type":"switch","z":"8b60d34d.49277","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":610.9763679504395,"y":2555.952543735504,"wires":[["b3b47ac0.44a6e8"],["d17b6576.b1f1f8"]]},{"id":"b3b47ac0.44a6e8","type":"trigger","z":"8b60d34d.49277","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":809.7620964050293,"y":2550.809721469879,"wires":[["2c96fa5b.d84766"]]},{"id":"d17b6576.b1f1f8","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":801.2620964050293,"y":2599.809721469879,"wires":[["b3b47ac0.44a6e8"]]},{"id":"2c96fa5b.d84766","type":"function","z":"8b60d34d.49277","name":"global set Dirtcount","func":"var temp = global.get('Dirtcount') - (-1);\nvar Dirtcount = global.set('Dirtcount', temp);\nmsg.payload = global.get('Dirtcount');\nreturn msg;","outputs":1,"noerr":0,"x":1025.2620964050293,"y":2558.809721469879,"wires":[["416e5a7a.67d524"]]},{"id":"416e5a7a.67d524","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/DC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250.2620964050293,"y":2591.809721469879,"wires":[["821fab20.58b398"]]},{"id":"821fab20.58b398","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/DC","x":1419.6906852722168,"y":2591.666899204254,"wires":[]},{"id":"c8d004ef.3a5cb8","type":"function","z":"8b60d34d.49277","name":"get timedout alarm","func":"if (global.get ('timedout_alarm') ==1 || global.get('warn_timedout')==1)\n{\nmsg.payload = 1;\nreturn msg;\n} \nelse\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":431.976375579834,"y":2648.5240511894226,"wires":[["784068a0.cbacf8"]]},{"id":"784068a0.cbacf8","type":"switch","z":"8b60d34d.49277","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":608.1192359924316,"y":2650.238337993622,"wires":[["d92e9c47.563f5"],["fa57f92f.37a8c8"]]},{"id":"d92e9c47.563f5","type":"trigger","z":"8b60d34d.49277","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":802.6192359924316,"y":2642.238337993622,"wires":[["22ac8004.680ad"]]},{"id":"fa57f92f.37a8c8","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":794.1192359924316,"y":2691.238337993622,"wires":[["d92e9c47.563f5"]]},{"id":"22ac8004.680ad","type":"function","z":"8b60d34d.49277","name":"global set Timedoutcount","func":"var temp = global.get('Timedoutcount') - (-1);\nvar Timedoutcount = global.set('Timedoutcount', temp);\nmsg.payload = global.get('Timedoutcount');\nreturn msg;","outputs":1,"noerr":0,"x":1028.1192665100098,"y":2645.952552318573,"wires":[["f2b22c6b.93cd"]]},{"id":"f2b22c6b.93cd","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/TOC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1257.4050407409668,"y":2690.3811926841736,"wires":[["bb026629.d6ce28"]]},{"id":"bb026629.d6ce28","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/TOC","x":1422.547721862793,"y":2688.8099036216736,"wires":[]},{"id":"9ad0a11a.be44c","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PLC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":551.476484298706,"y":2010.0717725753784,"wires":[["c044437e.3f9e1"]]},{"id":"d30d77dc.abcbc8","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/TOC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":555.0478343963623,"y":2135.428921699524,"wires":[["aa920b7f.ce77e8"]]},{"id":"414f03f2.313a5c","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PHC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":545.2622203826904,"y":1957.0004806518555,"wires":[["d846407d.5ca1a"]]},{"id":"dafd5631.b77d18","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/DC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":556.262128829956,"y":2073.000270843506,"wires":[["4b81334f.47e93c"]]},{"id":"d846407d.5ca1a","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/PHC","error":false,"x":731.4051342010498,"y":1957.7148361206055,"wires":[["15d3cce8.790143"]]},{"id":"c044437e.3f9e1","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/PLC","error":false,"x":733.0478954315186,"y":2013.6433057785034,"wires":[["b689086.8c1aef8"]]},{"id":"aa920b7f.ce77e8","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/TOC","error":false,"x":733.0477771759033,"y":2126.857563018799,"wires":[["47264575.a8e09c"]]},{"id":"4b81334f.47e93c","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/DC","error":false,"x":735.5479068756104,"y":2069.000341594219,"wires":[["ba1e7108.e68f7"]]},{"id":"15d3cce8.790143","type":"function","z":"8b60d34d.49277","name":"global set Phicount","func":"var Phicount = global.set('Phicount', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":932.976484298706,"y":1953.5717697143555,"wires":[[]]},{"id":"b689086.8c1aef8","type":"function","z":"8b60d34d.49277","name":"global set Plocount","func":"var Plocount = global.set('Plocount',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":932.476484298706,"y":2012.0717725753784,"wires":[[]]},{"id":"47264575.a8e09c","type":"function","z":"8b60d34d.49277","name":"global set Timedoutcount","func":"var Timedoutcount = global.set('Timedoutcount',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":935.0478649139404,"y":2127.5717763900757,"wires":[[]]},{"id":"ba1e7108.e68f7","type":"function","z":"8b60d34d.49277","name":"global set Dirtcount","func":"var Dirtcount = global.set('Dirtcount', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":938.976484298706,"y":2066.571774482727,"wires":[[]]},{"id":"ff9e88f7.4de348","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PHC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050.5239906311035,"y":1423.9049263000488,"wires":[["f8f7e493.499a88"]]},{"id":"f8f7e493.499a88","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/PHC","x":1232.809772491455,"y":1428.0477666854858,"wires":[]},{"id":"ff909a13.d9a428","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PLC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1052.7543029785156,"y":1484.7859344482422,"wires":[["b684cea7.8f34a"]]},{"id":"b684cea7.8f34a","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/PLC","x":1225.0400466918945,"y":1488.9288263320923,"wires":[]},{"id":"c2b537e9.93f548","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/DC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1060.968505859375,"y":1543.714524269104,"wires":[["6c91f8c0.8c73e8"]]},{"id":"6c91f8c0.8c73e8","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/DC","x":1230.3970947265625,"y":1543.571702003479,"wires":[]},{"id":"6f3f8a2c.dd8884","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/TOC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1044.5399932861328,"y":1596.5719470977783,"wires":[["6beb9ef9.f7e61"]]},{"id":"6beb9ef9.f7e61","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/TOC","x":1224.6826705932617,"y":1597.500560760498,"wires":[]},{"id":"e0c38659.cceef8","type":"function","z":"8b60d34d.49277","name":"global get Phicount","func":"msg.payload = global.get('Phicount');\nmsg.topic = 'Phicount';\nreturn msg;","outputs":1,"noerr":0,"x":774.8096618652344,"y":1429.6193046569824,"wires":[["ff9e88f7.4de348"]]},{"id":"41b9aee0.8965","type":"function","z":"8b60d34d.49277","name":"global get Plocount","func":"msg.payload = global.get('Plocount');\nmsg.topic = 'Plocount';\nreturn msg;","outputs":1,"noerr":0,"x":771.7382621765137,"y":1485.2622756958008,"wires":[["ff909a13.d9a428"]]},{"id":"7eb6d0b4.5de1c","type":"function","z":"8b60d34d.49277","name":"global get Dirtcount","func":"msg.payload = global.get('Dirtcount');\nmsg.topic = 'Dirtcount';\nreturn msg;","outputs":1,"noerr":0,"x":766.8097496032715,"y":1534.047921180725,"wires":[["c2b537e9.93f548"]]},{"id":"f5439898.734de8","type":"function","z":"8b60d34d.49277","name":"global get Timedoutcount","func":"msg.payload = global.get('Timedoutcount');\nmsg.topic = 'Timedoutcount';\nreturn msg;","outputs":1,"noerr":0,"x":772.3097076416016,"y":1591.7621812820435,"wires":[["6f3f8a2c.dd8884"]]},{"id":"54ce7ac9.138434","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PLC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":496.8334732055664,"y":270.66666412353516,"wires":[["127ccfd2.684ed"]]},{"id":"1c9bd792.aecbe8","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/TOC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":503.4048500061035,"y":373.0237684249878,"wires":[["bf6c96ae.1920d8"]]},{"id":"337c92b.9c6236e","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/PHC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":494.6192169189453,"y":211.09522247314453,"wires":[["68eaee2f.e3dd9"]]},{"id":"7e0ca0d3.16482","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/DC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":499.6191177368164,"y":323.0951533317566,"wires":[["3b7ea64f.45cf9a"]]},{"id":"68eaee2f.e3dd9","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/PHC","error":false,"x":676.7621307373047,"y":209.80951595306396,"wires":[["861bbdbf.d5eba"]]},{"id":"127ccfd2.684ed","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/PLC","error":false,"x":676.404899597168,"y":266.23808765411377,"wires":[["2dad039f.8c82cc"]]},{"id":"bf6c96ae.1920d8","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/TOC","error":false,"x":681.4048156738281,"y":372.4524097442627,"wires":[["7d058932.e67368"]]},{"id":"3b7ea64f.45cf9a","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/DC","error":false,"x":678.9048957824707,"y":319.09522408246994,"wires":[["dfe9a08.e60b86"]]},{"id":"2dad039f.8c82cc","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Plocount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":860.1667861938477,"y":265.66666412353516,"wires":[["ac9a81bc.9ec18"]]},{"id":"7d058932.e67368","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Timedoutcount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":864.4167594909668,"y":368.7738037109375,"wires":[["ac9a81bc.9ec18"]]},{"id":"861bbdbf.d5eba","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Phicount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":856.9524765014648,"y":209.95235347747803,"wires":[["ac9a81bc.9ec18"]]},{"id":"dfe9a08.e60b86","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Dirtcount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":862.6309967041016,"y":319.7023096084595,"wires":[["ac9a81bc.9ec18"]]},{"id":"ac9a81bc.9ec18","type":"vis in","z":"8b60d34d.49277","language":"en","x":1206.7779006958008,"y":219.00000286102295,"wires":[[]]},{"id":"fa103d6d.6d456","type":"vis in","z":"8b60d34d.49277","language":"en","x":165.83339309692383,"y":1370.0001554489136,"wires":[["93bfb661.10eab8","e2ab2e17.ec7b5","8d9ce643.ba7b28","c2a38eb0.53d97","4639e4d9.e66bac"]]},{"id":"ec6dfd2e.a39c1","type":"delay","z":"8b60d34d.49277","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":269.33345794677734,"y":823.9999866485596,"wires":[["2d70e66d.88163a","fdd5a62d.69d9c8","3160f284.594e1e"]]},{"id":"3160f284.594e1e","type":"function","z":"8b60d34d.49277","name":"global get conveyor","func":"if (global.get ('conveyor') == 1 ) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":452.33348846435547,"y":972.0000667572021,"wires":[["855c14cc.644f68"]]},{"id":"5c8bc01a.41da3","type":"function","z":"8b60d34d.49277","name":"global set cvcount","func":"var temp = global.get('cvcount') - (-1);\nvar cvcount = global.set('cvcount', temp);\nmsg.payload = global.get('cvcount');\nreturn msg;","outputs":1,"noerr":0,"x":1059.0835494995117,"y":978.0000667572021,"wires":[["817e43e2.cbbe8"]]},{"id":"817e43e2.cbbe8","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1290.8335571289062,"y":996.0000667572021,"wires":[["469210a9.c5178"]]},{"id":"48316daf.d921c4","type":"trigger","z":"8b60d34d.49277","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":814.8335418701172,"y":961.2500667572021,"wires":[["5c8bc01a.41da3"]]},{"id":"63086d3c.e68b84","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":788.3335418701172,"y":999.2500667572021,"wires":[["48316daf.d921c4"]]},{"id":"855c14cc.644f68","type":"switch","z":"8b60d34d.49277","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":620.8335189819336,"y":973.7500658035278,"wires":[["48316daf.d921c4"],["63086d3c.e68b84"]]},{"id":"64bff489.596b1c","type":"inject","z":"8b60d34d.49277","name":"conveyor 1","topic":"conveyor","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":237.97637939453125,"y":1219.107084274292,"wires":[["2612cd08.15b252"]]},{"id":"2612cd08.15b252","type":"function","z":"8b60d34d.49277","name":"global set conveyor","func":"global.set('conveyor',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":459.0954284667969,"y":1198.9524173736572,"wires":[[]]},{"id":"1753d92c.e573c7","type":"inject","z":"8b60d34d.49277","name":"conveyor 0","topic":"conveyor","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":226.66681671142578,"y":1149.3333377838135,"wires":[["2612cd08.15b252"]]},{"id":"469210a9.c5178","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/CVC","x":1470.405143737793,"y":994.8572149276733,"wires":[]},{"id":"276b65e7.c15e6a","type":"comment","z":"8b60d34d.49277","name":"Conveyor start counts","info":"","x":681.4526214599609,"y":911.1430287361145,"wires":[]},{"id":"7d43f438.1d01dc","type":"function","z":"8b60d34d.49277","name":"get hiductpress alarm","func":"if (global.get ('hiductpress') === 1)\n{\nmsg.payload = 1;\nreturn msg;\n} \nelse\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":433.5000762939453,"y":2738.333439350128,"wires":[["536c15fe.0489ec"]]},{"id":"536c15fe.0489ec","type":"switch","z":"8b60d34d.49277","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":599.642936706543,"y":2740.0477261543274,"wires":[["663d7835.833f58"],["c3a172e1.07c74"]]},{"id":"c3a172e1.07c74","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":785.642936706543,"y":2781.0477261543274,"wires":[["663d7835.833f58"]]},{"id":"663d7835.833f58","type":"trigger","z":"8b60d34d.49277","op1":"1","op2":"0","op1type":"num","op2type":"str","duration":"0","extend":false,"units":"ms","reset":"reset","name":"","x":794.142936706543,"y":2732.0477261543274,"wires":[["ec3320e1.fcb3d"]]},{"id":"ec3320e1.fcb3d","type":"function","z":"8b60d34d.49277","name":"global set hdpcount","func":"var temp = global.get('hdpcount') - (-1);\nvar hiductpress = global.set('hdpcount', temp);\nmsg.payload = global.get('hdpcount');\nreturn msg;","outputs":1,"noerr":0,"x":1009.6429672241211,"y":2735.7619404792786,"wires":[["bcddedc5.281b9"]]},{"id":"bcddedc5.281b9","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/HDC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1248.9287414550781,"y":2780.190580844879,"wires":[["32c5f036.173de"]]},{"id":"32c5f036.173de","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/HDC","x":1414.0714225769043,"y":2778.619291782379,"wires":[]},{"id":"1640c46c.aa5cdc","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/HDC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":553.500280380249,"y":2192.667010307312,"wires":[["7346aadf.8af034"]]},{"id":"7346aadf.8af034","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/HDC","error":false,"x":731.50022315979,"y":2184.095651626587,"wires":[["943af973.e13cb8"]]},{"id":"943af973.e13cb8","type":"function","z":"8b60d34d.49277","name":"global set hdpcount","func":"var hdpcount = global.set('hdpcount',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":923.5003108978271,"y":2184.8098649978638,"wires":[[]]},{"id":"427b3898.3cf038","type":"inject","z":"8b60d34d.49277","name":"","topic":"","payload":"startup","payloadType":"str","repeat":"","crontab":"","once":true,"x":237.5001983642578,"y":2166.1668004989624,"wires":[["dafd5631.b77d18","d30d77dc.abcbc8","1640c46c.aa5cdc","a8971413.6986f8"]]},{"id":"b2e5821a.21607","type":"function","z":"8b60d34d.49277","name":"global get hdpcount","func":"msg.payload = global.get('hdpcount');\nmsg.topic = 'hdpcount';\nreturn msg;","outputs":1,"noerr":0,"x":771.3334808349609,"y":1657.0002689361572,"wires":[["bb168363.9c9a9"]]},{"id":"bb168363.9c9a9","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/HDC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1033.563720703125,"y":1654.3098411560059,"wires":[["469ce07f.c95ce"]]},{"id":"469ce07f.c95ce","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/HDC","x":1221.2065963745117,"y":1652.7385501861572,"wires":[]},{"id":"9459b5d4.b1c068","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/HDC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":508.8334617614746,"y":422.9999656677246,"wires":[["36b3051.5b4b3fa"]]},{"id":"36b3051.5b4b3fa","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/HDC","error":false,"x":686.8334274291992,"y":422.4286069869995,"wires":[["87ca49c6.279798"]]},{"id":"87ca49c6.279798","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"hdpcount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":866.8453502655029,"y":416.7500247955322,"wires":[["ac9a81bc.9ec18"]]},{"id":"4a64a874.4f62f8","type":"inject","z":"8b60d34d.49277","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":154.83341217041016,"y":371.99995708465576,"wires":[["54ce7ac9.138434","7e0ca0d3.16482","1c9bd792.aecbe8","9459b5d4.b1c068","6fb41779.7e62a8"]]},{"id":"c1a04c00.4ec9","type":"function","z":"8b60d34d.49277","name":"global get cvcount","func":"msg.payload = global.get('cvcount');\nmsg.topic = 'cvcount';\nreturn msg;","outputs":1,"noerr":0,"x":764.0950012207031,"y":1708.9094524383545,"wires":[["28df5f9f.4c76f"]]},{"id":"28df5f9f.4c76f","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1026.0950622558594,"y":1706.2428496479988,"wires":[["c98f36b7.d033c8"]]},{"id":"c98f36b7.d033c8","type":"DataIn","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","update":false,"path":"/CVC","x":1217.5949745178223,"y":1710.8858184814453,"wires":[]},{"id":"a8971413.6986f8","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":546.7123317718506,"y":2245.954641342163,"wires":[["9fc5c48c.3aaeb8"]]},{"id":"9fc5c48c.3aaeb8","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/CVC","error":false,"x":728.85524559021,"y":2244.6689348220825,"wires":[["71144116.8dc97"]]},{"id":"71144116.8dc97","type":"function","z":"8b60d34d.49277","name":"global set cvcount","func":"var cvcount = global.set('cvcount', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":928.4265880584717,"y":2242.526077270508,"wires":[[]]},{"id":"e2ab2e17.ec7b5","type":"switch","z":"8b60d34d.49277","name":"reset blower ","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"brreset","vt":"str"}],"checkall":"true","outputs":1,"x":272.68199157714844,"y":1482.157392024994,"wires":[["9152503e.daa6c"]]},{"id":"9152503e.daa6c","type":"function","z":"8b60d34d.49277","name":"Reset blower count","func":"var blwrcount = global.set ('blwrcount', 0);\nreturn msg; \n","outputs":"1","noerr":0,"x":459.5153579711914,"y":1482.1576843261719,"wires":[["93579178.d2f27"]]},{"id":"8d9ce643.ba7b28","type":"switch","z":"8b60d34d.49277","name":"reset ball valve","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"bvreset","vt":"str"}],"checkall":"true","outputs":1,"x":263.68199157714844,"y":1529.1573944091797,"wires":[["766ad94a.686368"]]},{"id":"766ad94a.686368","type":"function","z":"8b60d34d.49277","name":"Reset ball valve count","func":"var bvcount = global.set ('bvcount', 0);\nreturn msg; \n","outputs":"1","noerr":0,"x":464.6820068359375,"y":1526.6573944091797,"wires":[["6cd6f592.d6d57c"]]},{"id":"c2a38eb0.53d97","type":"switch","z":"8b60d34d.49277","name":"reset conveyor","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"cvreset","vt":"str"}],"checkall":"true","outputs":1,"x":234.68202209472656,"y":1631.6574954986572,"wires":[["76c0189f.6b6ea8"]]},{"id":"76c0189f.6b6ea8","type":"function","z":"8b60d34d.49277","name":"Reset conveyor count","func":"var cvcount = global.set ('cvcount', 0);\nreturn msg; \n","outputs":"1","noerr":0,"x":453.1820526123047,"y":1631.6574983596802,"wires":[["c1a04c00.4ec9"]]},{"id":"4639e4d9.e66bac","type":"switch","z":"8b60d34d.49277","name":"reset alarm counts","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"acreset","vt":"str"}],"checkall":"true","outputs":1,"x":249.1820068359375,"y":1580.1574935913086,"wires":[["784f874b.3329c8"]]},{"id":"784f874b.3329c8","type":"function","z":"8b60d34d.49277","name":"Reset alarm counts","func":"var Phicount = global.set ('Phicount', 0);\nvar Plocount = global.set ('Plocount', 0);\nvar Dirtcount = global.set ('Dirtcount', 0);\nvar Timedoutcount = global.set ('Timedoutcount', 0);\nvar hdpcount = global.set ('hdpcount', 0);\nvar acreset = global.set ('acreset', 0);\nreturn msg; \n","outputs":"1","noerr":0,"x":467.1820297241211,"y":1581.157494544983,"wires":[["b2e5821a.21607","f5439898.734de8","7eb6d0b4.5de1c","41b9aee0.8965","e0c38659.cceef8"]]},{"id":"6fb41779.7e62a8","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/CVC","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":507.1062316894531,"y":478.18738079071045,"wires":[["e90f3e61.915f5"]]},{"id":"e90f3e61.915f5","type":"DataOut","z":"8b60d34d.49277","collection":"6ab1b86.2115848","name":"","path":"/CVC","error":false,"x":686.1060981750488,"y":479.616003036499,"wires":[["e8a3451e.bb6768"]]},{"id":"e8a3451e.bb6768","type":"change","z":"8b60d34d.49277","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"cvcount","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":868.1181030273438,"y":468.9374713897705,"wires":[["ac9a81bc.9ec18"]]},{"id":"a4f3b14c.537cd","type":"inject","z":"6a08e8fc.a6fda8","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":133.33333206176758,"y":240.00002574920654,"wires":[["74421939.b4f1a8","ec531ad.e9864e8","7db6c895.eced18","530dc3b8.76b48c","da09fd6d.a5b4f","4e8cb435.789b8c","8b102b76.4bcc88","9fa2889c.fcee88","b2532afb.6e9368","cf24bfdd.e472f"]]},{"id":"74421939.b4f1a8","type":"function","z":"6a08e8fc.a6fda8","name":"get phase_check","func":"msg.payload = global.get('phase_check');\nmsg.topic = 'phase_check';\nreturn msg;","outputs":1,"noerr":0,"x":460.74602127075195,"y":201.90484142303467,"wires":[["43247a35.996024"]]},{"id":"71a4d54e.1e852c","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/phase_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":802.7460517883301,"y":201.90484142303467,"wires":[["545fd294.1ff27c"]]},{"id":"545fd294.1ff27c","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/phase_check","x":1004.1746406555176,"y":199.76201915740967,"wires":[]},{"id":"43247a35.996024","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":636.8333320617676,"y":201.90484142303467,"wires":[["71a4d54e.1e852c"]]},{"id":"5645e42c.be169c","type":"comment","z":"6a08e8fc.a6fda8","name":"Set variables to database if changed","info":"","x":586.4049186706543,"y":84.95256805419922,"wires":[]},{"id":"ec531ad.e9864e8","type":"function","z":"6a08e8fc.a6fda8","name":"get setPhi","func":"msg.payload = global.get('setPhi');\nmsg.topic = 'setPhi';\nreturn msg;","outputs":1,"noerr":0,"x":428.3333320617676,"y":247.90484142303467,"wires":[["b41513d2.cfa84"]]},{"id":"e3062d8d.50ec","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setPhi","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800.3333625793457,"y":247.90484142303467,"wires":[["7fda633c.d8beec"]]},{"id":"7fda633c.d8beec","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/setPhi","x":981.7619514465332,"y":245.76201915740967,"wires":[]},{"id":"b41513d2.cfa84","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":634.4206428527832,"y":247.90484142303467,"wires":[["e3062d8d.50ec"]]},{"id":"7db6c895.eced18","type":"function","z":"6a08e8fc.a6fda8","name":"get setPlo","func":"msg.payload = global.get('setPlo');\nmsg.topic = 'setPlo';\nreturn msg;","outputs":1,"noerr":0,"x":417.3333320617676,"y":292.90484142303467,"wires":[["6ce6007.a972e"]]},{"id":"6e6d976.f4ef168","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setPlo","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":789.3333625793457,"y":292.90484142303467,"wires":[["cc042ce.0facfd"]]},{"id":"cc042ce.0facfd","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/setPlo","x":970.7619514465332,"y":290.76201915740967,"wires":[]},{"id":"6ce6007.a972e","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":623.4206428527832,"y":292.90484142303467,"wires":[["6e6d976.f4ef168"]]},{"id":"530dc3b8.76b48c","type":"function","z":"6a08e8fc.a6fda8","name":"get setDirt","func":"msg.payload = global.get('setDirt');\nmsg.topic = 'setDirt';\nreturn msg;","outputs":1,"noerr":0,"x":415.3333320617676,"y":341.90484142303467,"wires":[["aefe7a72.438218"]]},{"id":"7b2bee64.ecd28","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setDirt","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":777.3333625793457,"y":341.90484142303467,"wires":[["68634579.1f7efc"]]},{"id":"68634579.1f7efc","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/setDirt","x":958.7619514465332,"y":339.76201915740967,"wires":[]},{"id":"aefe7a72.438218","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":611.4206428527832,"y":341.90484142303467,"wires":[["7b2bee64.ecd28"]]},{"id":"c0683ac0.9a5fc8","type":"inject","z":"6a08e8fc.a6fda8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":197.11908149719238,"y":154.9048318862915,"wires":[["71a4d54e.1e852c","e3062d8d.50ec","6e6d976.f4ef168","7b2bee64.ecd28"]]},{"id":"da09fd6d.a5b4f","type":"function","z":"6a08e8fc.a6fda8","name":"get conveyor_check","func":"msg.payload = global.get('conveyor_check');\nmsg.topic = 'conveyor_check';\nreturn msg;","outputs":1,"noerr":0,"x":431.0476264953613,"y":384.6191282272339,"wires":[["51e3c67b.98d1f8"]]},{"id":"51e3c67b.98d1f8","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":597.134937286377,"y":384.6191282272339,"wires":[["cacdb4a0.5d8848"]]},{"id":"cacdb4a0.5d8848","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/conveyor_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":763.0476570129395,"y":384.6191282272339,"wires":[["a4c03e43.49d9b"]]},{"id":"a4c03e43.49d9b","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/conveyor_check","x":974.476245880127,"y":382.4763059616089,"wires":[]},{"id":"16c3b17e.b3ef3f","type":"inject","z":"6a08e8fc.a6fda8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":436.2976188659668,"y":549.6191301345825,"wires":[["cacdb4a0.5d8848","bc495b2b.272618","3d8dfbf0.106ff4","4a193dd4.70c254"]]},{"id":"4e8cb435.789b8c","type":"function","z":"6a08e8fc.a6fda8","name":"get conveyor_control","func":"msg.payload = global.get('conveyor_control');\nmsg.topic = 'conveyor_control';\nreturn msg;","outputs":1,"noerr":0,"x":419.0476264953613,"y":425.6191282272339,"wires":[["572bc7bc.4c10c8"]]},{"id":"572bc7bc.4c10c8","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":585.134937286377,"y":425.6191282272339,"wires":[["bc495b2b.272618"]]},{"id":"bc495b2b.272618","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/conveyor_control","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":751.0476570129395,"y":425.6191282272339,"wires":[["b9ec0a8.d3a65f8"]]},{"id":"b9ec0a8.d3a65f8","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/conveyor_control","x":962.476245880127,"y":423.4763059616089,"wires":[]},{"id":"8b102b76.4bcc88","type":"function","z":"6a08e8fc.a6fda8","name":"get afterfilter_check","func":"msg.payload = global.get('afterfilter_check');\nmsg.topic = 'afterfilter_check';\nreturn msg;","outputs":1,"noerr":0,"x":414.0476264953613,"y":462.6191282272339,"wires":[["d55d6b8a.150ef8"]]},{"id":"d55d6b8a.150ef8","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":580.134937286377,"y":462.6191282272339,"wires":[["3d8dfbf0.106ff4"]]},{"id":"3d8dfbf0.106ff4","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/afterfilter_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":746.0476570129395,"y":462.6191282272339,"wires":[["953218a7.c1a9f8"]]},{"id":"953218a7.c1a9f8","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/afterfilter_check","x":957.476245880127,"y":460.4763059616089,"wires":[]},{"id":"9fa2889c.fcee88","type":"function","z":"6a08e8fc.a6fda8","name":"get ducted_check","func":"msg.payload = global.get('ducted_check');\nmsg.topic = 'ducted_check';\nreturn msg;","outputs":1,"noerr":0,"x":405.0476264953613,"y":500.6191282272339,"wires":[["ec23c78.a366138"]]},{"id":"ec23c78.a366138","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":581.134937286377,"y":500.6191282272339,"wires":[["4a193dd4.70c254"]]},{"id":"4a193dd4.70c254","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/ducted_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":747.0476570129395,"y":500.6191282272339,"wires":[["54940937.7e6798"]]},{"id":"54940937.7e6798","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/ducted_check","x":948.476245880127,"y":498.4763059616089,"wires":[]},{"id":"ee534feb.d4569","type":"inject","z":"6a08e8fc.a6fda8","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":168.0475959777832,"y":611.868839263916,"wires":[["bbc233b8.3515a","849a3b8a.5a6998","a32b4a34.995378","9a8e56b8.23a1c8","277a6e91.fd1bc2","3bd595d2.c82c4a","ad8af6c5.fd7b68","db466bde.e011d8","a8c88659.cb52d8"]]},{"id":"bbc233b8.3515a","type":"function","z":"6a08e8fc.a6fda8","name":"get on_time","func":"msg.payload = global.get('on_time');\nmsg.topic = 'on_time';\nreturn msg;","outputs":1,"noerr":0,"x":378.76189041137695,"y":593.4879417419434,"wires":[["ac44bad5.909fc8"]]},{"id":"849a3b8a.5a6998","type":"function","z":"6a08e8fc.a6fda8","name":"get off_time","func":"msg.payload = global.get('off_time');\nmsg.topic = 'off_time';\nreturn msg;","outputs":1,"noerr":0,"x":373.76189041137695,"y":630.4879417419434,"wires":[["469bb982.7aba28"]]},{"id":"a32b4a34.995378","type":"function","z":"6a08e8fc.a6fda8","name":"get post_time","func":"msg.payload = global.get('post_time');\nmsg.topic = 'post_time';\nreturn msg;","outputs":1,"noerr":0,"x":384.76189041137695,"y":668.4879417419434,"wires":[["7322a14d.9e8a6"]]},{"id":"ac44bad5.909fc8","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":574.8492012023926,"y":593.4879417419434,"wires":[["46e101b4.506a2"]]},{"id":"469bb982.7aba28","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":569.8492012023926,"y":630.4879417419434,"wires":[["c26b35da.02c3a8"]]},{"id":"7322a14d.9e8a6","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":570.8492012023926,"y":668.4879417419434,"wires":[["e0e25f2e.20e5b"]]},{"id":"46e101b4.506a2","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/on_time","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740.7619209289551,"y":593.4879417419434,"wires":[["bdca1b3e.c89518"]]},{"id":"c26b35da.02c3a8","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/off_time","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":735.7619209289551,"y":630.4879417419434,"wires":[["5147c10e.e248d"]]},{"id":"e0e25f2e.20e5b","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/post_time","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":736.7619209289551,"y":668.4879417419434,"wires":[["65670c1a.aced74"]]},{"id":"bdca1b3e.c89518","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/on_time","x":922.1905097961426,"y":591.3451194763184,"wires":[]},{"id":"5147c10e.e248d","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/off_time","x":917.1905097961426,"y":628.3451194763184,"wires":[]},{"id":"65670c1a.aced74","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/post_time","x":928.1905097961426,"y":666.3451194763184,"wires":[]},{"id":"c7e04329.4757b","type":"inject","z":"6a08e8fc.a6fda8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":199.7618751525879,"y":794.1547269821167,"wires":[["46e101b4.506a2","c26b35da.02c3a8","e0e25f2e.20e5b","fe337a6b.487278"]]},{"id":"9a8e56b8.23a1c8","type":"function","z":"6a08e8fc.a6fda8","name":"get setfspassword","func":"msg.payload = global.get('setfspassword');\nmsg.topic = 'setfspassword';\nreturn msg;","outputs":1,"noerr":0,"x":393.87431716918945,"y":707.9597816467285,"wires":[["49c1fafd.9ec874"]]},{"id":"49c1fafd.9ec874","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":569.9616279602051,"y":707.9597816467285,"wires":[["fe337a6b.487278"]]},{"id":"fe337a6b.487278","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/setfspassword","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":735.8743476867676,"y":707.9597816467285,"wires":[["5b5566c9.64db18"]]},{"id":"5b5566c9.64db18","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/setfspassword","x":937.3029365539551,"y":705.8169593811035,"wires":[]},{"id":"277a6e91.fd1bc2","type":"function","z":"6a08e8fc.a6fda8","name":"get alarmonly_check","func":"msg.payload = global.get('alarmonly_check');\nmsg.topic = 'alarmonly_check';\nreturn msg;","outputs":1,"noerr":0,"x":390.96684646606445,"y":752.0636405944824,"wires":[["272fe8d1.80fbd8"]]},{"id":"272fe8d1.80fbd8","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":557.0541572570801,"y":752.0636405944824,"wires":[["969cf568.6a27a8"]]},{"id":"969cf568.6a27a8","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/alarmonly_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":722.9668769836426,"y":752.0636405944824,"wires":[["1e978b36.2734a5"]]},{"id":"1e978b36.2734a5","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/alarmonly_check","x":934.3954658508301,"y":749.9208183288574,"wires":[]},{"id":"6d347dbc.264d44","type":"inject","z":"6a08e8fc.a6fda8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":185.96684646606445,"y":847.0636405944824,"wires":[["969cf568.6a27a8"]]},{"id":"3bd595d2.c82c4a","type":"function","z":"6a08e8fc.a6fda8","name":"get alarm_email","func":"msg.payload = global.get('alarm_email');\nmsg.topic = 'alarm_email';\nreturn msg;","outputs":1,"noerr":0,"x":377.4999885559082,"y":805.4045486450195,"wires":[["f9448255.1a624"]]},{"id":"f9448255.1a624","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":563.5872993469238,"y":805.4045486450195,"wires":[["4c7ee727.5c4938"]]},{"id":"4c7ee727.5c4938","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/alarm_email","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":729.5000190734863,"y":805.4045486450195,"wires":[["5f7bb3f1.4ff25c"]]},{"id":"5f7bb3f1.4ff25c","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/alarm_email","x":920.9286079406738,"y":803.2617263793945,"wires":[]},{"id":"ad8af6c5.fd7b68","type":"function","z":"6a08e8fc.a6fda8","name":"get unit_id","func":"msg.payload = global.get('unit_id');\nmsg.topic = 'unit_id';\nreturn msg;","outputs":1,"noerr":0,"x":375.91659927368164,"y":848.0712451934814,"wires":[["6d831e3c.8f527"]]},{"id":"6d831e3c.8f527","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":572.0039100646973,"y":848.0712451934814,"wires":[["43379f06.8a7fd"]]},{"id":"43379f06.8a7fd","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/unit_id","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":737.9166297912598,"y":848.0712451934814,"wires":[["c9703521.b89f48"]]},{"id":"c9703521.b89f48","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/unit_id","x":919.3452186584473,"y":845.9284229278564,"wires":[]},{"id":"b3ce11c6.fd204","type":"inject","z":"6a08e8fc.a6fda8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":174.5833282470703,"y":912.9045333862305,"wires":[["4c7ee727.5c4938","43379f06.8a7fd"]]},{"id":"db466bde.e011d8","type":"function","z":"6a08e8fc.a6fda8","name":"get dynFilldb","func":"msg.payload = global.get('dynFilldb');\nmsg.topic = 'dynFilldb';\nreturn msg;","outputs":1,"noerr":0,"x":381.333309173584,"y":889.1544723510742,"wires":[["d074c58b.b89768"]]},{"id":"d074c58b.b89768","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":577.4206199645996,"y":889.1544723510742,"wires":[["e24b491a.b48128"]]},{"id":"e24b491a.b48128","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dynFilldb","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":743.3333396911621,"y":889.1544723510742,"wires":[["2983f34f.04600c"]]},{"id":"2983f34f.04600c","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/dynFilldb","x":924.7619285583496,"y":887.0116500854492,"wires":[]},{"id":"1022971.ab68b69","type":"inject","z":"6a08e8fc.a6fda8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":125.83332188924123,"y":980.821215311686,"wires":[["e24b491a.b48128"]]},{"id":"a8c88659.cb52d8","type":"function","z":"6a08e8fc.a6fda8","name":"get multiunit","func":"msg.payload = global.get('multiunit');\nmsg.topic = 'multiunit';\nreturn msg;","outputs":1,"noerr":0,"x":385.666690826416,"y":930.1545820236206,"wires":[["9f1f5ff4.353e9"]]},{"id":"9f1f5ff4.353e9","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":581.7540016174316,"y":930.1545820236206,"wires":[["3e5a317b.b42ebe"]]},{"id":"3e5a317b.b42ebe","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/multiunit","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":747.6667213439941,"y":930.1545820236206,"wires":[["edb61664.5f4578"]]},{"id":"edb61664.5f4578","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/multiunit","x":929.0953102111816,"y":928.0117597579956,"wires":[]},{"id":"79965aa2.3f2704","type":"inject","z":"6a08e8fc.a6fda8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":177.30957412719727,"y":1013.2497520446777,"wires":[["3e5a317b.b42ebe"]]},{"id":"e4068fd.bd31f7","type":"inject","z":"6a08e8fc.a6fda8","name":"1 SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":219.52377319335938,"y":1168.2974605560303,"wires":[["2dd37706.a6b2b8","45fc0784.f1fca8","cdb8bf9c.6e2ec","fd57251f.3518b8","26f07d7a.1c4122","948a431e.a56bc","ad5e0fdd.69fb4","1c5203a7.f4844c","49c37049.2e446"]]},{"id":"2dd37706.a6b2b8","type":"function","z":"6a08e8fc.a6fda8","name":"get dist_name","func":"msg.payload = global.get('dist_name');\nmsg.topic = 'dist_name';\nreturn msg;","outputs":1,"noerr":0,"x":440.2380676269531,"y":1149.9165630340576,"wires":[["90f15210.15322"]]},{"id":"45fc0784.f1fca8","type":"function","z":"6a08e8fc.a6fda8","name":"get dist_address","func":"msg.payload = global.get('dist_address');\nmsg.topic = 'dist_address';\nreturn msg;","outputs":1,"noerr":0,"x":445.2380676269531,"y":1186.9165630340576,"wires":[["c3e15e02.202f5"]]},{"id":"cdb8bf9c.6e2ec","type":"function","z":"6a08e8fc.a6fda8","name":"get dist_contact","func":"msg.payload = global.get('dist_contact');\nmsg.topic = 'dist_contact';\nreturn msg;","outputs":1,"noerr":0,"x":436.2380676269531,"y":1224.9165630340576,"wires":[["13914446.13365c"]]},{"id":"90f15210.15322","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":626.3253784179688,"y":1149.9165630340576,"wires":[["836da575.c5c228"]]},{"id":"c3e15e02.202f5","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":621.3253784179688,"y":1186.9165630340576,"wires":[["801679e2.0c1448"]]},{"id":"13914446.13365c","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":622.3253784179688,"y":1224.9165630340576,"wires":[["ceddea54.9e2bc8"]]},{"id":"836da575.c5c228","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dist_name","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":792.2380981445312,"y":1149.9165630340576,"wires":[["7ef04462.75e6ec"]]},{"id":"801679e2.0c1448","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dist_address","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":787.2380981445312,"y":1186.9165630340576,"wires":[["65e8968f.866f18"]]},{"id":"ceddea54.9e2bc8","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dist_contact","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":788.2380981445312,"y":1224.9165630340576,"wires":[["396ba5b4.a323da"]]},{"id":"7ef04462.75e6ec","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/dist_name","x":983.6666870117188,"y":1147.7737407684326,"wires":[]},{"id":"65e8968f.866f18","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/dist_address","x":988.6666870117188,"y":1184.7737407684326,"wires":[]},{"id":"396ba5b4.a323da","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/dist_contact","x":979.6666870117188,"y":1222.7737407684326,"wires":[]},{"id":"ad553050.17074","type":"inject","z":"6a08e8fc.a6fda8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":186.9523468017578,"y":1287.726161956787,"wires":[["836da575.c5c228","801679e2.0c1448","ceddea54.9e2bc8","313d16af.36269a","c225dbc0.5908a8","23911aa7.21fad6"]]},{"id":"fd57251f.3518b8","type":"function","z":"6a08e8fc.a6fda8","name":"get dist_phone","func":"msg.payload = global.get('dist_phone');\nmsg.topic = 'dist_phone';\nreturn msg;","outputs":1,"noerr":0,"x":435.3504943847656,"y":1264.3884029388428,"wires":[["d2f01aed.2475a8"]]},{"id":"d2f01aed.2475a8","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":621.4378051757812,"y":1264.3884029388428,"wires":[["313d16af.36269a"]]},{"id":"313d16af.36269a","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dist_phone","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":787.3505249023438,"y":1264.3884029388428,"wires":[["91fc7255.188d8"]]},{"id":"91fc7255.188d8","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/dist_phone","x":978.7791137695312,"y":1262.2455806732178,"wires":[]},{"id":"26f07d7a.1c4122","type":"function","z":"6a08e8fc.a6fda8","name":"get dist_web","func":"msg.payload = global.get('dist_web');\nmsg.topic = 'dist_web';\nreturn msg;","outputs":1,"noerr":0,"x":412.4430236816406,"y":1308.4922618865967,"wires":[["4ab911a9.eaa19"]]},{"id":"4ab911a9.eaa19","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":608.5303344726562,"y":1308.4922618865967,"wires":[["c225dbc0.5908a8"]]},{"id":"c225dbc0.5908a8","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dist_web","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":774.4430541992188,"y":1308.4922618865967,"wires":[["469d0e1.99fc6f"]]},{"id":"469d0e1.99fc6f","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/dist_web","x":955.8716430664062,"y":1306.3494396209717,"wires":[]},{"id":"948a431e.a56bc","type":"function","z":"6a08e8fc.a6fda8","name":"get dist_email","func":"msg.payload = global.get('dist_email');\nmsg.topic = 'dist_email';\nreturn msg;","outputs":1,"noerr":0,"x":428.9761657714844,"y":1361.8331699371338,"wires":[["f2d64ab7.35e638"]]},{"id":"f2d64ab7.35e638","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":615.0634765625,"y":1361.8331699371338,"wires":[["23911aa7.21fad6"]]},{"id":"23911aa7.21fad6","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dist_email","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":780.9761962890625,"y":1361.8331699371338,"wires":[["e57f2d8f.465f1"]]},{"id":"e57f2d8f.465f1","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/dist_email","x":972.40478515625,"y":1359.6903476715088,"wires":[]},{"id":"ad5e0fdd.69fb4","type":"function","z":"6a08e8fc.a6fda8","name":"get dist_url","func":"msg.payload = global.get('dist_url');\nmsg.topic = 'dist_url';\nreturn msg;","outputs":1,"noerr":0,"x":415.6190490722656,"y":1411.5831050872803,"wires":[["d26d4e3d.dcde4"]]},{"id":"d26d4e3d.dcde4","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":600.7063598632812,"y":1416.5831699371338,"wires":[["4d6be2fe.e45f7c"]]},{"id":"4d6be2fe.e45f7c","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/dist_url","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":766.6190795898438,"y":1416.5831699371338,"wires":[["4ad153ac.514a1c"]]},{"id":"4ad153ac.514a1c","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/dist_url","x":948.0476684570312,"y":1414.4403476715088,"wires":[]},{"id":"d12319a8.847178","type":"inject","z":"6a08e8fc.a6fda8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":202.1666259765625,"y":1389.2974605560303,"wires":[["4d6be2fe.e45f7c"]]},{"id":"b2532afb.6e9368","type":"function","z":"6a08e8fc.a6fda8","name":"get safety_check","func":"msg.payload = global.get('safety_check');\nmsg.topic = 'safety_check';\nreturn msg;","outputs":1,"noerr":0,"x":474.6666450500488,"y":162.75468730926514,"wires":[["898db97f.95c788"]]},{"id":"898db97f.95c788","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":650.7539558410645,"y":162.75468730926514,"wires":[["f001fe3c.cd6fe"]]},{"id":"f001fe3c.cd6fe","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/safety_check","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":816.666675567627,"y":162.75468730926514,"wires":[["89be824c.4e63f"]]},{"id":"89be824c.4e63f","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/safety_check","x":1018.0952644348145,"y":160.61186504364014,"wires":[]},{"id":"5574ba7c.3e1b44","type":"inject","z":"6a08e8fc.a6fda8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":168.90481185913086,"y":119.18335103988647,"wires":[["f001fe3c.cd6fe"]]},{"id":"1c5203a7.f4844c","type":"function","z":"6a08e8fc.a6fda8","name":"get desk_unit","func":"msg.payload = global.get('desk_unit');\nmsg.topic = 'desk_unit';\nreturn msg;","outputs":1,"noerr":0,"x":444.28556060791016,"y":1096.678300857544,"wires":[["c7cf1607.051538"]]},{"id":"c7cf1607.051538","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":620.8014602661133,"y":1093.107011795044,"wires":[["50110dc6.1c0164"]]},{"id":"50110dc6.1c0164","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/desk_unit","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":786.7141799926758,"y":1093.107011795044,"wires":[["fe86af13.68ac1"]]},{"id":"fe86af13.68ac1","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/desk_unit","x":978.1427688598633,"y":1090.964189529419,"wires":[]},{"id":"8e346a40.15e538","type":"inject","z":"6a08e8fc.a6fda8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":220.85710906982422,"y":1127.5357503890991,"wires":[["fe86af13.68ac1"]]},{"id":"49c37049.2e446","type":"function","z":"6a08e8fc.a6fda8","name":"get horn","func":"msg.payload = global.get('horn');\nmsg.topic = 'horn';\nreturn msg;","outputs":1,"noerr":0,"x":429.59993743896484,"y":1047.0211658477783,"wires":[["b33a6beb.b1edc8"]]},{"id":"b33a6beb.b1edc8","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":626.115837097168,"y":1043.4498767852783,"wires":[["63abadd1.e836f4"]]},{"id":"63abadd1.e836f4","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/horn","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":792.0285568237305,"y":1043.4498767852783,"wires":[["d1368740.b2d568"]]},{"id":"d1368740.b2d568","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/horn","x":963.457145690918,"y":1041.3070545196533,"wires":[]},{"id":"aef23f7f.baded","type":"inject","z":"6a08e8fc.a6fda8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":243.59996795654297,"y":1080.2211170196533,"wires":[["d1368740.b2d568"]]},{"id":"cf24bfdd.e472f","type":"function","z":"6a08e8fc.a6fda8","name":"get HiDuct","func":"msg.payload = global.get('HiDuct');\nmsg.topic = 'HiDuct';\nreturn msg;","outputs":1,"noerr":0,"x":462.7142028808594,"y":124.39262580871582,"wires":[["f6921fd5.30c33"]]},{"id":"f6921fd5.30c33","type":"rbe","z":"6a08e8fc.a6fda8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":658.801513671875,"y":124.39262580871582,"wires":[["647f9589.ad2b4c"]]},{"id":"647f9589.ad2b4c","type":"change","z":"6a08e8fc.a6fda8","name":"","rules":[{"t":"set","p":"datapath","pt":"msg","to":"/HiDuct","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":824.7142333984375,"y":124.39262580871582,"wires":[["1ec45463.8adebc"]]},{"id":"1ec45463.8adebc","type":"DataIn","z":"6a08e8fc.a6fda8","collection":"5391358a.10a3ec","name":"","update":false,"path":"/HiDuct","x":1016.142822265625,"y":122.24980354309082,"wires":[]},{"id":"14bd4aba.8f8c45","type":"inject","z":"6a08e8fc.a6fda8","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":191.85711669921875,"y":74.24264812469482,"wires":[["647f9589.ad2b4c"]]},{"id":"53a09cb2.0bd104","type":"inject","z":"e0c1b2eb.002b2","name":"","topic":"factreset","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"x":126,"y":304,"wires":[["a6589010.2912f"]]},{"id":"ff6c7c74.a0ff7","type":"inject","z":"e0c1b2eb.002b2","name":"","topic":"factreset","payload":"false","payloadType":"bool","repeat":"","crontab":"","once":false,"x":132.33340454101562,"y":259.4643497467041,"wires":[["8d3750a8.57996"]]},{"id":"9f758670.c99448","type":"trigger","z":"e0c1b2eb.002b2","op1":"1","op2":"0","op1type":"nul","op2type":"pay","duration":"3","extend":false,"units":"s","reset":"","name":"delay reset","x":478.6309509277344,"y":282.76189613342285,"wires":[["8ffd76e5.e8cb98"]]},{"id":"a6589010.2912f","type":"switch","z":"e0c1b2eb.002b2","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"factreset","vt":"str"}],"checkall":"true","outputs":1,"x":495.2024230957031,"y":210.65471839904785,"wires":[["9f758670.c99448","8d3750a8.57996"]]},{"id":"8ffd76e5.e8cb98","type":"change","z":"e0c1b2eb.002b2","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":275.3094787597656,"y":216.2738037109375,"wires":[["ff963baa.f160a8"]]},{"id":"ff963baa.f160a8","type":"function","z":"e0c1b2eb.002b2","name":"flip flop","func":"var newmsg = msg.payload;\nif (newmsg === 0 ) {\n   msg.payload = 1 ;\n}   \nif (newmsg== 1 ) {\n    msg.payload = 0 ;\n}\nreturn msg;","outputs":1,"noerr":0,"x":267.952392578125,"y":157.98809242248535,"wires":[["8d3750a8.57996"]]},{"id":"a3073ba2.347218","type":"comment","z":"e0c1b2eb.002b2","name":"Factory Reset Button Reset","info":"","x":453.08335876464844,"y":58.42856168746948,"wires":[]},{"id":"54087c1b.10efd4","type":"inject","z":"e0c1b2eb.002b2","name":"Inject reset","topic":"reset","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":731.3333435058594,"y":78.17855834960938,"wires":[["a00c21e4.42452"]]},{"id":"a00c21e4.42452","type":"trigger","z":"e0c1b2eb.002b2","op1":"","op2":"","op1type":"pay","op2type":"pay","duration":"3","extend":false,"units":"s","reset":"","name":"initialization","x":1019.5595397949219,"y":131.08334350585938,"wires":[["e12dc3f0.18d6b","475741f0.2d673","78a3891.adec378","a7de4fd6.74ee"]]},{"id":"28765fd4.1cabe","type":"change","z":"e0c1b2eb.002b2","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":810.7499694824219,"y":132.51187133789062,"wires":[["a00c21e4.42452"]]},{"id":"5bd4976.0680568","type":"switch","z":"e0c1b2eb.002b2","name":"factreset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"factreset","vt":"str"}],"checkall":"true","outputs":1,"x":629.3689880371094,"y":129.55950927734375,"wires":[["28765fd4.1cabe"]]},{"id":"e12dc3f0.18d6b","type":"function","z":"e0c1b2eb.002b2","name":"SET CALL VARIABLES 2","func":"var oldFilt = global.set ('oldFilt', 2.5);\nvar oldPhi = global.set ('oldPhi', 7.5);\nvar oldPlo = global.set ('oldPlo', 3.5);\nvar on_time = global.set ('on_time', 8);\nvar off_time = global.set ('off_time', 8);\nvar permDirt = global.set ('permDirt', 0);\nvar permPhi = global.set ('permPhi', 0);\nvar permPlo = global.set ('permPlo', 0);\nvar phase = global.set ('phase', 1);\nvar phase_check = global.set ('phase_check', 1);\nvar Phicount = global.set ('Phicount', 0);\nvar Plocount = global.set ('Plocount', 0);\nvar post_time = global.set ('post_time', 30);\nvar safety_check = global.set ('safety_check', 0);\nvar setDirt = global.set ('setDirt', 1.25);\nvar setFilt = global.set ('setFilt', 1.25);\nvar setPhi = global.set ('setPhi', 1.5);\nvar setPlo = global.set ('setPlo', 0.75);\nvar setPres = global.set ('setPres', 5.5);\nvar setfspassword = global.set ('setfspassword', '1234');\nvar dist_name = global.set ('dist_name','Distributor');\nvar dist_address = global.set ('dist_address','Address');\nvar dist_contact = global.set ('dist_contact','Contact');\nvar dist_phone = global.set ('dist_phone','Phone');\nvar dist_web = global.set ('dist_web','Website');\nvar dist_email = global.set ('dist_email','Email');\nvar dist_url = global.set('dist_url', 'http://www.filter-1.com/images/499.png');\nreturn msg;\n\n","outputs":"1","noerr":0,"x":991.7977066040039,"y":238.89265155792236,"wires":[[]]},{"id":"3b10d9d0.7bd846","type":"switch","z":"e0c1b2eb.002b2","name":"factreset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"factreset","vt":"str"}],"checkall":"true","outputs":1,"x":678.8451843261719,"y":183.60696411132812,"wires":[["e12dc3f0.18d6b","475741f0.2d673","78a3891.adec378","a7de4fd6.74ee"]]},{"id":"8d3750a8.57996","type":"vis in","z":"e0c1b2eb.002b2","language":"en","x":452.3333435058594,"y":166.03569984436035,"wires":[["3b10d9d0.7bd846","5bd4976.0680568","a6589010.2912f"]]},{"id":"475741f0.2d673","type":"function","z":"e0c1b2eb.002b2","name":"SET CALL VARIABLES 1","func":"var actFilt = global.set ('actFilt', 0);\nvar actPres = global.set ('actPres', 0);\nvar acreset = global.set ('acreset', 0);\nvar afterfilter_check = global.set('afterfilter_check',0);\nvar alarm = global.set ('alarm', 0);\nvar alarmonly_check = global.set ('alarmonly_check', 0);\nvar ballchk = global.set ('ballchk', 0);\nvar ballvalve = global.set ('ballvalve', 0);\nvar begin = global.set ('begin', 0);\nvar blwr = global.set ('blwr', 0);\nvar brreset = global.set ('brreset', 0);\nvar bvreset = global.set ('bvreset', 0);\nvar conveyor = global.set ('conveyor', 0);\nvar coveyor_check = global.set ('conveyor_check',0);\nvar cvcount =global.set ('cvcount', 0);\nvar cvreset = global.set ('cvreset', 0);\nvar demo_mode = global.set ('demo_mode',0);\nvar Dirtcount = global.set ('Dirtcount', 0);\nvar dynFill = global.set ('dynFill', 0);\nvar ductPres = global.set ('duct_Pres', 0);\nvar ducted_check = global.set ('ducted_check', 0);\nvar filterlife = global.set ('filterlife', 0);\nvar flt = global.set ('flt', 0);\nvar gate = global.set ('gate', 0);\nvar hiductpress = global.set ('hiductpress', 0);\nvar man_control = global.set ('man_control', 0);\nvar safety = global.set('safety',0);\nreturn msg;\n\n","outputs":"1","noerr":0,"x":991.8333969116211,"y":199.89290523529053,"wires":[[]]},{"id":"78a3891.adec378","type":"function","z":"e0c1b2eb.002b2","name":"SET CALL VARIABLES 3","func":"var speed = global.set ('speed', 0);\nvar start_stop = global.set ('start_stop',0);\nvar step1 = global.set ('step1' , 0);\nvar step2 = global.set ('step2' , 0);\nvar step3 = global.set ('step3' , 0);\nvar step4 = global.set ('step4' , 0);\nvar step5 = global.set ('step5' , 0);\nvar step6 = global.set ('step6' , 0);\nvar step7 = global.set ('step7' , 0);\nvar table = global.set ('table' , 0);\nvar test_mode = global.set ('test_mode', 0);\nvar timedout = global.set ('timedout', 0);\nvar timedout_alarm = global.set ('timedout_alarm', 0);\nvar Timedoutcount = global.set ('Timedoutcount', 0);\nvar tune = global.set ('tune', 0);\nvar manfill = global.set('manfill', 0);\nvar conveyor_control = global.set('conveyor_control', 0);\nvar warnPhi = global.set('warnPhi', 0);\nvar warnPlo = global.set('warnPlo', 0);\nvar warnDirt = global.set('warnDirt', 0);\nvar warn_timedout = global.set('warn_timedout', 0);\nvar reset = global.set ('reset', 0);\nvar rsrtest = global.set ('rsrtest', 0);\nvar laststartup = global.set ('laststartup',0);\nvar realfiltpress = global.set ('realfiltpress',0);\nvar realscrubpress = global.set ('realscrubpress',0);\nvar realductpress = global.set ('realductpress',0);\nvar alarm_email = global.set ('alarm_email', 'default');\nvar unit_id = global.set ('unit_id', '1234');\nvar dynFilldb = global.set ('dynFilldb', 0.25);\nvar multiunit = global.set ('multiunit', 0);\nreturn msg;\n\n","outputs":"1","noerr":0,"x":993.6904602050781,"y":278.89286041259766,"wires":[[]]},{"id":"5446786.ebc7888","type":"exec","z":"e0c1b2eb.002b2","command":"sudo reboot #","addpay":false,"append":"","useSpawn":"","name":"System Reboot","x":1060.8333129882812,"y":380.75003814697266,"wires":[[],[],[]]},{"id":"d1037651.e672c8","type":"delay","z":"e0c1b2eb.002b2","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":892.1905288696289,"y":378.6071443557739,"wires":[["5446786.ebc7888"]]},{"id":"a7de4fd6.74ee","type":"function","z":"e0c1b2eb.002b2","name":"SET CALL VARIABLES 4","func":"var set_date = global.set ('set_date', 0);\nvar set_hour = global.set ('set_hour', 0);\nvar set_minutes = global.set ('set_minutes', 0);\nvar set_timezone = global.set ('set_timezone', 'America/Chicago');\nvar dateandtime = global.set ('dateandtime', 0);\nvar desk_unit = global.set ('desk_unit', 1);\nvar HiDuct = global.set ('HiDuct', 4);\n\nreturn msg;\n\n","outputs":"1","noerr":0,"x":991.928581237793,"y":319.9404716491699,"wires":[["d1037651.e672c8"]]},{"id":"2cdfaa21.d7abf6","type":"vis in","z":"e0c1b2eb.002b2","language":"en","x":94,"y":684.7236337661743,"wires":[["6ae1dd3f.d1c334","d59b6ebc.3a62f","c3331255.f7ef","15a07b75.1f7f05","9696ce82.f11de","84df3c31.798ca","732f56f1.f43678","cac64c45.2c872","32d975d9.8b6f7a","e6e8429c.e2cb4","7b703c3.1ab46c4","d9bde981.f70cb8","48a012cb.0cd0bc","d86f765f.d79038","3c4331a1.ad458e","2dad1208.31448e","b14462e.347afa","2317228b.487f6e"]]},{"id":"38e91967.db8ab6","type":"change","z":"e0c1b2eb.002b2","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":704.3928604125977,"y":715.9738292694092,"wires":[["de19b26e.2b38e"]]},{"id":"6ae1dd3f.d1c334","type":"switch","z":"e0c1b2eb.002b2","name":"set topic phase_check","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"phase_check","vt":"str"}],"checkall":"true","outputs":1,"x":476.51170349121094,"y":715.9856843948364,"wires":[["38e91967.db8ab6"]]},{"id":"de19b26e.2b38e","type":"function","z":"e0c1b2eb.002b2","name":"global set phase_check","func":"global.set('phase_check',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":926.2264785766602,"y":716.3900890350342,"wires":[["cd346501.9d2cb8"]]},{"id":"d59b6ebc.3a62f","type":"switch","z":"e0c1b2eb.002b2","name":"set topic conveyor_check","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"conveyor_check","vt":"str"}],"checkall":"true","outputs":1,"x":478.06728744506836,"y":752.8745059967041,"wires":[["9b7bc82c.36d0b8"]]},{"id":"9b7bc82c.36d0b8","type":"change","z":"e0c1b2eb.002b2","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":706.3928718566895,"y":752.8627605438232,"wires":[["81237d73.0ddb1"]]},{"id":"81237d73.0ddb1","type":"function","z":"e0c1b2eb.002b2","name":"global set conveyor_check","func":"global.set('conveyor_check',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":938.2264671325684,"y":752.5011873245239,"wires":[[]]},{"id":"c3331255.f7ef","type":"switch","z":"e0c1b2eb.002b2","name":"set topic fspassword","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"fspassword","vt":"str"}],"checkall":"true","outputs":1,"x":456.4444808959961,"y":791.9457216262817,"wires":[["6d99129f.eeae6c"]]},{"id":"6d99129f.eeae6c","type":"function","z":"e0c1b2eb.002b2","name":"global set fspassword","func":"global.set('fspassword',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":918.3815002441406,"y":791.1277418136597,"wires":[[]]},{"id":"15a07b75.1f7f05","type":"switch","z":"e0c1b2eb.002b2","name":"set topic ducted_check","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"ducted_check","vt":"str"}],"checkall":"true","outputs":1,"x":458.22229766845703,"y":865.9457511901855,"wires":[["8217b5fa.3f2d58"]]},{"id":"8217b5fa.3f2d58","type":"change","z":"e0c1b2eb.002b2","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":687.6589851379395,"y":867.0451984405518,"wires":[["59fb7e24.e5efc"]]},{"id":"59fb7e24.e5efc","type":"function","z":"e0c1b2eb.002b2","name":"global set ducted_check","func":"global.set('ducted_check',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":919.2703857421875,"y":868.2392578125,"wires":[[]]},{"id":"9696ce82.f11de","type":"switch","z":"e0c1b2eb.002b2","name":"set topic afterfilter_check","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"afterfilter_check","vt":"str"}],"checkall":"true","outputs":1,"x":455.0000457763672,"y":906.2792222499847,"wires":[["c62abd0f.3cfcb"]]},{"id":"c62abd0f.3cfcb","type":"change","z":"e0c1b2eb.002b2","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":679.992317199707,"y":909.7120022773743,"wires":[["a27ba517.b99928"]]},{"id":"a27ba517.b99928","type":"function","z":"e0c1b2eb.002b2","name":"global set afterfilter_check","func":"global.set('afterfilter_check',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":924.0482177734375,"y":909.46142578125,"wires":[[]]},{"id":"84df3c31.798ca","type":"switch","z":"e0c1b2eb.002b2","name":"set topic on_time","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"on_time","vt":"str"}],"checkall":"true","outputs":1,"x":434.44449615478516,"y":943.3902816772461,"wires":[["8f9206a5.2cb598"]]},{"id":"8f9206a5.2cb598","type":"function","z":"e0c1b2eb.002b2","name":"global set on_time","func":"global.set('on_time',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":901.2703857421875,"y":943.572509765625,"wires":[[]]},{"id":"732f56f1.f43678","type":"switch","z":"e0c1b2eb.002b2","name":"set topic off_time","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"off_time","vt":"str"}],"checkall":"true","outputs":1,"x":436.88891983032227,"y":979.6124773025513,"wires":[["7af3dedb.0c0ba"]]},{"id":"7af3dedb.0c0ba","type":"function","z":"e0c1b2eb.002b2","name":"global set off_time","func":"global.set('off_time',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":898.1593017578125,"y":977.68359375,"wires":[[]]},{"id":"cac64c45.2c872","type":"switch","z":"e0c1b2eb.002b2","name":"set topic post_time","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"post_time","vt":"str"}],"checkall":"true","outputs":1,"x":434.0000762939453,"y":1013.501314163208,"wires":[["c9e62ae5.1e1078"]]},{"id":"c9e62ae5.1e1078","type":"function","z":"e0c1b2eb.002b2","name":"global set post_time","func":"global.set('post_time',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":907.49267578125,"y":1011.572509765625,"wires":[[]]},{"id":"32d975d9.8b6f7a","type":"switch","z":"e0c1b2eb.002b2","name":"set topic setfspassword","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"setfspassword","vt":"str"}],"checkall":"true","outputs":1,"x":462.63489532470703,"y":827.7034540176392,"wires":[["25f25282.41e01e"]]},{"id":"25f25282.41e01e","type":"function","z":"e0c1b2eb.002b2","name":"global set setfspassword","func":"global.set('setfspassword',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":937.572021484375,"y":832.1076049804688,"wires":[[]]},{"id":"e6e8429c.e2cb4","type":"switch","z":"e0c1b2eb.002b2","name":"set topic alarmonly_check","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"alarmonly_check","vt":"str"}],"checkall":"true","outputs":1,"x":459.9112854003906,"y":1046.9345293045044,"wires":[["88ab158f.aa8588"]]},{"id":"88ab158f.aa8588","type":"change","z":"e0c1b2eb.002b2","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":682.6813354492188,"y":1046.9227294921875,"wires":[["6ed5ac61.7480c4"]]},{"id":"6ed5ac61.7480c4","type":"function","z":"e0c1b2eb.002b2","name":"global set alarmonly_check","func":"global.set('alarmonly_check',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":921.181640625,"y":1046.005859375,"wires":[[]]},{"id":"7b703c3.1ab46c4","type":"switch","z":"e0c1b2eb.002b2","name":"set topic setPhi","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"setPhi","vt":"str"}],"checkall":"true","outputs":1,"x":427.08404541015625,"y":1081.098876953125,"wires":[["a03c5ddc.cfcd5"]]},{"id":"d9bde981.f70cb8","type":"switch","z":"e0c1b2eb.002b2","name":"set topic setPlo","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"setPlo","vt":"str"}],"checkall":"true","outputs":1,"x":431.08404541015625,"y":1114.098876953125,"wires":[["455ed309.85b7dc"]]},{"id":"a03c5ddc.cfcd5","type":"function","z":"e0c1b2eb.002b2","name":"global set setPhi","func":"global.set('setPhi',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":912.798828125,"y":1078.50341796875,"wires":[[]]},{"id":"455ed309.85b7dc","type":"function","z":"e0c1b2eb.002b2","name":"global set setPlo","func":"global.set('setPlo',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":916.798828125,"y":1111.50341796875,"wires":[[]]},{"id":"48a012cb.0cd0bc","type":"switch","z":"e0c1b2eb.002b2","name":"set topic setDirt","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"setDirt","vt":"str"}],"checkall":"true","outputs":1,"x":430.72222900390625,"y":1147.50146484375,"wires":[["33b628a8.a44c58"]]},{"id":"33b628a8.a44c58","type":"function","z":"e0c1b2eb.002b2","name":"global set setDirt","func":"global.set('setDirt',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":916.43701171875,"y":1144.906005859375,"wires":[[]]},{"id":"d86f765f.d79038","type":"switch","z":"e0c1b2eb.002b2","name":"set topic dynFilldb","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"dynFilldb","vt":"str"}],"checkall":"true","outputs":1,"x":446.1666793823242,"y":1184.1999425888062,"wires":[["6d0c7b6.9023084"]]},{"id":"6d0c7b6.9023084","type":"function","z":"e0c1b2eb.002b2","name":"global set dynFilldb","func":"global.set('dynFilldb',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":921.881462097168,"y":1181.6044836044312,"wires":[[]]},{"id":"3c4331a1.ad458e","type":"switch","z":"e0c1b2eb.002b2","name":"set topic multiunit","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"multiunit","vt":"str"}],"checkall":"true","outputs":1,"x":448.1666793823242,"y":1220.1999425888062,"wires":[["6b480a98.bde544"]]},{"id":"6b480a98.bde544","type":"function","z":"e0c1b2eb.002b2","name":"global set multiunit","func":"global.set('multiunit',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":923.881462097168,"y":1217.6044836044312,"wires":[[]]},{"id":"2dad1208.31448e","type":"switch","z":"e0c1b2eb.002b2","name":"set topic safety_check","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"safety_check","vt":"str"}],"checkall":"true","outputs":1,"x":480.8333053588867,"y":677.1998147964478,"wires":[["2ee830e5.c2904"]]},{"id":"2ee830e5.c2904","type":"change","z":"e0c1b2eb.002b2","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":714.7144584655762,"y":677.1879739761353,"wires":[["14b659d8.422886"]]},{"id":"14b659d8.422886","type":"function","z":"e0c1b2eb.002b2","name":"global set safety_check","func":"global.set('safety_check',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":936.5480766296387,"y":677.6042337417603,"wires":[[]]},{"id":"c73c87cc.a4fde8","type":"comment","z":"e0c1b2eb.002b2","name":"Factory Setup settings from VIS","info":"","x":627.8595886230469,"y":573.7143039703369,"wires":[]},{"id":"b14462e.347afa","type":"switch","z":"e0c1b2eb.002b2","name":"set topic HiDuct","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"HiDuct","vt":"str"}],"checkall":"true","outputs":1,"x":438.56666564941406,"y":1254.3998832702637,"wires":[["e5842cc8.6f32c"]]},{"id":"e5842cc8.6f32c","type":"function","z":"e0c1b2eb.002b2","name":"global set HiDuct","func":"global.set('HiDuct',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":924.2814483642578,"y":1251.8044242858887,"wires":[[]]},{"id":"2317228b.487f6e","type":"switch","z":"e0c1b2eb.002b2","name":"set topic desk_unit","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"desk_unit","vt":"str"}],"checkall":"true","outputs":1,"x":456,"y":1289,"wires":[["e50db150.f9e6b"]]},{"id":"e50db150.f9e6b","type":"change","z":"e0c1b2eb.002b2","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":698.7700500488281,"y":1288.988200187683,"wires":[["7cfd5b81.fc8194"]]},{"id":"7cfd5b81.fc8194","type":"function","z":"e0c1b2eb.002b2","name":"global set desk_unit","func":"global.set('desk_unit',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":917.2703552246094,"y":1288.0713300704956,"wires":[[]]},{"id":"116f6ab0.cd98e5","type":"inject","z":"e0c1b2eb.002b2","name":"ONCE A SEC","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":199.99998474121094,"y":1522.4000434875488,"wires":[["4baa9e58.b33a3","30e4732f.8a06bc","45ff3eb.80e3bc","6965de33.6e1b7","46ab61d0.a315"]]},{"id":"30e4732f.8a06bc","type":"function","z":"e0c1b2eb.002b2","name":"get desk_unit","func":"msg.payload = global.get('desk_unit');\nmsg.topic = 'desk_unit';\nreturn msg;","outputs":1,"noerr":0,"x":428.69044494628906,"y":1482.9727945327759,"wires":[["e3752867.a82fe8"]]},{"id":"4baa9e58.b33a3","type":"function","z":"e0c1b2eb.002b2","name":"global get alarmonly_check","func":"msg.payload = global.get('alarmonly_check');\nmsg.topic = 'alarmonly_check';\nreturn msg;","outputs":1,"noerr":0,"x":471.41027069091797,"y":1444.2671327590942,"wires":[["e3752867.a82fe8"]]},{"id":"e3752867.a82fe8","type":"vis in","z":"e0c1b2eb.002b2","language":"en","x":617.6784420013428,"y":1544.7224073410034,"wires":[[]]},{"id":"45a962a1.0fb36c","type":"inject","z":"e0c1b2eb.002b2","name":"ONCE A SEC","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":712.0000076293945,"y":1642.400092124939,"wires":[["926fc8a6.eccc78","4c99a0e3.88b36","d6fb7158.4fff2","51537297.79d82c","d7aba741.670a68","e9c0af36.f7cf8","a164b2d7.4ad93","2afe829d.c30ede","372dc55e.5e780a"]]},{"id":"b2c7f75c.175488","type":"vis in","z":"e0c1b2eb.002b2","language":"en","x":1263.2500648498535,"y":1477.578411102295,"wires":[[]]},{"id":"926fc8a6.eccc78","type":"function","z":"e0c1b2eb.002b2","name":"get afterfilter_check","func":"msg.payload = global.get('afterfilter_check');\nmsg.topic = 'afterfilter_check';\nreturn msg;","outputs":1,"noerr":0,"x":964.75,"y":1446.14990234375,"wires":[["b2c7f75c.175488"]]},{"id":"4c99a0e3.88b36","type":"function","z":"e0c1b2eb.002b2","name":"get on_time","func":"msg.payload = global.get('on_time');\nmsg.topic = 'on_time';\nreturn msg;","outputs":1,"noerr":0,"x":950.75,"y":1486.14990234375,"wires":[["b2c7f75c.175488"]]},{"id":"d6fb7158.4fff2","type":"function","z":"e0c1b2eb.002b2","name":"get off_time","func":"msg.payload = global.get('off_time');\nmsg.topic = 'off_time';\nreturn msg;","outputs":1,"noerr":0,"x":955.25,"y":1523.14990234375,"wires":[["b2c7f75c.175488"]]},{"id":"51537297.79d82c","type":"function","z":"e0c1b2eb.002b2","name":"get post_time","func":"msg.payload = global.get('post_time');\nmsg.topic = 'post_time';\nreturn msg;","outputs":1,"noerr":0,"x":954.75,"y":1558.64990234375,"wires":[["b2c7f75c.175488"]]},{"id":"d7aba741.670a68","type":"function","z":"e0c1b2eb.002b2","name":"global get fspasstrue","func":"msg.payload = global.get('fspasstrue');\nmsg.topic = 'fspasstrue';\nreturn msg;","outputs":1,"noerr":0,"x":959,"y":1592.98291015625,"wires":[["b2c7f75c.175488"]]},{"id":"e9c0af36.f7cf8","type":"function","z":"e0c1b2eb.002b2","name":"global get fspassword","func":"msg.payload = global.get('fspassword');\nmsg.topic = 'fspassword';\nreturn msg;","outputs":1,"noerr":0,"x":960.3333511352539,"y":1632.3165187835693,"wires":[["b2c7f75c.175488"]]},{"id":"a164b2d7.4ad93","type":"function","z":"e0c1b2eb.002b2","name":"global get setfspassword","func":"msg.payload = global.get('setfspassword');\nmsg.topic = 'setfspassword';\nreturn msg;","outputs":1,"noerr":0,"x":965.6448974609375,"y":1673.64990234375,"wires":[["b2c7f75c.175488"]]},{"id":"2afe829d.c30ede","type":"function","z":"e0c1b2eb.002b2","name":"global get dynFilldb","func":"msg.payload = global.get('dynFilldb');\nmsg.topic = 'dynFilldb';\nreturn msg;","outputs":1,"noerr":0,"x":944.1666717529297,"y":1713.1265573501587,"wires":[["b2c7f75c.175488"]]},{"id":"372dc55e.5e780a","type":"function","z":"e0c1b2eb.002b2","name":"global get multiunit","func":"msg.payload = global.get('multiunit');\nmsg.topic = 'multiunit';\nreturn msg;","outputs":1,"noerr":0,"x":941.8333740234375,"y":1749.79296875,"wires":[["b2c7f75c.175488"]]},{"id":"45ff3eb.80e3bc","type":"function","z":"e0c1b2eb.002b2","name":"get ducted_check","func":"msg.payload = global.get('ducted_check');\nmsg.topic = 'ducted_check';\nreturn msg;","outputs":1,"noerr":0,"x":412.8571472167969,"y":1573.8286018371582,"wires":[["e3752867.a82fe8"]]},{"id":"6965de33.6e1b7","type":"function","z":"e0c1b2eb.002b2","name":"get phase_check","func":"msg.payload = global.get('phase_check');\nmsg.topic = 'phase_check';\nreturn msg;","outputs":1,"noerr":0,"x":418.8571472167969,"y":1613.8286018371582,"wires":[["e3752867.a82fe8"]]},{"id":"46ab61d0.a315","type":"function","z":"e0c1b2eb.002b2","name":"global get safety_check","func":"msg.payload = global.get('safety_check');\nmsg.topic = 'safety_check';\nreturn msg;","outputs":1,"noerr":0,"x":428.8571472167969,"y":1653.8286018371582,"wires":[["e3752867.a82fe8"]]},{"id":"7ba8893d.aa2298","type":"function","z":"e0c1b2eb.002b2","name":"global get setPhi","func":"msg.payload = global.get('setPhi');\nmsg.topic = 'setPhi';\nreturn msg;","outputs":1,"noerr":0,"x":449.99998474121094,"y":1838.0000190734863,"wires":[["7805e5c4.6f4adc"]]},{"id":"1bca6a35.f5e216","type":"function","z":"e0c1b2eb.002b2","name":"global get setPlo","func":"msg.payload = global.get('setPlo');\nmsg.topic = 'setPlo';\nreturn msg;","outputs":1,"noerr":0,"x":440.99998474121094,"y":1876.0000190734863,"wires":[["7805e5c4.6f4adc"]]},{"id":"e2dfeeef.dbefd","type":"function","z":"e0c1b2eb.002b2","name":"global get setDirt","func":"msg.payload = global.get('setDirt');\nmsg.topic = 'setDirt';\nreturn msg;","outputs":1,"noerr":0,"x":434.99998474121094,"y":1917.0000190734863,"wires":[["7805e5c4.6f4adc"]]},{"id":"3ca5216c.3e2eae","type":"inject","z":"e0c1b2eb.002b2","name":"ONCE A SEC","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":213.99998474121094,"y":1872.0000190734863,"wires":[["7ba8893d.aa2298","1bca6a35.f5e216","e2dfeeef.dbefd","7ba16a81.2a2bf4"]]},{"id":"7805e5c4.6f4adc","type":"vis in","z":"e0c1b2eb.002b2","language":"en","x":631.6784420013428,"y":1894.322382926941,"wires":[[]]},{"id":"7ba16a81.2a2bf4","type":"function","z":"e0c1b2eb.002b2","name":"get HiDuct","func":"msg.payload = global.get('HiDuct');\nmsg.topic = 'HiDuct';\nreturn msg;","outputs":1,"noerr":0,"x":433.99998474121094,"y":1956.0000190734863,"wires":[["7805e5c4.6f4adc"]]},{"id":"47fddc8d.fb30e4","type":"comment","z":"3e413809.1b57a8","name":"Reset button ","info":"","x":573.3333435058594,"y":249.20238590240479,"wires":[]},{"id":"f6555dd5.8a92","type":"inject","z":"3e413809.1b57a8","name":"","topic":"reset","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"x":202.7262191772461,"y":433.30950927734375,"wires":[["4b9fc451.73268c"]]},{"id":"a45d485f.81dbc8","type":"inject","z":"3e413809.1b57a8","name":"","topic":"reset","payload":"false","payloadType":"bool","repeat":"","crontab":"","once":false,"x":200.4405059814453,"y":389.91665840148926,"wires":[["f432ffb0.f2841"]]},{"id":"336096f3.ca3d0a","type":"trigger","z":"3e413809.1b57a8","op1":"","op2":"","op1type":"nul","op2type":"pay","duration":"3","extend":false,"units":"s","reset":"","name":"delay reset","x":560.2619476318359,"y":439.595251083374,"wires":[["cf7d5965.6c1f58"]]},{"id":"4b9fc451.73268c","type":"switch","z":"3e413809.1b57a8","name":"reset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"reset","vt":"str"}],"checkall":"true","outputs":1,"x":550.8333511352539,"y":384.10714054107666,"wires":[["336096f3.ca3d0a","f432ffb0.f2841"]]},{"id":"cf7d5965.6c1f58","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"99","fromt":"num","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":204.94043731689453,"y":323.2500190734863,"wires":[["c89a3d6e.b3594"]]},{"id":"c89a3d6e.b3594","type":"function","z":"3e413809.1b57a8","name":"flip flop","func":"var newmsg = msg.payload;\nif (newmsg === 0 ) {\n   msg.payload = 1 ;\n}   \nif (newmsg== 1 ) {\n    msg.payload = 0 ;\n}\nreturn msg;","outputs":1,"noerr":0,"x":383.8691101074219,"y":324.25002098083496,"wires":[["f432ffb0.f2841"]]},{"id":"5b3b46ca.115d48","type":"inject","z":"3e413809.1b57a8","name":"RESET on startup","topic":"reset","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":978.8332862854004,"y":230.3809700012207,"wires":[["a193ef69.617cf"]]},{"id":"a193ef69.617cf","type":"trigger","z":"3e413809.1b57a8","op1":"","op2":"","op1type":"pay","op2type":"pay","duration":"3","extend":false,"units":"s","reset":"","name":"initialization","x":1210.916660308838,"y":246.42860794067383,"wires":[["ad5c30a3.956a2"]]},{"id":"5851024e.9d0aec","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":974.1070899963379,"y":282.8571357727051,"wires":[["a193ef69.617cf"]]},{"id":"9b2a57c4.c43af8","type":"switch","z":"3e413809.1b57a8","name":"reset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"reset","vt":"str"}],"checkall":"true","outputs":1,"x":813.5833358764648,"y":285.7619185447693,"wires":[["5851024e.9d0aec"]]},{"id":"ad5c30a3.956a2","type":"function","z":"3e413809.1b57a8","name":"SET VARIABLES 1","func":"var actFilt = global.set ('actFilt', 0);\nvar actPres = global.set ('actPres', 0);\nvar alarm = global.set ('alarm', 0);\nvar begin = global.set ('begin', 0);\nvar ballchk = global.set ('ballchk', 0);\nvar ballvalve = global.set ('ballvalve', 0);\nvar blwr = global.set ('blwr', 0);\nvar brtemp = global.set ('brtemp', 0);\nvar bvtemp = global.set ('bvtemp', 0);\nvar conveyor = global.set ('conveyor', 0);\nvar cvtemp = global.set ('cvtemp', 0);\nvar demo_mode = global.set ('demo_mode', 0);\nvar dynFill = global.set ('dynFill', 0);\nvar filterlife = global.set ('filterlife', 0);\nvar flt = global.set('flt',0);\nvar fspasstrue = global.set ('fspasstrue', 0);\nvar fspassword = global.set ('fspassword', 0);\nvar gate = global.set ('gate', 0);\nvar gauge = global.set ('gauge', 1);\nvar hiductpress = global.set ('hiductpress', 0);\nvar man_control = global.set ('man_control', 0);\nvar man_fill = global.set ('manfill', 0);\nvar pcstep1 = global.set ('pcstep1', 0);\nvar pcstep2 = global.set ('pcstep2', 0);\nvar pcstep3 = global.set ('pcstep3', 0);\nvar pcstep4 = global.set ('pcstep4', 0);\nvar pcstep5 = global.set ('pcstep5', 0);\nvar pcstep6 = global.set ('pcstep6', 0);\nvar pcstep7 = global.set ('pcstep7', 0);\nvar permPhi = global.set ('permPhi', 0);\nvar permPlo = global.set ('permPlo', 0);\nvar permDirt = global.set ('permDirt', 0);\nvar phase = global.set ('phase', 1);\nvar press_calibration = global.set('press_calibration',0);\nvar realductpress = global.set ('realductpress',0);\nvar realfiltpress = global.set ('realfiltpress',0);\nvar realscrubpress = global.set ('realscrubpress',0);\nvar rawDuct = global.set ('rawDuct', 0);\nvar rawFilt = global.set ('rawFilt',0);\nvar rawScrub = global.set ('rawScrub',0);\nvar reset = global.set ('reset', 0);\nvar rsrtest = global.set ('rsrtest', 0);\nvar safety = global.set('safety',0);\nvar setFilt = global.set ('setFilt', 0);\nvar start_stop = global.set ('start_stop', 0);\nvar start_stop_all = global.set ('start_stop_all',0);\nvar step1 = global.set ('step1', 0);\nvar step2 = global.set ('step2', 0);\nvar step3 = global.set ('step3', 0);\nvar step4 = global.set ('step4', 0);\nvar step5 = global.set ('step5', 0);\nvar step6 = global.set ('step6', 0);\nvar step7 = global.set ('step7', 0);\nvar table = global.set ('table', 0);\nvar test_mode = global.set ('test_mode', 0);\nvar tempPres = global.set ('temp_Pres', 0);\nvar timedout = global.set ('timedout', 0);\nvar timedout_alarm = global.set ('timedout_alarm', 0);\nvar tune = global.set ('tune', 0);\nvar warnDirt = global.set('warnDirt', 0);\nvar warnPhi = global.set('warnPhi', 0);\nvar warnPlo = global.set('warnPlo', 0);\nvar warn_timedout = global.set('warn_timedout', 0);\nvar windup_reset = global.set('windup_reset', 1);\nvar winddown_reset = global.set('winddown_reset', 1);\nvar conv_reset = global.set('conv_reset', 1);\nvar post_reset = global.set('post_reset', 1);\n\nreturn msg;\n","outputs":"1","noerr":0,"x":1229.1548309326172,"y":309.3807792663574,"wires":[[]]},{"id":"483c004f.7d137","type":"switch","z":"3e413809.1b57a8","name":"reset","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"reset","vt":"str"}],"checkall":"true","outputs":1,"x":730.3452301025391,"y":348.0951044559479,"wires":[["36467140.8318ae"]]},{"id":"eaa49e6b.3411d","type":"comment","z":"3e413809.1b57a8","name":"question qualifier unit set up","info":"","x":854.1666488647461,"y":1088.6667847633362,"wires":[]},{"id":"d4f9c228.e0ca4","type":"inject","z":"3e413809.1b57a8","name":"1 SEC PULSE","topic":"","payload":"4","payloadType":"str","repeat":"1","crontab":"","once":true,"x":287.4047317504883,"y":1140.9527735710144,"wires":[["cc802516.920778","38456c73.4185f4","52278e75.991ae","49c3f4a5.b0bedc"]]},{"id":"dae13de1.04883","type":"switch","z":"3e413809.1b57a8","name":"gate","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"gate","vt":"str"}],"checkall":"true","outputs":1,"x":989.1666310628257,"y":1243.6666882832842,"wires":[["5e3dff68.b17db","45caa6a.cbb9458"]]},{"id":"5e3dff68.b17db","type":"change","z":"3e413809.1b57a8","name":"gate","rules":[{"t":"change","p":"payload","pt":"msg","from":"1","fromt":"num","to":"2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1164.8492749532065,"y":1241.1428025563555,"wires":[["36bc754b.285a9a"]]},{"id":"d0279d61.c875f","type":"change","z":"3e413809.1b57a8","name":"filterlife","rules":[{"t":"change","p":"payload","pt":"msg","from":"1","fromt":"num","to":"2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1254.420541127523,"y":1340.2855466206865,"wires":[["36bc754b.285a9a"]]},{"id":"1524cfb6.42764","type":"switch","z":"3e413809.1b57a8","name":"filterlife","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"filterlife","vt":"str"}],"checkall":"true","outputs":1,"x":1016.5158704121909,"y":1342.8095124562578,"wires":[["d0279d61.c875f","175b8aac.6e8c55"]]},{"id":"9eed3f8f.876a","type":"switch","z":"3e413809.1b57a8","name":"ballchk","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"ballchk","vt":"str"}],"checkall":"true","outputs":1,"x":1028.420639038086,"y":1385.904700756073,"wires":[["34edb6d4.4ee1ba","281156ef.2f2efa"]]},{"id":"34edb6d4.4ee1ba","type":"change","z":"3e413809.1b57a8","name":"ballchk","rules":[{"t":"change","p":"payload","pt":"msg","from":"1","fromt":"num","to":"2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1278.599380493164,"y":1384.3571124076843,"wires":[["36bc754b.285a9a"]]},{"id":"779e79be.724558","type":"inject","z":"3e413809.1b57a8","name":"gate 0","topic":"gate","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1477.5000928243003,"y":1363.500108083089,"wires":[["71628960.bd9438"]]},{"id":"19c9165d.ef371a","type":"inject","z":"3e413809.1b57a8","name":"gate 1","topic":"gate","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1480.833423614502,"y":1398.5001106262207,"wires":[["71628960.bd9438"]]},{"id":"71628960.bd9438","type":"function","z":"3e413809.1b57a8","name":"gate test","func":"global.set('gate', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1710.5953254699707,"y":1380.1668343544006,"wires":[[]]},{"id":"cc802516.920778","type":"change","z":"3e413809.1b57a8","name":"gate filter","rules":[{"t":"set","p":"topic","pt":"msg","to":"gate","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":595.8333969116211,"y":1170.190556049347,"wires":[["277f13b2.16eb8c"]]},{"id":"277f13b2.16eb8c","type":"function","z":"3e413809.1b57a8","name":"gate","func":"msg.payload = global.get('gate');\nreturn msg;\n","outputs":1,"noerr":0,"x":759.8333053588867,"y":1171.856815814972,"wires":[["dae13de1.04883"]]},{"id":"e657bd1d.bdb4e","type":"inject","z":"3e413809.1b57a8","name":"table 0","topic":"table","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1480.833423614502,"y":1435.8334603309631,"wires":[["1d1d68b3.1fdac7"]]},{"id":"1dd2eac0.82c3a5","type":"inject","z":"3e413809.1b57a8","name":"table 1","topic":"table","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1486.833423614502,"y":1474.4999642372131,"wires":[["1d1d68b3.1fdac7"]]},{"id":"1d1d68b3.1fdac7","type":"function","z":"3e413809.1b57a8","name":"table test","func":"global.set('table', msg.payload);\nreturn msg;\n","outputs":1,"noerr":0,"x":1709.738224029541,"y":1436.1667122840881,"wires":[[]]},{"id":"fe2e55fe.ae6748","type":"inject","z":"3e413809.1b57a8","name":"filterlife 0","topic":"filterlife","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1479.5000801086426,"y":1508.1667122840881,"wires":[["14d855.c52377ab"]]},{"id":"dc1a5e0b.9f6fd","type":"inject","z":"3e413809.1b57a8","name":"filterlife 1","topic":"filterlife","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1485.5000801086426,"y":1548.4999642372131,"wires":[["14d855.c52377ab"]]},{"id":"14d855.c52377ab","type":"function","z":"3e413809.1b57a8","name":"filterlife test","func":"global.set('filterlife', msg.payload);\nreturn msg;\n","outputs":1,"noerr":0,"x":1708.976261138916,"y":1499.9760384559631,"wires":[[]]},{"id":"13c8d426.1f2b2c","type":"inject","z":"3e413809.1b57a8","name":"ballchk 0","topic":"ballchk","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1511.1668281555176,"y":1584.5001425743103,"wires":[["f78bed6f.da6ed"]]},{"id":"58fb297c.f211a8","type":"inject","z":"3e413809.1b57a8","name":"ballchk 1","topic":"ballchk","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":1515.8334846496582,"y":1631.1667685508728,"wires":[["f78bed6f.da6ed"]]},{"id":"f78bed6f.da6ed","type":"function","z":"3e413809.1b57a8","name":"ballvalve test","func":"global.set('ballchk', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1725.73823928833,"y":1594.7857871055603,"wires":[[]]},{"id":"52278e75.991ae","type":"change","z":"3e413809.1b57a8","name":"filterlife filter","rules":[{"t":"set","p":"topic","pt":"msg","to":"filterlife","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580.8928451538086,"y":1258.1906170845032,"wires":[["7f9d2ee8.041ba"]]},{"id":"49c3f4a5.b0bedc","type":"change","z":"3e413809.1b57a8","name":"ballvalve filter","rules":[{"t":"set","p":"topic","pt":"msg","to":"ballchk","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":530.273796081543,"y":1298.1427655220032,"wires":[["e8705098.546f9"]]},{"id":"307e9889.d2fa78","type":"switch","z":"3e413809.1b57a8","name":"table","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"table","vt":"str"}],"checkall":"true","outputs":1,"x":999.1667302449546,"y":1288.6667702992754,"wires":[["8582d21a.925f4","106f3ed8.5570b1"]]},{"id":"8582d21a.925f4","type":"change","z":"3e413809.1b57a8","name":"table","rules":[{"t":"change","p":"payload","pt":"msg","from":"1","fromt":"num","to":"2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1183.7381146748862,"y":1281.1428597768145,"wires":[["36bc754b.285a9a"]]},{"id":"38456c73.4185f4","type":"change","z":"3e413809.1b57a8","name":"table filter","rules":[{"t":"set","p":"topic","pt":"msg","to":"table","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590.9761581420898,"y":1216.1430096626282,"wires":[["89da9f6c.81d7e"]]},{"id":"89da9f6c.81d7e","type":"function","z":"3e413809.1b57a8","name":"table","func":"msg.payload = global.get('table');\nreturn msg;\n","outputs":1,"noerr":0,"x":748.4999923706055,"y":1243.0000653266907,"wires":[["307e9889.d2fa78"]]},{"id":"45caa6a.cbb9458","type":"function","z":"3e413809.1b57a8","name":"gate set","func":"global.set('gate', msg.payload);\nif (global.get('gate') === 0 ) {global.set ('table', 0 );\nglobal.set ('filterlife', 0 );\nglobal.set ('ballchk', 0)}\nreturn ;\n","outputs":1,"noerr":0,"x":1345.1190071105957,"y":1125.6784453392029,"wires":[[]]},{"id":"106f3ed8.5570b1","type":"function","z":"3e413809.1b57a8","name":"table test","func":"global.set('table', msg.payload);\nif (global.get('table') === 0 ) {\nglobal.set ('filterlife', 0 );\nglobal.set ('ballchk', 0)}\nreturn ;\n","outputs":1,"noerr":0,"x":1353.2380256652832,"y":1182.6667265892029,"wires":[[]]},{"id":"7f9d2ee8.041ba","type":"function","z":"3e413809.1b57a8","name":"table and filterlife","func":"msg.payload = global.get('filterlife');\nreturn msg;\n","outputs":1,"noerr":0,"x":756.4999923706055,"y":1302.0000386238098,"wires":[["1524cfb6.42764"]]},{"id":"175b8aac.6e8c55","type":"function","z":"3e413809.1b57a8","name":"filterlife test","func":"global.set('filterlife', msg.payload);\nif (global.get('filterlife') === 0 ) {\nglobal.set ('ballchk', 0)}\nreturn ;\n","outputs":1,"noerr":0,"x":1397.6785774230957,"y":1232.7143340110779,"wires":[[]]},{"id":"e8705098.546f9","type":"function","z":"3e413809.1b57a8","name":"table and filterlife and ballvalve","func":"msg.payload = global.get('ballchk');\nreturn msg;\n","outputs":1,"noerr":0,"x":713.5476150512695,"y":1357.9283680915833,"wires":[["9eed3f8f.876a"]]},{"id":"281156ef.2f2efa","type":"function","z":"3e413809.1b57a8","name":"ballchk test","func":"global.set('ballchk', msg.payload);\nreturn msg;\n","outputs":1,"noerr":0,"x":1427.7857551574707,"y":1290.8812041282654,"wires":[[]]},{"id":"f432ffb0.f2841","type":"vis in","z":"3e413809.1b57a8","language":"en","x":550,"y":300,"wires":[["483c004f.7d137","4b9fc451.73268c"]]},{"id":"36bc754b.285a9a","type":"vis in","z":"3e413809.1b57a8","language":"en","x":1065.7381782531738,"y":1106.9524779319763,"wires":[["dae13de1.04883","307e9889.d2fa78","1524cfb6.42764","9eed3f8f.876a"]]},{"id":"8f23c911.5ca148","type":"comment","z":"3e413809.1b57a8","name":"Variable List","info":"var start_stop = global.get ('start_stop')||0;\nvar man_control = global.get ('man_control')||0;\nvar test_mode = global.get ('test_mode')||0;\nvar demo_mode = global.get ('demo_mode')||0;\nvar alarm = global.get ('alarm') || 0;\nvar blwr = global.get ('blwr') || 0;\nvar speed = global.get ('speed')|| 0;\nvar flt = global.get ('flt') || 0;\nvar count = global.get ('count') || 0;\n//var permPres = global.get ('permPres') || 2.5;\n//var actPres = global.get ('actPres') || 0;\n//var setPres = global.get ('setPres') || 5.5;\n//var permPlo = global.get ('permPlo') || 0;\n//var permPhi = global.get ('permPhi') || 0;\n//var permDirt = global.get ('permDirt') || 0;\n//var oldPlo = global.get ('oldPlo') || 3.5;\n//var oldPhi = global.get ('oldPhi') || 7.5;\n//var oldFilt = global.get ('oldFilt') || 2.5;\n//var setFilt = global.get ('setFilt') || 1.25;\n//var actFilt = global.get ('actFilt') || 0;\n//var permFilt = global.get ('permFilt') || 0.2;\nvar begin = global.get ('begin') || 0;\nvar step1 = global.get ('step1' ) || 0;\nvar step2 = global.get ('step2' ) || 0;\nvar step3 = global.get ('step3' ) || 0;\nvar step4 = global.get ('step4' ) || 0;\nvar step5 = global.get ('step5' ) || 0;\nvar step6 = global.get ('step6' ) || 0;\nvar step7 = global.get ('step7' ) || 0;\nvar gate = global.get ('gate' ) || 0;\nvar table = global.get ('table' ) || 0;\nvar filterlife = global.get ('filterlife' ) || 0;\nvar ballvalve = global.get ('ballvalve' ) || 0;\nvar gate2 = global.get ('gate2' ) || 0;\nvar table2 = global.get ('table2' ) || 0;\nvar filterlife2 = global.get ('filterlife2' ) || 0;\nvar ballvalve = global.get ('ballchk' ) || 0;\nvar reset = global.get ('reset' ) || 0;\nvar phase = global.get ('phase' ) || 1;\nvar dynFill = global.get ('dynFill' ) || 0;\nvar scott = global.get ('scott') || 0;\nvar tune = global.get ('tune') || 0;\nvar setPhi = global.get ('setPhi') || 1.5;\nvar setPlo = global.get ('setPlo') || 1.5;\nvar setDirt = global.get ('setDirt') || 0.75;\nvar phase_check = global.get ('phase_check') || 1;\n\nvar test = global.set ('test', 1);\nvar alarm = global.set ('alarm', 0);\nvar sys = global.set ('sys', 0);\nvar flt = global.set ('flt', 0);\nvar wtr = global.set ('wtr',  0);\nvar blwr = global.set ('blwr', 0);\nvar count = global.set ('count', 0);\n//var permPres = global.set ('permPres', 5.5);\n//var setPres = global.set ('setPres', 5.5);\nvar actPres = global.set ('actPres', 0);\nvar permPlo = global.set ('permPlo', 0);\nvar permPhi = global.set ('permPhi', 0);\n//var permFilt = global.set ('permFilt', 0.2);\n//var oldPlo = global.set ('oldPlo', 3.5);\n//var oldPhi = global.set ('oldPhi', 7.5);\n//var oldFilt = global.set ('oldFilt', 2.5);\n//var setFilt = global.set ('setFilt', 0.25);\nvar actFilt = global.set ('actFilt', 0);\nvar permDirt = global.set ('permDirt', 0);\nvar begin = global.set ('begin', 0);\nvar begin = global.set ('begin2', 0);\nvar step1 = global.set ('step1', 0);\nvar step2 = global.set ('step2', 0);\nvar step3 = global.set ('step3', 0);\nvar step4 = global.set ('step4', 0);\nvar step5 = global.set ('step5', 0);\nvar step6 = global.set ('step6', 0);\nvar step7 = global.set ('step7', 0);\nvar timedout = global.set ('timedout', 0);\nvar timedout_alarm = global.set ('timedout_alarm', 0);\nvar gate = global.set ('gate', 0);\nvar table = global.set ('table', 0);\nvar filterlife = global.set ('filterlife', 0);\nvar ballvalve = global.set ('ballvalve', 0);\nvar gate = global.set ('gate2', 0);\nvar table = global.set ('table2', 0);\nvar filterlife2 = global.set ('filterlife2', 0);\nvar ballvalve = global.set ('ballvalve', 0);\nvar reset = global.set ('reset', 0);\nvar test_mode = global.set ('test_mode', 0);\nvar phase = global.set ('phase', 1);\nvar dynFill = global.set ('dynFill', 0);\nvar scott = global.set ('scott', 3);\nvar tune = global.set ('tune', 0);\nvar newval1 = global.set ('newval1', 0);\nvar newval2 = global.set ('newval2', 0);\nvar newval3 = global.set ('newval3', 0);\nvar setPhi = global.set ('setPhi', 1.5);\nvar setPlo = global.set ('setPlo', 1.5);\nvar setDirt = global.set ('setDirt', 0.75);\nvar demo_mode = global.set ('demo_mode', 0);\nvar Phicount = global.set ('Phicount', 0);\nvar Plocount = global.set ('Plocount', 0);\nvar Dirtcount = global.set ('Dirtcount', 0);\nvar Timedoutcount = global.set ('Timedoutcount', 0);","x":410.4047546386719,"y":196.38099193572998,"wires":[]},{"id":"c9df42c1.ab651","type":"vis in","z":"3e413809.1b57a8","language":"en","x":572.0000991821289,"y":3000.8817863464355,"wires":[["15c41f86.0a84b","571aeeb7.535cf","593ac180.fd237","25d0924b.b5f96e","5b70f9c8.303a48","5ffe806e.894bc","f4fc22c4.97da9","faf6c155.9ad88","f6d8c1dc.daa7f","d6ee6807.cc9ab8"]]},{"id":"15c41f86.0a84b","type":"switch","z":"3e413809.1b57a8","name":"set topic testpermPhi","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"testpermPhi","vt":"str"}],"checkall":"true","outputs":1,"x":812.5117568969727,"y":2844.1437492370605,"wires":[["f55cb197.3ba9c"]]},{"id":"6500c42e.be4d7c","type":"function","z":"3e413809.1b57a8","name":"global set testpermPhi","func":"global.set('testalarm',1);\nreturn;","outputs":1,"noerr":0,"x":1193.2265396118164,"y":2848.5482902526855,"wires":[[]]},{"id":"11b62e7a.64b7f2","type":"comment","z":"3e413809.1b57a8","name":"Manually set Alarm states from VIS for demo","info":"","x":643.2500610351562,"y":2806.1317291259766,"wires":[]},{"id":"571aeeb7.535cf","type":"switch","z":"3e413809.1b57a8","name":"set topic testpermPlo","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"testpermPlo","vt":"str"}],"checkall":"true","outputs":1,"x":816.0000991821289,"y":2893.8817863464355,"wires":[["cc4c3e37.5383a"]]},{"id":"742a10d1.fdc96","type":"function","z":"3e413809.1b57a8","name":"global set testpermPlo","func":"global.set('testalarm',2);\nreturn;","outputs":1,"noerr":0,"x":1196.7148818969727,"y":2898.2863273620605,"wires":[[]]},{"id":"593ac180.fd237","type":"switch","z":"3e413809.1b57a8","name":"set topic testpermDirt","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"testpermDirt","vt":"str"}],"checkall":"true","outputs":1,"x":815.0000991821289,"y":2942.8817863464355,"wires":[["24536ba7.ddf984"]]},{"id":"3602395a.c80a26","type":"function","z":"3e413809.1b57a8","name":"global set testpermDirt","func":"global.set('testalarm',3);\nreturn;","outputs":1,"noerr":0,"x":1195.7148818969727,"y":2947.2863273620605,"wires":[[]]},{"id":"25d0924b.b5f96e","type":"switch","z":"3e413809.1b57a8","name":"set topic testtimedout_alarm","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"testtimedout_alarm","vt":"str"}],"checkall":"true","outputs":1,"x":832.0000991821289,"y":2991.8817863464355,"wires":[["b0aa44c7.5e8b48"]]},{"id":"23eb7176.a3fb6e","type":"function","z":"3e413809.1b57a8","name":"global set testtimedout_alarm","func":"global.set('testalarm',4);\nreturn;","outputs":1,"noerr":0,"x":1222.7148628234863,"y":2988.286422729492,"wires":[[]]},{"id":"5b70f9c8.303a48","type":"switch","z":"3e413809.1b57a8","name":"set topic testphase","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"testphase","vt":"str"}],"checkall":"true","outputs":1,"x":791.0000991821289,"y":3083.8817863464355,"wires":[["f0a138cd.187f78"]]},{"id":"1e2e8db5.34fb92","type":"function","z":"3e413809.1b57a8","name":"global set testphase","func":"global.set('testphase',0);\nreturn;","outputs":1,"noerr":0,"x":1192.7148628234863,"y":3096.286425590515,"wires":[[]]},{"id":"f55cb197.3ba9c","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1009.5000991821289,"y":2843.8817863464355,"wires":[[],["6500c42e.be4d7c"]]},{"id":"cc4c3e37.5383a","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1015.0000991821289,"y":2893.8817863464355,"wires":[[],["742a10d1.fdc96"]]},{"id":"24536ba7.ddf984","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1016.0000991821289,"y":2942.8817863464355,"wires":[[],["3602395a.c80a26"]]},{"id":"b0aa44c7.5e8b48","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1021.0000991821289,"y":2989.8817863464355,"wires":[[],["23eb7176.a3fb6e"]]},{"id":"f0a138cd.187f78","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":997.000114440918,"y":3106.881739616394,"wires":[["1e2e8db5.34fb92"],["871761fc.4a62b"]]},{"id":"394981f5.d6f05e","type":"switch","z":"3e413809.1b57a8","name":"set topic man_control","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"man_control","vt":"str"}],"checkall":"true","outputs":1,"x":330.56732177734375,"y":1608.7224106788635,"wires":[["9b998a.ef44b678"]]},{"id":"9b998a.ef44b678","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":542.2262420654297,"y":1611.933000087738,"wires":[["8569b685.2a8f48"]]},{"id":"8569b685.2a8f48","type":"function","z":"3e413809.1b57a8","name":"global set man_control","func":"global.set('man_control',msg.payload);\nif (msg.payload === 1){var rsrtest = global.set('rsrtest',1);}\nreturn;","outputs":1,"noerr":0,"x":763.726619720459,"y":1607.349301815033,"wires":[[]]},{"id":"7425001f.a8252","type":"switch","z":"3e413809.1b57a8","name":"set topic test_mode","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"test_mode","vt":"str"}],"checkall":"true","outputs":1,"x":341.1826629638672,"y":1651.3213629722595,"wires":[["d5baf90c.458128"]]},{"id":"d3929236.b240f","type":"switch","z":"3e413809.1b57a8","name":"set topic demo_mode","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"demo_mode","vt":"str"}],"checkall":"true","outputs":1,"x":343.33349609375,"y":1691.968472957611,"wires":[["cd5d388c.5c7ed8"]]},{"id":"d5baf90c.458128","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":552.4841537475586,"y":1651.111406803131,"wires":[["d255f44f.ee15d8"]]},{"id":"cd5d388c.5c7ed8","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":554.634937286377,"y":1690.5360503196716,"wires":[["94da991c.7a9d48"]]},{"id":"d255f44f.ee15d8","type":"function","z":"3e413809.1b57a8","name":"global set test_mode","func":"global.set('test_mode',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":775.2778015136719,"y":1648.7500920295715,"wires":[[]]},{"id":"94da991c.7a9d48","type":"function","z":"3e413809.1b57a8","name":"global set demo_mode","func":"global.set('demo_mode',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":772.9841251373291,"y":1689.8415656089783,"wires":[[]]},{"id":"fa0f37cb.5e5c08","type":"switch","z":"3e413809.1b57a8","name":"set topic begin","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"begin","vt":"str"}],"checkall":"true","outputs":1,"x":346.1549186706543,"y":1731.8490986824036,"wires":[["81881430.673608"]]},{"id":"81881430.673608","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":576.393138885498,"y":1727.5950746536255,"wires":[["172e6ee3.63a011"]]},{"id":"172e6ee3.63a011","type":"function","z":"3e413809.1b57a8","name":"global set begin","func":"global.set('begin',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":776.9366111755371,"y":1729.7143659591675,"wires":[[]]},{"id":"8eea31b0.cd217","type":"comment","z":"3e413809.1b57a8","name":"Data from VIS","info":"","x":426.8332824707031,"y":1533.19091463089,"wires":[]},{"id":"36426c8a.148a84","type":"switch","z":"3e413809.1b57a8","name":"set topic conveyor_control","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"conveyor_control","vt":"str"}],"checkall":"true","outputs":1,"x":373.9444580078125,"y":1769.7463669776917,"wires":[["75cb749b.cc4dbc"]]},{"id":"75cb749b.cc4dbc","type":"function","z":"3e413809.1b57a8","name":"global set conveyor_control","func":"global.set('conveyor_control',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":783.1037521362305,"y":1774.5951952934265,"wires":[[]]},{"id":"faf6c155.9ad88","type":"switch","z":"3e413809.1b57a8","name":"resettestalarms","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"resettestalarms","vt":"str"}],"checkall":"true","outputs":1,"x":458.33341217041016,"y":3061.2152824401855,"wires":[["abf2d06.bf7a93","c9df42c1.ab651"]]},{"id":"abf2d06.bf7a93","type":"trigger","z":"3e413809.1b57a8","op1":"","op2":"","op1type":"nul","op2type":"pay","duration":"3","extend":false,"units":"s","reset":"","name":"delay reset","x":516.047737121582,"y":3100.4176750183105,"wires":[["2b41e5f1.3bf4aa"]]},{"id":"2b41e5f1.3bf4aa","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"1","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"0","tot":"num"},{"t":"change","p":"payload","pt":"msg","from":"99","fromt":"num","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":260.72623443603516,"y":2940.9296379089355,"wires":[["7705c86d.df4e88"]]},{"id":"7705c86d.df4e88","type":"function","z":"3e413809.1b57a8","name":"flip flop","func":"var newmsg = msg.payload;\nif (newmsg === 0 ) {\n   msg.payload = 1 ;\n}   \nif (newmsg== 1 ) {\n    msg.payload = 0 ;\n}\nreturn msg;","outputs":1,"noerr":0,"x":423.2263412475586,"y":2932.2152824401855,"wires":[["c9df42c1.ab651"]]},{"id":"d1bf8f07.2064","type":"inject","z":"3e413809.1b57a8","name":"","topic":"resettestalarms","payload":"false","payloadType":"bool","repeat":"","crontab":"","once":false,"x":233.94058990478516,"y":3010.3104972839355,"wires":[["faf6c155.9ad88"]]},{"id":"62c41405.e4474c","type":"inject","z":"3e413809.1b57a8","name":"","topic":"resettestalarms","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"x":237.08344268798828,"y":3061.9892082214355,"wires":[["faf6c155.9ad88"]]},{"id":"f4fc22c4.97da9","type":"switch","z":"3e413809.1b57a8","name":"resettestalarms","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"resettestalarms","vt":"str"}],"checkall":"true","outputs":1,"x":790.2738952636719,"y":3239.4891633987427,"wires":[["c32d7fe9.6bfc9"]]},{"id":"c32d7fe9.6bfc9","type":"function","z":"3e413809.1b57a8","name":"SET CALL VARIABLES","func":"var testalarm = global.set ('testalarm', 0);\nvar testpermPlo = global.set ('testpermPlo', 0);\nvar testpermPhi = global.set ('testpermPhi', 0);\nvar testpermDirt = global.set ('testpermDirt', 0);\nvar testtimedout_alarm = global.set ('testtimedout_alarm', 0);\nvar testphase = global.set ('testphase', 1);\nvar testsafety = global.set ('testsafety', 0);\nvar testhiductpress = global.set ('testhiductpress', 0);\nvar resettestalarms = global.set ('resettestalarms', 0);\n\nreturn msg;\n","outputs":"1","noerr":0,"x":1257.7977714538574,"y":3319.489164829254,"wires":[[]]},{"id":"92df498a.3862c8","type":"inject","z":"3e413809.1b57a8","name":"RESET on startup","topic":"resettestalarms","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"x":959.9048004150391,"y":3324.9176807403564,"wires":[["22194b14.2fb794"]]},{"id":"22194b14.2fb794","type":"trigger","z":"3e413809.1b57a8","op1":"","op2":"","op1type":"pay","op2type":"pay","duration":"3","extend":false,"units":"s","reset":"","name":"initialization","x":1174.9882011413574,"y":3270.965334892273,"wires":[["c32d7fe9.6bfc9"]]},{"id":"ca823675.dc3918","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":986.1786270141602,"y":3221.3938512802124,"wires":[["22194b14.2fb794"]]},{"id":"5ffe806e.894bc","type":"switch","z":"3e413809.1b57a8","name":"resettestalarms","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"resettestalarms","vt":"str"}],"checkall":"true","outputs":1,"x":785.7976493835449,"y":3186.441653251648,"wires":[["ca823675.dc3918"]]},{"id":"818dd834.444f68","type":"function","z":"3e413809.1b57a8","name":"global get testalarm state","func":"if (global.get('testalarm')===0) {\n    global.set('testpermPhi', 0);\n    global.set('testpermPlo', 0);\n    global.set('testpermDirt', 0);\n    global.set('testtimedout_alarm', 0);\n    return;\n}\nif (global.get('testalarm')===1) {global.set('testpermPhi', 1);\n    global.set('testpermPlo', 0);\n    global.set('testpermDirt', 0); \n    global.set('testtimedout_alarm', 0);\n    return;\n}\nif (global.get('testalarm')===2) {global.set('testpermPlo', 1);\n    global.set('testpermDirt', 0);\n    global.set('testpermPhi', 0);\n    global.set('testtimedout_alarm', 0);\n    return;\n}\nif (global.get('testalarm')===3) {global.set('testpermDirt', 1);\n    global.set('testpermPhi', 0);\n    global.set('testpermPlo', 0); \n    global.set('testtimedout_alarm', 0);\n    return;\n}\nif (global.get('testalarm')===4) {global.set('testtimedout_alarm', 1);\n    global.set('testpermPhi', 0);\n    global.set('testpermPlo', 0); \n    global.set('testpermDirt', 0);\n    return;\n}\nreturn ;","outputs":1,"noerr":0,"x":437.33355712890625,"y":3457.2154903411865,"wires":[[]]},{"id":"ca5c6ab6.6bd438","type":"inject","z":"3e413809.1b57a8","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":212.3334503173828,"y":3283.2150449752808,"wires":[["e4d98bf4.181248","6f30fdf2.f4b6f4","6fd1af1b.3c486","e929b13e.c7ea3","f69c3502.e61e88","acd8265a.6e4158","818dd834.444f68","f5dcf305.d4b3","f33ead73.7bebb"]]},{"id":"e929b13e.c7ea3","type":"function","z":"3e413809.1b57a8","name":"global get testpermPhi","func":"msg.payload = global.get('testpermPhi');\nmsg.topic = 'testpermPhi';\nreturn msg;","outputs":1,"noerr":0,"x":494.8334503173828,"y":3231.2152185440063,"wires":[["3615b904.19b8d6"]]},{"id":"6fd1af1b.3c486","type":"function","z":"3e413809.1b57a8","name":"global get testpermPlo","func":"msg.payload = global.get('testpermPlo');\nmsg.topic = 'testpermPlo';\nreturn msg;","outputs":1,"noerr":0,"x":490.83350372314453,"y":3305.2150955200195,"wires":[["3615b904.19b8d6"]]},{"id":"6f30fdf2.f4b6f4","type":"function","z":"3e413809.1b57a8","name":"global get testpermDirt","func":"msg.payload = global.get('testpermDirt');\nmsg.topic = 'testpermDirt';\nreturn msg;","outputs":1,"noerr":0,"x":484.83351135253906,"y":3340.215097427368,"wires":[["3615b904.19b8d6"]]},{"id":"e4d98bf4.181248","type":"function","z":"3e413809.1b57a8","name":"global get testtimedout_alarm","func":"msg.payload = global.get('testtimedout_alarm');\nmsg.topic = 'testtimedout_alarm';\nreturn msg;","outputs":1,"noerr":0,"x":467.26206970214844,"y":3412.5010356903076,"wires":[["3615b904.19b8d6"]]},{"id":"f69c3502.e61e88","type":"function","z":"3e413809.1b57a8","name":"global get testphase","func":"msg.payload = global.get('testphase');\nmsg.topic = 'testphase';\nreturn msg;","outputs":1,"noerr":0,"x":510.3334503173828,"y":3196.2152185440063,"wires":[["3615b904.19b8d6"]]},{"id":"acd8265a.6e4158","type":"function","z":"3e413809.1b57a8","name":"global get testalarm","func":"msg.payload = global.get('testalarm');\nmsg.topic = 'testalarm';\nreturn msg;","outputs":1,"noerr":0,"x":513.0002593994141,"y":3160.5487146377563,"wires":[["3615b904.19b8d6"]]},{"id":"3615b904.19b8d6","type":"vis in","z":"3e413809.1b57a8","language":"en","x":737.8334350585938,"y":3279.2150382995605,"wires":[[]]},{"id":"871761fc.4a62b","type":"function","z":"3e413809.1b57a8","name":"global reset testphase","func":"global.set('testphase',1);\nreturn;","outputs":1,"noerr":0,"x":1194.3334159851074,"y":3132.2153329849243,"wires":[[]]},{"id":"c67b6ee1.28b7c","type":"function","z":"3e413809.1b57a8","name":"get dynFill","func":"msg.payload = global.get('dynFill');\nmsg.topic = 'dynFill';\nreturn msg;","outputs":1,"noerr":0,"x":602.154914855957,"y":1990.5832388401031,"wires":[["22911598.4d502a"]]},{"id":"55783622.428728","type":"function","z":"3e413809.1b57a8","name":"global get oldPhi","func":"msg.payload = global.get('oldPhi');\nmsg.topic = 'oldPhi';\nreturn msg;","outputs":1,"noerr":0,"x":607.5476989746094,"y":2034.2856657505035,"wires":[["22911598.4d502a"]]},{"id":"afb86e6a.4f1b2","type":"function","z":"3e413809.1b57a8","name":"global get oldPlo","func":"msg.payload = global.get('oldPlo');\nmsg.topic = 'oldPlo';\nreturn msg;","outputs":1,"noerr":0,"x":612.6905517578125,"y":2072.1905195713043,"wires":[["22911598.4d502a"]]},{"id":"a2237e2d.352f7","type":"function","z":"3e413809.1b57a8","name":"global get setPres","func":"msg.payload = global.get('setPres');\nmsg.topic = 'setPres';\nreturn msg;","outputs":1,"noerr":0,"x":610.2619323730469,"y":2112.285663843155,"wires":[["22911598.4d502a"]]},{"id":"7ccddd15.e36e44","type":"function","z":"3e413809.1b57a8","name":"global get actPres","func":"//var newmsg = global.get('PS0');\n//global.set('actFilt',newmsg);\nmsg.payload = global.get('actPres');\nmsg.topic = 'actPres';\nreturn msg;","outputs":1,"noerr":0,"x":602.1190872192383,"y":2150.1428706645966,"wires":[["22911598.4d502a"]]},{"id":"aef09c56.2e6b8","type":"function","z":"3e413809.1b57a8","name":"global get actFilt","func":"msg.payload = global.get('actFilt');\nmsg.topic = 'actFilt';\nreturn msg;","outputs":1,"noerr":0,"x":605.333381652832,"y":2187.2617671489716,"wires":[["22911598.4d502a"]]},{"id":"9ee99edb.3b6c","type":"function","z":"3e413809.1b57a8","name":"global get permPhi","func":"msg.payload = global.get('permPhi');\nmsg.topic = 'permPhi';\nreturn msg;","outputs":1,"noerr":0,"x":609.2143630981445,"y":2274.4285151958466,"wires":[["22911598.4d502a"]]},{"id":"9917e732.2b1778","type":"function","z":"3e413809.1b57a8","name":"global get permPlo","func":"msg.payload = global.get('permPlo');\nmsg.topic = 'permPlo';\nreturn msg;","outputs":1,"noerr":0,"x":606.2143630981445,"y":2313.4285151958466,"wires":[["22911598.4d502a"]]},{"id":"2c0e7a6d.c9f4a6","type":"function","z":"3e413809.1b57a8","name":"global get permDirt","func":"msg.payload = global.get('permDirt');\nmsg.topic = 'permDirt';\nreturn msg;","outputs":1,"noerr":0,"x":607.2143630981445,"y":2351.4285151958466,"wires":[["22911598.4d502a"]]},{"id":"a637a66e.3170b8","type":"function","z":"3e413809.1b57a8","name":"global get setFilt","func":"msg.payload = global.get('setFilt');\nmsg.topic = 'setFilt';\nreturn msg;","outputs":1,"noerr":0,"x":616.2143630981445,"y":2226.4285151958466,"wires":[["22911598.4d502a"]]},{"id":"81fb3203.920ed","type":"function","z":"3e413809.1b57a8","name":"global get timedout_alarm","func":"msg.payload = global.get('timedout_alarm');\nmsg.topic = 'timedout_alarm';\nreturn msg;","outputs":1,"noerr":0,"x":639.785758972168,"y":2407.428684234619,"wires":[["9a32dee0.e8528"]]},{"id":"7a12dab7.790094","type":"function","z":"3e413809.1b57a8","name":"global get Phicount","func":"msg.payload = global.get('Phicount');\nmsg.topic = 'Phicount';\nreturn msg;","outputs":1,"noerr":0,"x":634.3572006225586,"y":2451.285915374756,"wires":[["9a32dee0.e8528"]]},{"id":"ec66ae0a.e405d","type":"function","z":"3e413809.1b57a8","name":"global get Plocount","func":"msg.payload = global.get('Plocount');\nmsg.topic = 'Plocount';\nreturn msg;","outputs":1,"noerr":0,"x":637.3572082519531,"y":2489.2857847213745,"wires":[["9a32dee0.e8528"]]},{"id":"e4fd1f4c.a67bb","type":"function","z":"3e413809.1b57a8","name":"global get Dirtcount","func":"msg.payload = global.get('Dirtcount');\nmsg.topic = 'Dirtcount';\nreturn msg;","outputs":1,"noerr":0,"x":641.3572387695312,"y":2525.2858724594116,"wires":[["9a32dee0.e8528"]]},{"id":"ac514f75.67e77","type":"function","z":"3e413809.1b57a8","name":"global get Timedoutcount","func":"msg.payload = global.get('Timedoutcount');\nmsg.topic = 'Timedoutcount';\nreturn msg;","outputs":1,"noerr":0,"x":650.3571929931641,"y":2563.2859582901,"wires":[["9a32dee0.e8528"]]},{"id":"22911598.4d502a","type":"vis in","z":"3e413809.1b57a8","language":"en","x":841.4761772155762,"y":2026.5713303089142,"wires":[[]]},{"id":"1571e13e.4a745f","type":"inject","z":"3e413809.1b57a8","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":204.92864990234375,"y":2164.85698390007,"wires":[["c67b6ee1.28b7c","55783622.428728","afb86e6a.4f1b2","a2237e2d.352f7","7ccddd15.e36e44","aef09c56.2e6b8","a637a66e.3170b8","9ee99edb.3b6c","9917e732.2b1778","2c0e7a6d.c9f4a6"]]},{"id":"5a3f7dec.68fab4","type":"inject","z":"3e413809.1b57a8","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":306.7381362915039,"y":2478.0000965595245,"wires":[["81fb3203.920ed","7a12dab7.790094","ec66ae0a.e405d","e4fd1f4c.a67bb","ac514f75.67e77","782c1181.a57ce","cd5b4388.647f5"]]},{"id":"9a32dee0.e8528","type":"vis in","z":"3e413809.1b57a8","language":"en","x":924.8810844421387,"y":2491.714045524597,"wires":[[]]},{"id":"6b402f90.a5106","type":"comment","z":"3e413809.1b57a8","name":"Data to VIS","info":"","x":1037.785774230957,"y":1929.7143399715424,"wires":[]},{"id":"6b3350b2.46bb","type":"function","z":"3e413809.1b57a8","name":"global get begin","func":"msg.payload = global.get('begin');\nmsg.topic = 'begin';\nreturn msg;","outputs":1,"noerr":0,"x":1375.309726715088,"y":2047.2855467796326,"wires":[["6733acbb.9afa64"]]},{"id":"4c7d2d13.5b12d4","type":"function","z":"3e413809.1b57a8","name":"global get demo_mode","func":"msg.payload = global.get('demo_mode');\nmsg.topic = 'demo_mode';\nreturn msg;","outputs":1,"noerr":0,"x":1383.3098182678223,"y":2127.2857055664062,"wires":[["6733acbb.9afa64"]]},{"id":"f667521b.18ae5","type":"function","z":"3e413809.1b57a8","name":"global get start_stop","func":"msg.payload = global.get('start_stop');\nmsg.topic = 'start_stop';\nreturn msg;","outputs":1,"noerr":0,"x":1387.5955543518066,"y":2302.714813232422,"wires":[["461cea8a.48d754"]]},{"id":"1d169ad9.419aa5","type":"function","z":"3e413809.1b57a8","name":"global get flt","func":"msg.payload = global.get('flt');\nmsg.topic = 'flt';\nreturn msg;","outputs":1,"noerr":0,"x":1354.2621040344238,"y":2008.7620058059692,"wires":[["6733acbb.9afa64"]]},{"id":"9edd56ea.889b98","type":"function","z":"3e413809.1b57a8","name":"global get man_control","func":"msg.payload = global.get('man_control');\nmsg.topic = 'man_control';\nreturn msg;","outputs":1,"noerr":0,"x":1380.2144508361816,"y":2084.809507369995,"wires":[["6733acbb.9afa64"]]},{"id":"76c4e419.974fac","type":"function","z":"3e413809.1b57a8","name":"global get test_mode","func":"msg.payload = global.get('test_mode');\nmsg.topic = 'test_mode';\nreturn msg;","outputs":1,"noerr":0,"x":1388.97660446167,"y":2164.2855644226074,"wires":[["6733acbb.9afa64"]]},{"id":"c327ae47.59436","type":"inject","z":"3e413809.1b57a8","name":"ONCE A SEC","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":1088.7382545471191,"y":2062.9993419647217,"wires":[["1d169ad9.419aa5","6b3350b2.46bb","9edd56ea.889b98","4c7d2d13.5b12d4","76c4e419.974fac","ef3d8e2f.91d59","525aa9c2.f27bc8","8350e0c1.4a961"]]},{"id":"6733acbb.9afa64","type":"vis in","z":"3e413809.1b57a8","language":"en","x":1634.416847229004,"y":2075.3214473724365,"wires":[[]]},{"id":"e2a6597e.2bc058","type":"inject","z":"3e413809.1b57a8","name":"ONCE A SEC","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":1127.166919708252,"y":2337.6074092388153,"wires":[["f48c0707.f94258","f667521b.18ae5"]]},{"id":"461cea8a.48d754","type":"vis in","z":"3e413809.1b57a8","language":"en","x":1610.4168510437012,"y":2318.7857217788696,"wires":[[]]},{"id":"8350e0c1.4a961","type":"function","z":"3e413809.1b57a8","name":"global get ductPres","func":"msg.payload = global.get('ductPres');\nmsg.topic = 'ductPres';\nreturn msg;","outputs":1,"noerr":0,"x":1390.1668395996094,"y":2241.1901998519897,"wires":[["6733acbb.9afa64"]]},{"id":"782c1181.a57ce","type":"function","z":"3e413809.1b57a8","name":"global get cvcount","func":"msg.payload = global.get('cvcount');\nmsg.topic = 'cvcount';\nreturn msg;","outputs":1,"noerr":0,"x":643.1667098999023,"y":2600.8568897247314,"wires":[["9a32dee0.e8528"]]},{"id":"ef3d8e2f.91d59","type":"function","z":"3e413809.1b57a8","name":"global get hiductpress","func":"msg.payload = global.get('hiductpress');\nmsg.topic = 'hiductpress';\nreturn msg;","outputs":1,"noerr":0,"x":1390.1668395996094,"y":2201.8571920394897,"wires":[["6733acbb.9afa64"]]},{"id":"f5dcf305.d4b3","type":"function","z":"3e413809.1b57a8","name":"global get testhiductpress","func":"msg.payload = global.get('testhiductpress');\nmsg.topic = 'testhiductpress';\nreturn msg;","outputs":1,"noerr":0,"x":479.33350372314453,"y":3377.358456134796,"wires":[["3615b904.19b8d6"]]},{"id":"f6d8c1dc.daa7f","type":"switch","z":"3e413809.1b57a8","name":"set topic testhiductpress","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"testhiductpress","vt":"str"}],"checkall":"true","outputs":1,"x":811.3334121704102,"y":3037.3581047058105,"wires":[["c66e2e80.739ba"]]},{"id":"c66e2e80.739ba","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":1017.3334121704102,"y":3044.3581047058105,"wires":[["2a960249.569f5e"],["91437f53.bb60b"]]},{"id":"2a960249.569f5e","type":"function","z":"3e413809.1b57a8","name":"global reset testhiductpress","func":"global.set('testhiductpress',0);\nreturn;","outputs":1,"noerr":0,"x":1213.0482597351074,"y":3021.762595176697,"wires":[[]]},{"id":"91437f53.bb60b","type":"function","z":"3e413809.1b57a8","name":"global set testhiductpress","func":"global.set('testhiductpress',1);\nreturn;","outputs":1,"noerr":0,"x":1200.666618347168,"y":3057.691502571106,"wires":[[]]},{"id":"e673bb05.761298","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"duct_pressure","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1285.164716720581,"y":841.6602666079998,"wires":[["ca83359b.303588","7eeb3f4.99becc"]]},{"id":"2404b067.96277","type":"function","z":"3e413809.1b57a8","name":"set actPres 0 if blwr 0","func":"if (global.get ('blwr') === 0 && global.get ('tempPres') <= 0.45 ) {\nmsg.payload = 0;\n}\nglobal.set ('actPres', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":896.580940246582,"y":688.2408871650696,"wires":[["57a24bf2.ca86b4","ed28ba7f.0524c8"]]},{"id":"57a24bf2.ca86b4","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"scrub_pressure","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1176.1286087036133,"y":682.681426525116,"wires":[["ca83359b.303588","e5d30607.d4ecd8"]]},{"id":"52f51cc2.982634","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"filter_pressure","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1137.5490112304688,"y":610.950882434845,"wires":[["ca83359b.303588","d39e8dd3.138f6"]]},{"id":"ca83359b.303588","type":"vis in","z":"3e413809.1b57a8","language":"en","x":1389.8111267089844,"y":659.4472729861736,"wires":[[]]},{"id":"30d1b8e4.6d5f48","type":"inject","z":"3e413809.1b57a8","name":"Start ","topic":"","payload":"","payloadType":"num","repeat":"1","crontab":"","once":true,"x":195.19524765014648,"y":771.2587685585022,"wires":[["deaa7f1c.00287","b3ad25a9.9d24c8","385566b4.7a17fa"]]},{"id":"b3ad25a9.9d24c8","type":"function","z":"3e413809.1b57a8","name":"ducted check","func":"if (global.get ('ducted_check') ===1) { \nmsg.payload = 1;\nreturn msg;} \nelse\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":271.4830856323242,"y":875.5769898891449,"wires":[["d965fbd2.ca84a8"]]},{"id":"d965fbd2.ca84a8","type":"switch","z":"3e413809.1b57a8","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":437.7728042602539,"y":872.3429269790649,"wires":[["c703a7b9.2f1a98"],["40d209fa.772a38","fff47cd9.aa968"]]},{"id":"40d209fa.772a38","type":"function","z":"3e413809.1b57a8","name":"get ductPres","func":"msg.payload = global.get('ductPres');\nmsg.topic = 'ductPres';\nreturn msg;","outputs":1,"noerr":0,"x":684.7301330566406,"y":867.9002661705017,"wires":[["e673bb05.761298"]]},{"id":"deaa7f1c.00287","type":"function","z":"3e413809.1b57a8","name":"set Gauge","func":"msg.payload = global.set('gauge', 1);\nmsg.topic = 'gauge';\nreturn msg;","outputs":1,"noerr":0,"x":1193.5586471557617,"y":784.4558711051941,"wires":[["ca83359b.303588"]]},{"id":"bd484446.b7c3c8","type":"comment","z":"3e413809.1b57a8","name":"Pressures to VIS","info":"","x":725.1916198730469,"y":535.3656396865845,"wires":[]},{"id":"815dabc9.d7a538","type":"function","z":"3e413809.1b57a8","name":"get tempPres","func":"msg.payload = global.get ('tempPres');\nreturn msg;","outputs":1,"noerr":0,"x":680.9225654602051,"y":731.6904702186584,"wires":[["a4a16445.b9a3a8"]]},{"id":"a4a16445.b9a3a8","type":"function","z":"3e413809.1b57a8","name":"set actPres","func":"global.set ('actPres', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":852.7206192016602,"y":733.9630398750305,"wires":[["57a24bf2.ca86b4"]]},{"id":"b77b96d4.04e388","type":"function","z":"3e413809.1b57a8","name":"global set actPres if ducted","func":"var actPres = global.get ('actPres') || 0;\nvar newval4 = Math.abs(global.get('tempPres') - global.get ('ductPres'));\nglobal.set('actPres', newval4);\nmsg.topic = 'scrubber_pressure';\nmsg.payload = global.get('actPres');\nreturn msg;","outputs":1,"noerr":0,"x":1246.7824325561523,"y":935.5837044715881,"wires":[["a20b678b.132428","c21c5b87.fe76a8"]]},{"id":"e36151a0.0cfee","type":"switch","z":"3e413809.1b57a8","name":"blwr status","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"btwn","v":"1","vt":"num","v2":"3","v2t":"num"}],"checkall":"true","outputs":2,"x":394.0016860961914,"y":629.3556690216064,"wires":[["4f8c876c.f957c8"],["54a5038d.42aefc"]]},{"id":"aded6902.02b1d8","type":"function","z":"3e413809.1b57a8","name":"get tempPres","func":"msg.payload = global.get ('tempPres');\nreturn msg;","outputs":1,"noerr":0,"x":689.3972969055176,"y":686.5390610694885,"wires":[["2404b067.96277"]]},{"id":"fff47cd9.aa968","type":"function","z":"3e413809.1b57a8","name":"BLWR STATUS","func":"msg.payload = global.get('blwr');\nreturn msg;","outputs":1,"noerr":0,"x":666.5387649536133,"y":934.8168749809265,"wires":[["9b570f6d.6dfd2"]]},{"id":"9b570f6d.6dfd2","type":"switch","z":"3e413809.1b57a8","name":"blwr status","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"btwn","v":"1","vt":"num","v2":"3","v2t":"num"}],"checkall":"true","outputs":2,"x":1033.9669494628906,"y":944.5865206718445,"wires":[["b77b96d4.04e388"],["9e5856f.76b48a8"]]},{"id":"a20b678b.132428","type":"function","z":"3e413809.1b57a8","name":"set actPres 0 if blwr 0","func":"if (global.get ('blwr') === 0 && global.get ('actPres') <= 0.45 ) {\nmsg.payload = 0;\n}\nglobal.set ('actPres', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1496.700210571289,"y":893.2056794166565,"wires":[["137a43ed.21154c","d96ee1e0.923fa"]]},{"id":"137a43ed.21154c","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"scrub_pressure","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1541.803367614746,"y":808.8683438301086,"wires":[["ca83359b.303588","952af6df.0363e8"]]},{"id":"9e5856f.76b48a8","type":"function","z":"3e413809.1b57a8","name":"global set actPres if ducted","func":"var actPres = global.get ('actPres') || 0;\nvar newval4 = Math.abs(global.get('tempPres') - global.get ('ductPres'));\nglobal.set('actPres', newval4);\nmsg.topic = 'scrubber_pressure';\nmsg.payload = global.get('actPres');\nreturn msg;","outputs":1,"noerr":0,"x":1247.7719192504883,"y":971.559238910675,"wires":[["137a43ed.21154c"]]},{"id":"f3943417.912cd8","type":"comment","z":"3e413809.1b57a8","name":"If ducted, scrubber is difference of actPres and ductPres","info":"","x":1150.731544494629,"y":897.3470673561096,"wires":[]},{"id":"d96ee1e0.923fa","type":"debug","z":"3e413809.1b57a8","name":"","active":false,"console":"false","complete":"false","x":1679.5519943237305,"y":925.1224789619446,"wires":[]},{"id":"c0d83dae.245b9","type":"debug","z":"3e413809.1b57a8","name":"","active":false,"console":"false","complete":"false","x":1682.5491256713867,"y":977.1253476142883,"wires":[]},{"id":"f41acdf1.4ccdb","type":"debug","z":"3e413809.1b57a8","name":"","active":false,"console":"false","complete":"false","x":1037.5520858764648,"y":563.1196422576904,"wires":[]},{"id":"ed28ba7f.0524c8","type":"debug","z":"3e413809.1b57a8","name":"","active":false,"console":"false","complete":"false","x":1157.813362121582,"y":647.0287537574768,"wires":[]},{"id":"d39e8dd3.138f6","type":"debug","z":"3e413809.1b57a8","name":"","active":false,"console":"false","complete":"false","x":1479.540657043457,"y":571.7560248374939,"wires":[]},{"id":"e5d30607.d4ecd8","type":"debug","z":"3e413809.1b57a8","name":"","active":false,"console":"false","complete":"false","x":1547.5435028076172,"y":681.7531151771545,"wires":[]},{"id":"7eeb3f4.99becc","type":"debug","z":"3e413809.1b57a8","name":"","active":false,"console":"false","complete":"false","x":1604.267936706543,"y":716.7559933662415,"wires":[]},{"id":"952af6df.0363e8","type":"debug","z":"3e413809.1b57a8","name":"","active":false,"console":"false","complete":"false","x":1754.2793350219727,"y":836.7559847831726,"wires":[]},{"id":"c21c5b87.fe76a8","type":"debug","z":"3e413809.1b57a8","name":"","active":false,"console":"false","complete":"false","x":1560.5463180541992,"y":1054.4832882881165,"wires":[]},{"id":"525aa9c2.f27bc8","type":"function","z":"3e413809.1b57a8","name":"global get tempPres","func":"msg.payload = global.get('tempPres');\nmsg.topic = 'tempPres';\nreturn msg;","outputs":1,"noerr":0,"x":1385.5672874450684,"y":1970.6233491897583,"wires":[["6733acbb.9afa64"]]},{"id":"385566b4.7a17fa","type":"function","z":"3e413809.1b57a8","name":"BLWR STATUS","func":"msg.payload = global.get('blwr');\nreturn msg;","outputs":1,"noerr":0,"x":187.46776580810547,"y":653.0476803779602,"wires":[["e36151a0.0cfee"]]},{"id":"c703a7b9.2f1a98","type":"function","z":"3e413809.1b57a8","name":"BLWR STATUS","func":"msg.payload = global.get('blwr');\nreturn msg;","outputs":1,"noerr":0,"x":465.87024688720703,"y":811.1083493232727,"wires":[["7e743d45.e1a2a4"]]},{"id":"7e743d45.e1a2a4","type":"switch","z":"3e413809.1b57a8","name":"blwr status","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"btwn","v":"1","vt":"num","v2":"3","v2t":"num"}],"checkall":"true","outputs":2,"x":452.9755859375,"y":723.2735333442688,"wires":[["aded6902.02b1d8"],["815dabc9.d7a538"]]},{"id":"e0de1dd7.ef129","type":"comment","z":"3e413809.1b57a8","name":"For Alarm-Only Unit, flash warning alarms","info":"","x":1007.2153462001256,"y":3407.8102929251527,"wires":[]},{"id":"2fd52b72.ee3124","type":"inject","z":"3e413809.1b57a8","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":254.00106048583984,"y":3672.631721496582,"wires":[["7dddee3a.bdb49","5fe5f431.9105dc","70f72ce2.4d64d4","483ce5b8.f09f8c"]]},{"id":"7dddee3a.bdb49","type":"function","z":"3e413809.1b57a8","name":"global get warnPhi","func":"msg.payload = global.get('warnPhi');\nmsg.topic = 'warnPhi';\nreturn msg;","outputs":1,"noerr":0,"x":511.5725631713867,"y":3501.631901741028,"wires":[["ba4b0903.c13868"]]},{"id":"5fe5f431.9105dc","type":"function","z":"3e413809.1b57a8","name":"global get warnPlo","func":"msg.payload = global.get('warnPlo');\nmsg.topic = 'warnPlo';\nreturn msg;","outputs":1,"noerr":0,"x":516.5725402832031,"y":3638.7741203308105,"wires":[["2aab92be.b5d95e"]]},{"id":"70f72ce2.4d64d4","type":"function","z":"3e413809.1b57a8","name":"global get warnDirt","func":"msg.payload = global.get('warnDirt');\nmsg.topic = 'warnDirt';\nreturn msg;","outputs":1,"noerr":0,"x":553.786865234375,"y":3907.5603637695312,"wires":[["725abf46.f8d77"]]},{"id":"483ce5b8.f09f8c","type":"function","z":"3e413809.1b57a8","name":"global get warn_timedout","func":"msg.payload = global.get('warn_timedout');\nmsg.topic = 'warn_timedout';\nreturn msg;","outputs":1,"noerr":0,"x":522.7987861633301,"y":3995.571436882019,"wires":[["600dd542.185e0c"]]},{"id":"5311befd.4f89f","type":"vis in","z":"3e413809.1b57a8","language":"en","x":1593.7866439819336,"y":3843.917697906494,"wires":[[]]},{"id":"725abf46.f8d77","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":741.3582382202148,"y":3836.131076812744,"wires":[["e64d0bad.107168","b4813309.fb22b"],["15f1d27e.c992fe"]]},{"id":"b4813309.fb22b","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"warnDirt","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1350.501075744629,"y":3879.4166355133057,"wires":[["5311befd.4f89f"]]},{"id":"1791fb89.fe9f04","type":"trigger","z":"3e413809.1b57a8","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":1002.9297409057617,"y":3914.559920310974,"wires":[["bd102ca8.0c3cb"]]},{"id":"4ae0c850.a10758","type":"trigger","z":"3e413809.1b57a8","op1":"0","op2":"1","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":1003.9297409057617,"y":3987.559920310974,"wires":[["a0f09523.43fb48"]]},{"id":"e28b5fec.951a5","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":824.9298095703125,"y":3914.5598249435425,"wires":[["1791fb89.fe9f04"]]},{"id":"5461fa88.fa2724","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":817.929817199707,"y":3973.5598249435425,"wires":[["4ae0c850.a10758"]]},{"id":"a0f09523.43fb48","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1139.3463668823242,"y":3975.726424217224,"wires":[["1791fb89.fe9f04"],["ab57511e.656a9","e28b5fec.951a5"]]},{"id":"bd102ca8.0c3cb","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1140.8463668823242,"y":3914.726424217224,"wires":[["ab57511e.656a9","5461fa88.fa2724"],["4ae0c850.a10758"]]},{"id":"ab57511e.656a9","type":"rbe","z":"3e413809.1b57a8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1330.8463668823242,"y":3951.726424217224,"wires":[["b4813309.fb22b"]]},{"id":"e64d0bad.107168","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1051.072608947754,"y":3845.988721847534,"wires":[["4ae0c850.a10758","1791fb89.fe9f04"]]},{"id":"600dd542.185e0c","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":726.8011093139648,"y":4019.266819000244,"wires":[["b7347a5f.1389e8","f4297712.12eda8"],["bc2d7965.857448"]]},{"id":"f4297712.12eda8","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"warn_timedout","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1283.943920135498,"y":4082.552369117737,"wires":[["5311befd.4f89f"]]},{"id":"3ac036b3.1be0ba","type":"trigger","z":"3e413809.1b57a8","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":936.3725852966309,"y":4117.695653915405,"wires":[["a0535531.ef9d98"]]},{"id":"676c10c0.d2399","type":"trigger","z":"3e413809.1b57a8","op1":"0","op2":"1","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":937.3725852966309,"y":4190.695653915405,"wires":[["62ab31bc.6f249"]]},{"id":"d6113b50.fb3108","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":758.3726539611816,"y":4117.695558547974,"wires":[["3ac036b3.1be0ba"]]},{"id":"5c96efdc.d59f3","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":751.3726615905762,"y":4176.695558547974,"wires":[["676c10c0.d2399"]]},{"id":"62ab31bc.6f249","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1072.7892112731934,"y":4178.862157821655,"wires":[["3ac036b3.1be0ba"],["89e5cee7.a810f","d6113b50.fb3108"]]},{"id":"a0535531.ef9d98","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1074.2892112731934,"y":4117.862157821655,"wires":[["89e5cee7.a810f","5c96efdc.d59f3"],["676c10c0.d2399"]]},{"id":"89e5cee7.a810f","type":"rbe","z":"3e413809.1b57a8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1264.2892112731934,"y":4154.862157821655,"wires":[["f4297712.12eda8"]]},{"id":"b7347a5f.1389e8","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":984.515453338623,"y":4049.1244554519653,"wires":[["676c10c0.d2399","3ac036b3.1be0ba"]]},{"id":"ba4b0903.c13868","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":682.0010604858398,"y":3433.131809234619,"wires":[["78ed6a78.c5d6a4","6fd7d2e0.acf34c"],["93a7e48d.477128"]]},{"id":"6fd7d2e0.acf34c","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"warnPhi","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1292.143886566162,"y":3489.417145729065,"wires":[["5311befd.4f89f"]]},{"id":"86597224.966cd","type":"trigger","z":"3e413809.1b57a8","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":944.5725517272949,"y":3524.5604305267334,"wires":[["b8c37452.c5f088"]]},{"id":"16eeebfc.e0bcc4","type":"trigger","z":"3e413809.1b57a8","op1":"0","op2":"1","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":945.5725517272949,"y":3597.5604305267334,"wires":[["91ea329c.9ed86"]]},{"id":"8a0611fc.26384","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":766.5726203918457,"y":3524.5603351593018,"wires":[["86597224.966cd"]]},{"id":"ce15d148.b83ae","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":759.5726280212402,"y":3583.5603351593018,"wires":[["16eeebfc.e0bcc4"]]},{"id":"91ea329c.9ed86","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1080.9891777038574,"y":3585.7269344329834,"wires":[["86597224.966cd"],["f1dba28e.6e6a7","8a0611fc.26384"]]},{"id":"b8c37452.c5f088","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1082.4891777038574,"y":3524.7269344329834,"wires":[["f1dba28e.6e6a7","ce15d148.b83ae"],["16eeebfc.e0bcc4"]]},{"id":"f1dba28e.6e6a7","type":"rbe","z":"3e413809.1b57a8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1272.4891777038574,"y":3561.7269344329834,"wires":[["6fd7d2e0.acf34c"]]},{"id":"78ed6a78.c5d6a4","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":992.7154197692871,"y":3455.9892320632935,"wires":[["16eeebfc.e0bcc4","86597224.966cd"]]},{"id":"2aab92be.b5d95e","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":687.0010604858398,"y":3630.381809234619,"wires":[["f86a0249.db8b5","879f952d.1208c8"],["e82f637c.c68bd"]]},{"id":"879f952d.1208c8","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"warnPlo","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1272.143886566162,"y":3680.667145729065,"wires":[["5311befd.4f89f"]]},{"id":"3c5e849.523427c","type":"trigger","z":"3e413809.1b57a8","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":924.5725517272949,"y":3715.8104305267334,"wires":[["5992aa0b.95d734"]]},{"id":"18fa6f28.694241","type":"trigger","z":"3e413809.1b57a8","op1":"0","op2":"1","op1type":"num","op2type":"num","duration":"2","extend":false,"units":"s","reset":"reset","name":"","x":925.5725517272949,"y":3788.8104305267334,"wires":[["8b8cdd5f.1893c"]]},{"id":"4afbdf6d.fbaaf","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":746.5726203918457,"y":3715.8103351593018,"wires":[["3c5e849.523427c"]]},{"id":"280203f6.1ce7dc","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":739.5726280212402,"y":3774.8103351593018,"wires":[["18fa6f28.694241"]]},{"id":"8b8cdd5f.1893c","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1060.9891777038574,"y":3776.9769344329834,"wires":[["3c5e849.523427c"],["801aad1c.db533","4afbdf6d.fbaaf"]]},{"id":"5992aa0b.95d734","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1062.4891777038574,"y":3715.9769344329834,"wires":[["801aad1c.db533","280203f6.1ce7dc"],["18fa6f28.694241"]]},{"id":"801aad1c.db533","type":"rbe","z":"3e413809.1b57a8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1252.4891777038574,"y":3752.9769344329834,"wires":[["879f952d.1208c8"]]},{"id":"f86a0249.db8b5","type":"change","z":"3e413809.1b57a8","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":972.7154197692871,"y":3647.2392320632935,"wires":[["18fa6f28.694241","3c5e849.523427c"]]},{"id":"ecad60af.fb443","type":"function","z":"3e413809.1b57a8","name":"set warnPhi alarm","func":"global.set('warnPhi',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":444.57150650024414,"y":4070.3339710235596,"wires":[[]]},{"id":"419e47de.4604f8","type":"function","z":"3e413809.1b57a8","name":"set warnPlo alarm","func":"global.set('warnPlo',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":447.52621841430664,"y":4140.205474853516,"wires":[[]]},{"id":"aaca5e5a.1b251","type":"function","z":"3e413809.1b57a8","name":"set warnDirt alarm","func":"global.set('warnDirt',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":448.5262260437012,"y":4186.205451011658,"wires":[[]]},{"id":"735e83b.1bb627c","type":"function","z":"3e413809.1b57a8","name":"set warn_timedout","func":"global.set('warn_timedout',msg.payload);\nreturn;","outputs":1,"noerr":0,"x":447.5264320373535,"y":4243.205352783203,"wires":[[]]},{"id":"f796f4ed.b15e48","type":"inject","z":"3e413809.1b57a8","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":241.8442268371582,"y":4057.3339805603027,"wires":[["ecad60af.fb443"]]},{"id":"20a51d61.ff0fe2","type":"inject","z":"3e413809.1b57a8","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":245.1776008605957,"y":4089.667336463928,"wires":[["ecad60af.fb443"]]},{"id":"9c120a8f.04eee8","type":"inject","z":"3e413809.1b57a8","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":241.84423446655273,"y":4126.333988189697,"wires":[["419e47de.4604f8"]]},{"id":"bcf04a7c.1de488","type":"inject","z":"3e413809.1b57a8","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":246.17760848999023,"y":4157.667359352112,"wires":[["419e47de.4604f8"]]},{"id":"c2dba9b1.a74048","type":"inject","z":"3e413809.1b57a8","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":234.8442268371582,"y":4191.328320503235,"wires":[["aaca5e5a.1b251"]]},{"id":"a7ebd544.a03068","type":"inject","z":"3e413809.1b57a8","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":235.17760467529297,"y":4222.661661148071,"wires":[["aaca5e5a.1b251"]]},{"id":"86a4e6be.1c18a8","type":"inject","z":"3e413809.1b57a8","name":"ALRM 0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":232.83002471923828,"y":4254.333971977234,"wires":[["735e83b.1bb627c"]]},{"id":"edb1cfd8.19955","type":"inject","z":"3e413809.1b57a8","name":"ALRM 1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":234.16339874267578,"y":4281.667327880859,"wires":[["735e83b.1bb627c"]]},{"id":"93a7e48d.477128","type":"trigger","z":"3e413809.1b57a8","op1":"1","op2":"","op1type":"num","op2type":"nul","duration":"2","extend":true,"units":"s","reset":"99","name":"","x":794.6667709350586,"y":3467.715061187744,"wires":[["86597224.966cd"]]},{"id":"e82f637c.c68bd","type":"trigger","z":"3e413809.1b57a8","op1":"1","op2":"","op1type":"num","op2type":"nul","duration":"2","extend":true,"units":"s","reset":"99","name":"","x":797.6667709350586,"y":3667.715061187744,"wires":[["3c5e849.523427c"]]},{"id":"15f1d27e.c992fe","type":"trigger","z":"3e413809.1b57a8","op1":"1","op2":"","op1type":"num","op2type":"nul","duration":"2","extend":true,"units":"s","reset":"99","name":"","x":858.6667709350586,"y":3866.715061187744,"wires":[["1791fb89.fe9f04"]]},{"id":"bc2d7965.857448","type":"trigger","z":"3e413809.1b57a8","op1":"1","op2":"","op1type":"num","op2type":"nul","duration":"2","extend":true,"units":"s","reset":"99","name":"","x":818.6667709350586,"y":4068.715061187744,"wires":[["3ac036b3.1be0ba"]]},{"id":"fce6df51.8e0dd","type":"inject","z":"3e413809.1b57a8","name":"","topic":"","payload":"xxx","payloadType":"str","repeat":"","crontab":"","once":false,"x":241.33334350585938,"y":1424.381021976471,"wires":[["a7be452f.e6ee08"]]},{"id":"a7be452f.e6ee08","type":"function","z":"3e413809.1b57a8","name":"","func":"msg.payload = global.get('rsrtest');\nreturn msg;","outputs":1,"noerr":0,"x":363.8333435058594,"y":1380.8811039924622,"wires":[["ea78d68a.8d9dd8"]]},{"id":"ea78d68a.8d9dd8","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":460.7500343322754,"y":1425.2144494056702,"wires":[["6af2935a.eff63c"],[]]},{"id":"6af2935a.eff63c","type":"trigger","z":"3e413809.1b57a8","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"2","extend":false,"units":"s","reset":"","name":"","x":611.9167156219482,"y":1423.047863483429,"wires":[[]]},{"id":"a8bb2552.04cc88","type":"comment","z":"3e413809.1b57a8","name":"test cycle","info":"","x":275.3475570678711,"y":1337.6594967842102,"wires":[]},{"id":"c747c90e.594af8","type":"comment","z":"3e413809.1b57a8","name":"Display last startup","info":"","x":514.4047393798828,"y":63.857187271118164,"wires":[]},{"id":"1a305fef.addaf","type":"inject","z":"3e413809.1b57a8","name":"","topic":"laststartup","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"x":191.4047393798828,"y":107.85718727111816,"wires":[["3f184b56.ad4b54"]]},{"id":"f6c67641.3e9ab8","type":"vis in","z":"3e413809.1b57a8","language":"en","x":877.9047393798828,"y":148.85718727111816,"wires":[[]]},{"id":"2b97df2.48b3b2","type":"function","z":"3e413809.1b57a8","name":"set last startup","func":"msg.payload = new Date().toString();\nglobal.set ('laststartup', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":559.9047393798828,"y":106.85718727111816,"wires":[["d7faa873.acc168"]]},{"id":"d7faa873.acc168","type":"debug","z":"3e413809.1b57a8","name":"","active":false,"console":"false","complete":"false","x":790.4047393798828,"y":88.85718727111816,"wires":[]},{"id":"73f6097e.35ce28","type":"inject","z":"3e413809.1b57a8","name":"pulse","topic":"","payload":"0","payloadType":"str","repeat":"5","crontab":"","once":false,"x":474.4047393798828,"y":152.85718727111816,"wires":[["2124bf35.cb549"]]},{"id":"2124bf35.cb549","type":"function","z":"3e413809.1b57a8","name":"global get laststartup","func":"msg.payload = global.get('laststartup');\nmsg.topic = 'laststartup';\nreturn msg;","outputs":1,"noerr":0,"x":662.9047393798828,"y":151.85718727111816,"wires":[["f6c67641.3e9ab8"]]},{"id":"3f184b56.ad4b54","type":"delay","z":"3e413809.1b57a8","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":388.4047393798828,"y":108.85718727111816,"wires":[["2b97df2.48b3b2"]]},{"id":"f39e1a50.aaa538","type":"switch","z":"3e413809.1b57a8","name":"set topic start_stop_all","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"start_stop_all","vt":"str"}],"checkall":"true","outputs":1,"x":367.00013732910156,"y":1815.0002875328064,"wires":[["68f64490.685f1c"]]},{"id":"68f64490.685f1c","type":"function","z":"3e413809.1b57a8","name":"global set start_stop_all","func":"global.set('start_stop_all',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":780.7148857116699,"y":1818.4049620628357,"wires":[[]]},{"id":"f48c0707.f94258","type":"function","z":"3e413809.1b57a8","name":"global get start_stop_all","func":"msg.payload = global.get('start_stop_all');\nmsg.topic = 'start_stop_all';\nreturn msg;","outputs":1,"noerr":0,"x":1399.0002479553223,"y":2357.0006742477417,"wires":[["461cea8a.48d754"]]},{"id":"cd5b4388.647f5","type":"function","z":"3e413809.1b57a8","name":"global get safety","func":"msg.payload = global.get('safety');\nmsg.topic = 'safety';\nreturn msg;","outputs":1,"noerr":0,"x":642.6506805419922,"y":2639.551152229309,"wires":[["9a32dee0.e8528"]]},{"id":"d6ee6807.cc9ab8","type":"switch","z":"3e413809.1b57a8","name":"set topic testsafety","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"testsafety","vt":"str"}],"checkall":"true","outputs":1,"x":789.2000732421875,"y":3144.2004957199097,"wires":[["b5bf3be1.e48268"]]},{"id":"b5bf3be1.e48268","type":"switch","z":"3e413809.1b57a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"}],"checkall":"true","outputs":2,"x":993.2000198364258,"y":3173.2004957199097,"wires":[["f423ae30.df6b9"],["34e65fed.912f3"]]},{"id":"f423ae30.df6b9","type":"function","z":"3e413809.1b57a8","name":"global reset testsafety","func":"global.set('testsafety',0);\nreturn;","outputs":1,"noerr":0,"x":1194.9148712158203,"y":3168.6051836013794,"wires":[[]]},{"id":"34e65fed.912f3","type":"function","z":"3e413809.1b57a8","name":"global set testsafety","func":"global.set('testsafety',1);\nglobal.set('testalarm',5);\nreturn;","outputs":1,"noerr":0,"x":1196.5332202911377,"y":3204.5340843200684,"wires":[[]]},{"id":"f33ead73.7bebb","type":"function","z":"3e413809.1b57a8","name":"global get testsafety","func":"msg.payload = global.get('testsafety');\nmsg.topic = 'testsafety';\nreturn msg;","outputs":1,"noerr":0,"x":487.2000274658203,"y":3269.0006465911865,"wires":[["3615b904.19b8d6"]]},{"id":"cd07ce2c.a4b03","type":"vis in","z":"3e413809.1b57a8","language":"en","x":147.79994010925293,"y":1730.4002089500427,"wires":[["394981f5.d6f05e","7425001f.a8252","d3929236.b240f","fa0f37cb.5e5c08","36426c8a.148a84","f39e1a50.aaa538"]]},{"id":"36467140.8318ae","type":"config","z":"3e413809.1b57a8","name":"Initialize Variables at Startup","properties":[{"p":"actFilt","pt":"global","to":"0","tot":"num"},{"p":"actPres","pt":"global","to":"0","tot":"num"},{"p":"alarm","pt":"global","to":"0","tot":"num"},{"p":"begin","pt":"global","to":"0","tot":"num"},{"p":"ballchk","pt":"global","to":"0","tot":"num"},{"p":"ballvalve","pt":"global","to":"0","tot":"num"},{"p":"blwr","pt":"global","to":"0","tot":"num"},{"p":"brtemp","pt":"global","to":"0","tot":"num"},{"p":"bvtemp","pt":"global","to":"0","tot":"num"},{"p":"conveyor","pt":"global","to":"0","tot":"num"},{"p":"cvtemp","pt":"global","to":"0","tot":"num"},{"p":"demo_mode","pt":"global","to":"0","tot":"num"},{"p":"dynFill","pt":"global","to":"0","tot":"num"},{"p":"filterlife","pt":"global","to":"0","tot":"num"},{"p":"flt","pt":"global","to":"0","tot":"num"},{"p":"fspasstrue","pt":"global","to":"0","tot":"num"},{"p":"fspassword","pt":"global","to":"0","tot":"num"},{"p":"gate","pt":"global","to":"0","tot":"num"},{"p":"guage","pt":"global","to":"1","tot":"num"},{"p":"hiductpress","pt":"global","to":"0","tot":"num"},{"p":"man_control","pt":"global","to":"0","tot":"num"},{"p":"man_fill","pt":"global","to":"0","tot":"num"},{"p":"pcstep1","pt":"global","to":"0","tot":"num"},{"p":"pcstep2","pt":"global","to":"0","tot":"num"},{"p":"pcstep3","pt":"global","to":"0","tot":"num"},{"p":"pcstep4","pt":"global","to":"0","tot":"num"},{"p":"pcstep5","pt":"global","to":"0","tot":"num"},{"p":"pcstep6","pt":"global","to":"0","tot":"num"},{"p":"pcstep7","pt":"global","to":"0","tot":"num"},{"p":"permPhi","pt":"global","to":"0","tot":"num"},{"p":"permPlo","pt":"global","to":"0","tot":"num"},{"p":"permDirt","pt":"global","to":"0","tot":"num"},{"p":"press_calibration","pt":"global","to":"0","tot":"num"},{"p":"realductpress","pt":"global","to":"0","tot":"num"},{"p":"realfiltpress","pt":"global","to":"0","tot":"num"},{"p":"realscrubpress","pt":"global","to":"0","tot":"num"},{"p":"rawDuct","pt":"global","to":"0","tot":"num"},{"p":"rawFilt","pt":"global","to":"0","tot":"num"},{"p":"rawScrub","pt":"global","to":"0","tot":"num"},{"p":"reset","pt":"global","to":"0","tot":"num"},{"p":"rsrtest","pt":"global","to":"0","tot":"num"},{"p":"safety","pt":"global","to":"0","tot":"num"},{"p":"setFilt","pt":"global","to":"0","tot":"num"},{"p":"start_stop","pt":"global","to":"0","tot":"num"},{"p":"start_stop_all","pt":"global","to":"0","tot":"num"},{"p":"step1","pt":"global","to":"0","tot":"num"},{"p":"step2","pt":"global","to":"0","tot":"num"},{"p":"step3","pt":"global","to":"0","tot":"num"},{"p":"step4","pt":"global","to":"0","tot":"num"},{"p":"step5","pt":"global","to":"0","tot":"num"},{"p":"step6","pt":"global","to":"0","tot":"num"},{"p":"step7","pt":"global","to":"0","tot":"num"},{"p":"table","pt":"global","to":"0","tot":"num"},{"p":"test_mode","pt":"global","to":"0","tot":"num"},{"p":"tempPres","pt":"global","to":"0","tot":"num"},{"p":"timedout","pt":"global","to":"0","tot":"num"},{"p":"timedout_alarm","pt":"global","to":"0","tot":"num"},{"p":"tune","pt":"global","to":"0","tot":"num"},{"p":"warnDirt","pt":"global","to":"0","tot":"num"},{"p":"warnPhi","pt":"global","to":"0","tot":"num"},{"p":"warnPlo","pt":"global","to":"0","tot":"num"},{"p":"warn_timedout","pt":"global","to":"0","tot":"num"}],"active":false,"x":968.0571060180664,"y":347.1714324951172,"wires":[]},{"id":"56f7541d.0ec12c","type":"inject","z":"f6e410f4.f25f1","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":true,"x":1206.4999675750732,"y":194.50000953674316,"wires":[["c7820913.639e58"]]},{"id":"c7820913.639e58","type":"function","z":"f6e410f4.f25f1","name":"set phase","func":"if (global.get ('phase_check')===0) \n{global.set('phase', 1);\nreturn msg;}\n","outputs":1,"noerr":0,"x":1306.142837524414,"y":243.2142677307129,"wires":[["a7ce2b15.0baf48"]]},{"id":"5b2a75db.f78f1c","type":"comment","z":"f6e410f4.f25f1","name":"If not 3 phase, set phase at startup","info":"\n","x":1383.9999675750732,"y":123.50000953674316,"wires":[]},{"id":"a7c0bfd8.54f55","type":"debug","z":"294ea918.69a4f6","name":"","active":false,"console":"false","complete":"false","x":1138.5,"y":206,"wires":[]},{"id":"cd346501.9d2cb8","type":"debug","z":"e0c1b2eb.002b2","name":"","active":false,"console":"false","complete":"false","x":1156.6428604125977,"y":704.5714244842529,"wires":[]},{"id":"a7ce2b15.0baf48","type":"debug","z":"f6e410f4.f25f1","name":"","active":false,"console":"false","complete":"false","x":1485.7142532893588,"y":230.357152393886,"wires":[]},{"id":"b6cfcd6e.20411","type":"comment","z":"3e413809.1b57a8","name":"to be deleted","info":"","x":1104.2857666015625,"y":185.71429443359375,"wires":[]},{"id":"3c9f8a4e.4aac26","type":"function","z":"f6e410f4.f25f1","name":"Array","func":"\n\nvar newMsgPS1 = { payload: msg.payload [0] };\nvar newMsgPS2 = { payload: msg.payload [1] };\nreturn [newMsgPS1, newMsgPS2];\n","outputs":"2","noerr":0,"x":770.0000152587891,"y":613.3928928375244,"wires":[["1cad3d2b.6a7703","24c6b96f.fa26c6"],["7ab97b2e.4489b4","fa0a54e9.4d41e8"]]},{"id":"1cad3d2b.6a7703","type":"range","z":"f6e410f4.f25f1","minin":"0","maxin":"100","minout":"0","maxout":"15.00","action":"scale","round":false,"property":"payload","name":"IMPINGER PRESS A/D1","x":1035.84521484375,"y":601.666690826416,"wires":[["49813af2.fd9dd4","aaa5ed6c.3ddb7","31f445f4.40583a"]]},{"id":"7ab97b2e.4489b4","type":"range","z":"f6e410f4.f25f1","minin":"0","maxin":"100","minout":"0.00","maxout":"15.00","action":"scale","round":false,"property":"payload","name":"FAN PRESS A/D 2","x":1017.0476684570312,"y":641.3571014404297,"wires":[["5654ab46.66d204","81dd1fdf.0f337","2fc794d7.be689c"]]},{"id":"31f445f4.40583a","type":"debug","z":"f6e410f4.f25f1","name":"","active":false,"console":"false","complete":"false","x":1262.8333740234375,"y":598,"wires":[]},{"id":"2fc794d7.be689c","type":"debug","z":"f6e410f4.f25f1","name":"","active":false,"console":"false","complete":"false","x":1260.5,"y":634,"wires":[]},{"id":"a1d83139.d1413","type":"modbus-getter","z":"f6e410f4.f25f1","name":"Array PS3","showStatusActivities":false,"showErrors":false,"logIOActivities":false,"unitid":"","dataType":"HoldingRegister","adr":"31","quantity":"1","server":"ab4cd21.673823","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"x":754.7619094848633,"y":875.4761981964111,"wires":[["dd6b69c.69abf98"],[]]},{"id":"dd6b69c.69abf98","type":"range","z":"f6e410f4.f25f1","minin":"0","maxin":"100","minout":"0.00","maxout":"15.00","action":"scale","round":false,"name":"DUCT PRESS","x":965.4762153625488,"y":866.6666021347046,"wires":[["9ed9d4f1.bc4158","7720e3ca.9c168c","af9712c0.ed0d5"]]},{"id":"af9712c0.ed0d5","type":"debug","z":"f6e410f4.f25f1","name":"","active":true,"console":"false","complete":"false","x":1213.9286422729492,"y":815.4761924743652,"wires":[]},{"id":"8c1a6fad.964f6","type":"inject","z":"f6e410f4.f25f1","name":"0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":136.66664632161473,"y":431.666615327199,"wires":[["2181a800.19b4c8"]]},{"id":"ab3d2e56.6499d","type":"inject","z":"f6e410f4.f25f1","name":"1","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":139.9999771118164,"y":466.6666178703308,"wires":[["2181a800.19b4c8"]]},{"id":"2181a800.19b4c8","type":"function","z":"f6e410f4.f25f1","name":"set desk_unit","func":"global.set('desk_unit', msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":319.7618637084961,"y":443.33333110809326,"wires":[[]]},{"id":"59cd6578.fbcb7c","type":"debug","z":"f6e410f4.f25f1","name":"","active":false,"console":"false","complete":"false","x":1316.5,"y":430,"wires":[]},{"id":"f43ce2c7.66b7a","type":"debug","z":"f6e410f4.f25f1","name":"","active":false,"console":"false","complete":"false","x":1361.5,"y":669,"wires":[]},{"id":"d34e7f4c.10e27","type":"debug","z":"f6e410f4.f25f1","name":"","active":false,"console":"false","complete":"false","x":1404.928596496582,"y":857.1428852081299,"wires":[]},{"id":"c741bbae.cb3d18","type":"comment","z":"75124cce.05e034","name":"custom set setFilt to just actFilt","info":"","x":869,"y":745,"wires":[]},{"id":"63457d19.a457b4","type":"comment","z":"5acbf982.b822a8","name":"Hi Duct Pressure set to 9.5 for Tenneco","info":"","x":1481,"y":326,"wires":[]},{"id":"32cf936c.c54cac","type":"debug","z":"f6e410f4.f25f1","name":"","active":false,"console":"false","complete":"false","x":1255.5,"y":72,"wires":[]},{"id":"749411cf.99afc","type":"debug","z":"f6e410f4.f25f1","name":"","active":false,"console":"false","complete":"false","x":1258.5,"y":302,"wires":[]},{"id":"31318fdd.45ddb","type":"debug","z":"f6e410f4.f25f1","name":"","active":false,"console":"false","complete":"false","x":1252.5,"y":358,"wires":[]},{"id":"ad747be2.af02c8","type":"modbus-read","z":"f6e410f4.f25f1","name":"Float Switch INPUT 2","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"Input","adr":"1","quantity":"1","rate":"3","rateUnit":"s","delayOnStart":false,"startDelayTime":"","server":"ab4cd21.673823","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":266,"y":115,"wires":[["f56b20ee.0982c"],[]]},{"id":"bedffa88.365d08","type":"modbus-read","z":"f6e410f4.f25f1","name":"PHASE RELAY INPUT 1","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"Input","adr":"0","quantity":"1","rate":"3","rateUnit":"s","delayOnStart":false,"startDelayTime":"","server":"ab4cd21.673823","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":278.2016372680664,"y":188.8095245361328,"wires":[["10afb247.d6475e"],[]]},{"id":"45f08cae.3b3394","type":"modbus-read","z":"f6e410f4.f25f1","name":"SAFETY  INPUT 3","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"Input","adr":"2","quantity":"1","rate":"3","rateUnit":"s","delayOnStart":false,"startDelayTime":"","server":"ab4cd21.673823","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":262.76812744140625,"y":241.99925231933594,"wires":[["95814c3b.2b878"],[]]},{"id":"71f77236.a0afcc","type":"function","z":"f6e410f4.f25f1","name":"global get blwr","func":"if (global.get ('blwr') <= 2 && \nglobal.get ('blwr') >0) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":410.20245361328125,"y":1526.25,"wires":[["74598365.3aa64c"]]},{"id":"9bf86559.258318","type":"inject","z":"f6e410f4.f25f1","name":"Inject once at start","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":true,"x":137.5,"y":1268.0952339172363,"wires":[["7b066a4a.338f44"]]},{"id":"74598365.3aa64c","type":"switch","z":"f6e410f4.f25f1","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":596.9642944335938,"y":1526.7737426757812,"wires":[["cf100fe5.78d41"],["cf100fe5.78d41","668ec9ab.826488"]]},{"id":"cf100fe5.78d41","type":"rbe","z":"f6e410f4.f25f1","name":"","func":"rbe","gap":"","start":"","inout":"out","x":832.7737274169922,"y":1582.678515298026,"wires":[["668ec9ab.826488"]]},{"id":"7f072fa3.11e8b","type":"function","z":"f6e410f4.f25f1","name":"global get blwr","func":"if (global.get ('blwr') === 2 ) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":594.7738647460938,"y":1387.2499389648438,"wires":[["1089c537.c8b13b"]]},{"id":"1089c537.c8b13b","type":"switch","z":"f6e410f4.f25f1","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":789.3452758789062,"y":1413.1072998046875,"wires":[["5eac48a5.8b8138"],["5eac48a5.8b8138","ee97f3de.e6311"]]},{"id":"5eac48a5.8b8138","type":"rbe","z":"f6e410f4.f25f1","name":"","func":"rbe","gap":"","start":"","inout":"out","x":864.0596313476562,"y":1481.6786499023438,"wires":[["ee97f3de.e6311"]]},{"id":"47ea0810.3729b8","type":"function","z":"f6e410f4.f25f1","name":"global get ballvalve","func":"if (global.get ('ballvalve') == 1 ) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":612.2024536132812,"y":1337.25,"wires":[["9ff37d61.3a4cd"]]},{"id":"9ff37d61.3a4cd","type":"switch","z":"f6e410f4.f25f1","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":787.8212661743164,"y":1344.1548156738281,"wires":[["9689a5da.cf8968"],["949613f9.8f0dd"]]},{"id":"39307dbd.733122","type":"trigger","z":"f6e410f4.f25f1","op1":"","op2":"ddd","op1type":"nul","op2type":"str","duration":"1","extend":false,"units":"s","reset":"99","name":"","x":190.20245361328125,"y":1448.5714111328125,"wires":[["386c7f.fff3338","71f77236.a0afcc","ecd4c2ef.3673d","8bd921a8.e273b"]]},{"id":"7b066a4a.338f44","type":"delay","z":"f6e410f4.f25f1","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":173.02386474609375,"y":1389.3571166992188,"wires":[["39307dbd.733122"]]},{"id":"386c7f.fff3338","type":"delay","z":"f6e410f4.f25f1","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":176.27386474609375,"y":1546.857177734375,"wires":[["39307dbd.733122"]]},{"id":"9689a5da.cf8968","type":"trigger","z":"f6e410f4.f25f1","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"3","extend":true,"units":"s","reset":"99","name":"valve off delay","x":779.1068801879883,"y":1292.5355366298131,"wires":[["949613f9.8f0dd"]]},{"id":"949613f9.8f0dd","type":"modbus-write","z":"f6e410f4.f25f1","name":"Water Valve: Y3","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"2","quantity":"1","server":"ab4cd21.673823","x":1200,"y":1300,"wires":[["890a0799.a88a18"],[]]},{"id":"ee97f3de.e6311","type":"modbus-write","z":"f6e410f4.f25f1","name":"Aux Relay: Y2","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"1","quantity":"1","server":"ab4cd21.673823","x":1220,"y":1400,"wires":[[],[]]},{"id":"668ec9ab.826488","type":"modbus-write","z":"f6e410f4.f25f1","name":"Motor  Y1 ","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"0","quantity":"1","server":"ab4cd21.673823","x":1200,"y":1480,"wires":[[],[]]},{"id":"ecd4c2ef.3673d","type":"function","z":"f6e410f4.f25f1","name":"global get test or  demo mode","func":"if (global.get ('test_mode') ===1) { \nmsg.payload = 1;\nreturn msg;} \nelse\nif (global.get ('demo_mode')===1) {\nmsg.payload = 1;\nreturn msg;}\nelse\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":416.36114501953125,"y":1426.8372802734375,"wires":[["c7a0d374.6634d"]]},{"id":"c7a0d374.6634d","type":"switch","z":"f6e410f4.f25f1","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":334.4564208984375,"y":1348.3827514648438,"wires":[[],["47ea0810.3729b8","7f072fa3.11e8b"]]},{"id":"1a54c272.ecb2de","type":"inject","z":"f6e410f4.f25f1","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":832.2181911468506,"y":1247.2181366511754,"wires":[["949613f9.8f0dd"]]},{"id":"aacf6523.b7f588","type":"debug","z":"f6e410f4.f25f1","name":"Replace with Conveyor Output","active":false,"console":"false","complete":"payload","x":1276.861183166504,"y":1700.4689482280187,"wires":[]},{"id":"8bd921a8.e273b","type":"function","z":"f6e410f4.f25f1","name":"global get conveyor_check","func":"if (global.get ('conveyor_check') ===1) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":452.3611297607422,"y":1605.4689816066198,"wires":[["1382af97.fe4b6"]]},{"id":"1382af97.fe4b6","type":"switch","z":"f6e410f4.f25f1","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":526.8849334716797,"y":1678.0143917628698,"wires":[["b9465990.dc4768"],[]]},{"id":"c7576b7c.f54958","type":"switch","z":"f6e410f4.f25f1","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":868.8849334716797,"y":1740.0143917628698,"wires":[["98a1973d.4e3668"],["98a1973d.4e3668"]]},{"id":"98a1973d.4e3668","type":"rbe","z":"f6e410f4.f25f1","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1033.3611297607422,"y":1667.4689816066198,"wires":[["aacf6523.b7f588","98e71efc.fdafc"]]},{"id":"b9465990.dc4768","type":"function","z":"f6e410f4.f25f1","name":"global get conveyor","func":"if (global.get ('conveyor') == 1 ) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":702.3611297607422,"y":1687.4689816066198,"wires":[["c7576b7c.f54958"]]},{"id":"98e71efc.fdafc","type":"modbus-write","z":"f6e410f4.f25f1","name":"Conveyor Y4","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"3","quantity":"1","server":"ab4cd21.673823","x":1240.3611297607422,"y":1637.4689816066198,"wires":[[],[]]},{"id":"890a0799.a88a18","type":"debug","z":"f6e410f4.f25f1","name":"","active":false,"console":"false","complete":"false","x":1361.179889678955,"y":1288.3375385829381,"wires":[]},{"id":"589ddad9.054e54","type":"inject","z":"f6e410f4.f25f1","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":899.8723275661466,"y":1863.325256211417,"wires":[["98e71efc.fdafc"]]},{"id":"5b966050.3355","type":"inject","z":"f6e410f4.f25f1","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":885.8950326442716,"y":1949.3196409770417,"wires":[["98e71efc.fdafc"]]},{"id":"da97eba8.fcc158","type":"inject","z":"f6e410f4.f25f1","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":687.0371245145798,"y":1485.1947116851807,"wires":[["668ec9ab.826488"]]},{"id":"102f56e3.e79809","type":"inject","z":"f6e410f4.f25f1","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":693.0370693206787,"y":1450.5282076426915,"wires":[["668ec9ab.826488"]]},{"id":"470963a0.7fde9c","type":"inject","z":"f6e410f4.f25f1","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":828.2181739807129,"y":1212.5516880580358,"wires":[["949613f9.8f0dd"]]},{"id":"cc4103a8.51a88","type":"inject","z":"f6e410f4.f25f1","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"x":852.1228141784668,"y":1167.503806931632,"wires":[["ee97f3de.e6311"]]},{"id":"3c9a3749.091a18","type":"inject","z":"f6e410f4.f25f1","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":888.1705169677734,"y":1127.3610018321447,"wires":[["ee97f3de.e6311"]]},{"id":"3f549a61.6adb56","type":"modbus-read","z":"f6e410f4.f25f1","name":"Array PS1& PS2","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"29","quantity":"2","rate":"1","rateUnit":"s","delayOnStart":false,"startDelayTime":"","server":"ab4cd21.673823","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":515,"y":716,"wires":[["3c9f8a4e.4aac26"],[]]},{"id":"4f8c876c.f957c8","type":"function","z":"3e413809.1b57a8","name":"set filter_pressure 0 if blwr 0","func":"var filter_pressure = global.get ('filter_pressure') || 0;\nvar newval4 = Math.abs(global.get('actFilt'));\nif (global.get ('blwr') === 0 && newval4 <= 0.35 ) {\nnewval4 = 0;\n}\nif (global.get ('blwr') === 2 && newval4 <= 0.1 ) {\nnewval4 = 0.1;}\nglobal.set('filter_pressure', newval4);\nmsg.topic = 'filter_pressure';\nmsg.payload = global.get('filter_pressure');\nreturn msg;","outputs":1,"noerr":0,"x":798.9999771118164,"y":589.000002861023,"wires":[["f41acdf1.4ccdb","52f51cc2.982634"]]},{"id":"54a5038d.42aefc","type":"function","z":"3e413809.1b57a8","name":"global set filter_pressure","func":"var filter_pressure = global.get ('filter_pressure') || 0;\nvar newval4 = Math.abs(global.get('actFilt'));\nif (global.get ('blwr') === 2 && newval4 <= 0.1 ) {\nnewval4 = 0.1;}\nglobal.set('filter_pressure', newval4);\nmsg.topic = 'filter_pressure';\nmsg.payload = global.get('filter_pressure');\nreturn msg;","outputs":1,"noerr":0,"x":786.9404296875,"y":631.1079711914062,"wires":[["52f51cc2.982634"]]},{"id":"8356dd0b.85bf8","type":"comment","z":"3e413809.1b57a8","name":"custom set filter_pressure to just actFilt","info":"","x":489.1770935058594,"y":566.671875,"wires":[]},{"id":"78c4d219.59441c","type":"comment","z":"5acbf982.b822a8","name":"Conveyor logic","info":"","x":832,"y":1622,"wires":[]},{"id":"2c7ea758.fbdcc8","type":"inject","z":"5acbf982.b822a8","name":"ONCE A SEC PULSE","topic":"","payload":"ddd","payloadType":"str","repeat":"1","crontab":"","once":true,"x":195.4166717529297,"y":1722.6668710708618,"wires":[["6838bfe9.8a568"]]},{"id":"9d845ff5.7d7ac","type":"function","z":"5acbf982.b822a8","name":"global get conveyor","func":"msg.payload = global.get('conveyor');\nmsg.topic = 'conveyor';\nreturn msg;","outputs":1,"noerr":0,"x":649.1666564941406,"y":2064.416874885559,"wires":[["e46d0a0d.1943c8"]]},{"id":"6eca5603.4f4778","type":"function","z":"5acbf982.b822a8","name":"global get conveyor_status","func":"if (global.get('conveyor_control')===0) {global.set('conveyor_status', 'CONV OFF');}\nif (global.get('conveyor_control')==1) {global.set('conveyor_status', 'CONV ON');}\nif (global.get('conveyor_control')==2 && global.get('conveyor')==1) {global.set('conveyor_status', 'CONV AUTO ON');}\nif (global.get('conveyor_control')==2 && global.get('conveyor')==0) {global.set('conveyor_status', 'CONV AUTO OFF');}\nif (global.get('alarm') > 0) {global.set('conveyor_status', 'LOCKED OUT');}\nmsg.payload = global.get('conveyor_status');\nmsg.topic = 'conveyor_status';\nreturn msg;","outputs":1,"noerr":0,"x":628.6429138183594,"y":1987.607304573059,"wires":[["e46d0a0d.1943c8"]]},{"id":"e46d0a0d.1943c8","type":"vis in","z":"5acbf982.b822a8","language":"en","x":943.4762268066406,"y":2082.893193244934,"wires":[[]]},{"id":"d89dd5b3.d2c398","type":"function","z":"5acbf982.b822a8","name":"global get conveyor_check","func":"msg.payload = global.get('conveyor_check');\nmsg.topic = 'conveyor_check';\nreturn msg;","outputs":1,"noerr":0,"x":634.1666564941406,"y":2115.416874885559,"wires":[["e46d0a0d.1943c8"]]},{"id":"167e22be.c4919d","type":"function","z":"5acbf982.b822a8","name":"global get conveyor_control","func":"msg.payload = global.get('conveyor_control');\nmsg.topic = 'conveyor_control';\nreturn msg;","outputs":1,"noerr":0,"x":653.1666564941406,"y":2023.416874885559,"wires":[["e46d0a0d.1943c8"]]},{"id":"6838bfe9.8a568","type":"function","z":"5acbf982.b822a8","name":"global get conveyor_check","func":"if (global.get ('conveyor_check') ===1) {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;\n","outputs":1,"noerr":0,"x":242.4166717529297,"y":1855.6668710708618,"wires":[["8514c66b.d953f8"]]},{"id":"8514c66b.d953f8","type":"switch","z":"5acbf982.b822a8","name":"switch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":362.69049072265625,"y":1984.962285041809,"wires":[["6eca5603.4f4778","d89dd5b3.d2c398","9d845ff5.7d7ac","167e22be.c4919d","4cc02c43.9844a4"],["d89dd5b3.d2c398"]]},{"id":"62b9058a.22c18c","type":"function","z":"5acbf982.b822a8","name":"global get blwr","func":"if (global.get ('blwr') == 2)  \n {\nmsg.payload = 1;\nreturn msg;\n} else\nmsg.payload = 0;\nreturn msg;","outputs":1,"noerr":0,"x":586.8333129882812,"y":1714.555812239647,"wires":[["76921b44.62d9a4"]]},{"id":"76921b44.62d9a4","type":"switch","z":"5acbf982.b822a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":753.8333511352539,"y":1710.6669158935547,"wires":[["46bf7ad6.d06404"],["cac30e4b.06fa1"]]},{"id":"23142a28.d38e76","type":"trigger","z":"5acbf982.b822a8","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"1","extend":false,"units":"min","reset":"reset","name":"","x":1064.6944608688354,"y":1637.7782529592514,"wires":[["5df93c9e.083cf4"]]},{"id":"cac30e4b.06fa1","type":"change","z":"5acbf982.b822a8","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":894.1944875717163,"y":1746.5557578802109,"wires":[["23142a28.d38e76","ac0f100a.09791"]]},{"id":"36ab1dab.4db532","type":"function","z":"5acbf982.b822a8","name":"global set conveyor","func":"global.set('conveyor',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":1738.1944189071655,"y":1995.1945832967758,"wires":[["fd1a23fd.18a89"]]},{"id":"4cc02c43.9844a4","type":"function","z":"5acbf982.b822a8","name":"global get conveyor_control","func":"msg.payload = global.get('conveyor_control');\nmsg.topic = 'conveyor_control';\nreturn msg;","outputs":1,"noerr":0,"x":509.83331298828125,"y":1931.833400130272,"wires":[["270ca630.1ee48a"]]},{"id":"270ca630.1ee48a","type":"switch","z":"5acbf982.b822a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":3,"x":514.8333129882812,"y":1846.833400130272,"wires":[["3731f8ac.73bff8","62b9058a.22c18c","25d6ab07.89f174"],["25d6ab07.89f174","5b83c0a4.d67f9","ac0f100a.09791","671c2a97.4882c4"],["5b83c0a4.d67f9","ac0f100a.09791","671c2a97.4882c4"]]},{"id":"46bf7ad6.d06404","type":"trigger","z":"5acbf982.b822a8","op1":"1","op2":"","op1type":"num","op2type":"nul","duration":"3","extend":true,"units":"s","reset":"99","name":"blwer on","x":901.277777671814,"y":1683.8334039449692,"wires":[["23142a28.d38e76","5b83c0a4.d67f9"]]},{"id":"17f1cff1.2093","type":"trigger","z":"5acbf982.b822a8","op1":"","op2":"1","op1type":"nul","op2type":"str","duration":"3","extend":true,"units":"s","reset":"reset","name":"","x":979.4165830612183,"y":1800.08316552639,"wires":[["b8a8ec09.493f2"]]},{"id":"b8a8ec09.493f2","type":"function","z":"5acbf982.b822a8","name":"global get blwr","func":"if (global.get ('blwr') === 0 || global.get('blwr') == 3)  \n {\nmsg.payload = 1;\nreturn msg;\n}\nreturn;","outputs":1,"noerr":0,"x":1143.7779302597046,"y":1805.1390451192856,"wires":[["9431bd.af6ace4"]]},{"id":"3731f8ac.73bff8","type":"function","z":"5acbf982.b822a8","name":"global get blwr","func":"if (global.get ('blwr') == 2)  \n {\nmsg.payload = 1;\nreturn msg;\n} else\nreturn;","outputs":1,"noerr":0,"x":805.7221984863281,"y":1783.833264708519,"wires":[["17f1cff1.2093"]]},{"id":"d96c6242.b6e85","type":"function","z":"5acbf982.b822a8","name":"reset conveyor","func":"if (global.get('conveyor')==1)\n{global.set('conveyor',0);}\nelse\nreturn msg;","outputs":1,"noerr":0,"x":832.9310293197632,"y":1831.2764571905136,"wires":[[]]},{"id":"25d6ab07.89f174","type":"rbe","z":"5acbf982.b822a8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":683.9158315658569,"y":1830.9443858861923,"wires":[["d96c6242.b6e85"]]},{"id":"71664e14.ee60d","type":"function","z":"5acbf982.b822a8","name":"inject on_time","func":"msg.payload = 'timer ' + (global.get('on_time')*60);\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1421.6250562667847,"y":1630.4582399129868,"wires":[["e0a0550d.9294b8"]]},{"id":"e0a0550d.9294b8","type":"bigtimer","z":"5acbf982.b822a8","outtopic":"","outpayload1":"1","outpayload2":"0","name":"ON TMR","lat":"38.6","lon":"-90","starttime":"630","endtime":"630","startoff":0,"endoff":0,"offs":0,"outtext1":"On","outtext2":"Off","timeout":1440,"sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"suspend":false,"random":false,"repeat":false,"atstart":false,"odd":false,"even":false,"x":1581.5695219039917,"y":1626.132773756981,"wires":[["6bacdb35.4c9c24"],[],[]]},{"id":"ac0f100a.09791","type":"function","z":"5acbf982.b822a8","name":"set conv_reset","func":"global.set ('conv_reset',1);\nreturn;","outputs":1,"noerr":0,"x":1110.3475637435913,"y":1754.5215028524399,"wires":[[]]},{"id":"6bacdb35.4c9c24","type":"function","z":"5acbf982.b822a8","name":"check conv_reset","func":"if (global.get('conv_reset') == 0) {\nreturn msg;}\nelse \nreturn;\n","outputs":1,"noerr":0,"x":1756.9862356185913,"y":1611.1328271627426,"wires":[["7064b79f.706ec8"]]},{"id":"7064b79f.706ec8","type":"switch","z":"5acbf982.b822a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1907.2915563583374,"y":1638.124771475792,"wires":[["671c2a97.4882c4"],["abe94e8.ac8a6b"]]},{"id":"a3d69b15.25c648","type":"switch","z":"5acbf982.b822a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","outputs":2,"x":1914.6804304122925,"y":1689.1247876882553,"wires":[["71664e14.ee60d"],["671c2a97.4882c4"]]},{"id":"671c2a97.4882c4","type":"rbe","z":"5acbf982.b822a8","name":"","func":"rbe","gap":"","start":"","inout":"out","x":1982.180380821228,"y":1917.1247590780258,"wires":[["36ab1dab.4db532"]]},{"id":"abe94e8.ac8a6b","type":"function","z":"5acbf982.b822a8","name":"inject off_time","func":"msg.payload = 'timer ' + (global.get('off_time')*60);\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1418.4026174545288,"y":1717.013528227806,"wires":[["118300cb.c30fff"]]},{"id":"118300cb.c30fff","type":"bigtimer","z":"5acbf982.b822a8","outtopic":"","outpayload1":"0","outpayload2":"1","name":"OFF TMR","lat":"38.6","lon":"-90","starttime":"630","endtime":"630","startoff":0,"endoff":0,"offs":0,"outtext1":"On","outtext2":"Off","timeout":1440,"sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"suspend":false,"random":false,"repeat":false,"atstart":false,"odd":false,"even":false,"x":1580.5691976547241,"y":1721.5769084692001,"wires":[["3ee8fc87.b260c4"],[],[]]},{"id":"3ee8fc87.b260c4","type":"function","z":"5acbf982.b822a8","name":"check conv_reset","func":"if (global.get('conv_reset') == 0) {\nreturn msg;}\nelse \nreturn;\n","outputs":1,"noerr":0,"x":1751.736044883728,"y":1710.347051024437,"wires":[["a3d69b15.25c648"]]},{"id":"5df93c9e.083cf4","type":"function","z":"5acbf982.b822a8","name":"reset conv_reset","func":"global.set ('conv_reset',0);\nreturn msg;","outputs":1,"noerr":0,"x":1223.9585847854614,"y":1679.2359784841537,"wires":[["71664e14.ee60d"]]},{"id":"9431bd.af6ace4","type":"function","z":"5acbf982.b822a8","name":"reset post_reset","func":"global.set ('post_reset',0);\nreturn msg;","outputs":1,"noerr":0,"x":1319.569540977478,"y":1768.12466776371,"wires":[["456db0b3.4ba0f"]]},{"id":"456db0b3.4ba0f","type":"function","z":"5acbf982.b822a8","name":"inject post_time","func":"msg.payload = 'timer ' + (global.get('post_time')*60);\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1341.6806478500366,"y":1854.9024480581284,"wires":[["31017f5e.75fa"]]},{"id":"31017f5e.75fa","type":"bigtimer","z":"5acbf982.b822a8","outtopic":"","outpayload1":"1","outpayload2":"0","name":"POST TMR","lat":"38.6","lon":"-90","starttime":"630","endtime":"630","startoff":0,"endoff":0,"offs":0,"outtext1":"On","outtext2":"Off","timeout":1440,"sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"suspend":false,"random":false,"repeat":false,"atstart":false,"odd":false,"even":false,"x":1544.958456993103,"y":1858.3547738790512,"wires":[["5d86b414.bf592c"],[],[]]},{"id":"5d86b414.bf592c","type":"function","z":"5acbf982.b822a8","name":"check post_reset","func":"if (global.get('post_reset') == 0) {\nreturn msg;}\nelse \nreturn;\n","outputs":1,"noerr":0,"x":1764.8196020126343,"y":1846.6881345510483,"wires":[["671c2a97.4882c4"]]},{"id":"5b83c0a4.d67f9","type":"function","z":"5acbf982.b822a8","name":"set post_reset","func":"global.set ('post_reset',1);\nreturn;","outputs":1,"noerr":0,"x":1083.9584493637085,"y":1855.9024232625961,"wires":[[]]},{"id":"fd1a23fd.18a89","type":"debug","z":"5acbf982.b822a8","name":"","active":true,"console":"false","complete":"false","x":1976.4031591415405,"y":1998.9027131795883,"wires":[]},{"id":"4353626.67fd89c","type":"inject","z":"40de537b.64e2bc","name":"June 2018 Update","topic":"","payload":"11","payloadType":"num","repeat":"","crontab":"","once":false,"x":1073,"y":1330,"wires":[["28747502.70316a","2fbd87cb.cb4768"]]},{"id":"829ac909.4917d8","type":"inject","z":"8ee48a3f.e52898","name":"June 2018 Update","topic":"","payload":"110","payloadType":"num","repeat":"","crontab":"","once":false,"x":1333,"y":512,"wires":[["32368a14.720606"]]},{"id":"7d6f053.2103afc","type":"inject","z":"8dddd7b6.86c838","name":"June 2018 Update","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":1171,"y":1177,"wires":[["24c93e73.72aaa2"]]},{"id":"d035783b.1178c8","type":"debug","z":"5acbf982.b822a8","name":"","active":true,"console":"false","complete":"false","x":954,"y":2409,"wires":[]},{"id":"6a6a96e0.38d148","type":"DataIn","z":"294ea918.69a4f6","collection":"5391358a.10a3ec","name":"","update":false,"path":"/horn","x":610,"y":972,"wires":[]},{"id":"bb4c4427.467828","type":"inject","z":"294ea918.69a4f6","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":331,"y":958,"wires":[["6a6a96e0.38d148"]]},{"id":"9fab71fe.6b49a","type":"inject","z":"f6e410f4.f25f1","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":518,"y":824,"wires":[["478e5e45.e9fd3"]]},{"id":"21c47668.fc0d8a","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":686,"y":657,"wires":[["11390b90.dbdda4","c1944d81.3e263"]]},{"id":"11390b90.dbdda4","type":"bigexec","z":"3ee541b0.01cf8e","name":"git add .","command":"sudo git add .","commandArgs":"","minError":1,"minWarning":1,"cwd":"/opt/CAC/","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":816,"y":657,"wires":[[],[],[]]},{"id":"4bb053b0.bad52c","type":"vis in","z":"e2b02a8c.c19d98","language":"en","x":130,"y":60,"wires":[["6b69a4e.c5a1f5c"]]},{"id":"c4aafb4.2eb2908","type":"delay","z":"e2b02a8c.c19d98","name":"10s","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":286.9999408721924,"y":287.3690242767334,"wires":[["8bd8e26c.b6a9b","3aad93f4.dd2b0c"]]},{"id":"b1b35247.8b05c","type":"inject","z":"e2b02a8c.c19d98","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":false,"x":147.4404354095459,"y":285.5118865966797,"wires":[["c4aafb4.2eb2908"]]},{"id":"8bd8e26c.b6a9b","type":"bigexec","z":"e2b02a8c.c19d98","name":"rm flows","command":"sudo ","commandArgs":"rm flows_casi.json flows_ip-172-31-39-56.json","minError":1,"minWarning":1,"cwd":"/home/ubuntu/.node-red/","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":469,"y":299,"wires":[[],[],[]]},{"id":"ea81a3a1.e99b9","type":"bigexec","z":"e2b02a8c.c19d98","name":"CAC commit","command":"sudo ","commandArgs":"git commit","minError":1,"minWarning":1,"cwd":"/opt/CAC","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":483.69042015075684,"y":224.26188278198242,"wires":[[],[],[]]},{"id":"6df1dc19.e368a4","type":"delay","z":"e2b02a8c.c19d98","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":283.6904354095459,"y":225.5118865966797,"wires":[["ea81a3a1.e99b9","6ec35169.aa3cc"]]},{"id":"d85be2be.7f616","type":"inject","z":"e2b02a8c.c19d98","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":false,"x":142.44042015075684,"y":226.76188278198242,"wires":[["6df1dc19.e368a4"]]},{"id":"cbae7afc.3c8ef8","type":"bigexec","z":"e2b02a8c.c19d98","name":"copy flows","command":"sudo ","commandArgs":"cp /opt/CAC/flows_casi.json /home/ubuntu/.node-red/flows_casi.json","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":476.19042015075684,"y":365.5118827819824,"wires":[[],[],[]]},{"id":"385d7c58.197e34","type":"delay","z":"e2b02a8c.c19d98","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":288.69042015075684,"y":373.0118827819824,"wires":[["cbae7afc.3c8ef8","5c88462e.8a6ad8"]]},{"id":"b45fb48f.a537e8","type":"inject","z":"e2b02a8c.c19d98","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":false,"x":142.44042015075684,"y":371.7618827819824,"wires":[["385d7c58.197e34"]]},{"id":"3282e37d.ce582c","type":"bigexec","z":"e2b02a8c.c19d98","name":"access flows","command":"sudo ","commandArgs":"chmod 777 flows_casi.json flows_ip-172-31-39-56.json","minError":1,"minWarning":1,"cwd":"/home/ubuntu/.node-red/","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":471.94042015075684,"y":445.5118827819824,"wires":[[],[],[]]},{"id":"da3b0ab9.f20148","type":"delay","z":"e2b02a8c.c19d98","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":307.44042015075684,"y":455.5118827819824,"wires":[["3282e37d.ce582c","f04a0d18.ad8a2"]]},{"id":"958ea4fa.d8e3f8","type":"inject","z":"e2b02a8c.c19d98","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":false,"x":139.94042015075684,"y":450.5118827819824,"wires":[["da3b0ab9.f20148"]]},{"id":"e837d4c9.a53578","type":"delay","z":"e2b02a8c.c19d98","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":269.9404354095459,"y":528.0118923187256,"wires":[["3a79495.36c21b6","a8312609.9ebad8"]]},{"id":"aa15ed68.6f9c8","type":"inject","z":"e2b02a8c.c19d98","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":false,"x":133.69042015075684,"y":531.7618827819824,"wires":[["e837d4c9.a53578"]]},{"id":"52ed6c22.4bfc04","type":"comment","z":"e2b02a8c.c19d98","name":"Download from <<<---Server","info":"","x":455.66668701171875,"y":61,"wires":[]},{"id":"42b7f575.5b58ac","type":"delay","z":"e2b02a8c.c19d98","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":956.0000152587891,"y":208.00000381469727,"wires":[["98f84911.acb8a8","c4aafb4.2eb2908"]]},{"id":"98f84911.acb8a8","type":"bigexec","z":"e2b02a8c.c19d98","name":"CAC Pull","command":"sudo ","commandArgs":"git pull","minError":1,"minWarning":1,"cwd":"/opt/CAC","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":1146.0000457763672,"y":211.74999237060547,"wires":[[],[],[]]},{"id":"6ec35169.aa3cc","type":"delay","z":"e2b02a8c.c19d98","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":630,"y":218,"wires":[["42b7f575.5b58ac"]]},{"id":"ae654eb1.0df64","type":"bigexec","z":"e2b02a8c.c19d98","name":"CAC stash","command":"sudo ","commandArgs":"git stash","minError":1,"minWarning":1,"cwd":"/opt/CAC","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":780,"y":216.75,"wires":[["42b7f575.5b58ac"],[],[]]},{"id":"3aad93f4.dd2b0c","type":"delay","z":"e2b02a8c.c19d98","name":"10s","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":637.9999847412109,"y":287.99999618530273,"wires":[["3838af5a.a8383","54d949f.6f67eb8"]]},{"id":"3838af5a.a8383","type":"bigexec","z":"e2b02a8c.c19d98","name":"rm vis JsonDB","command":"sudo ","commandArgs":"rm -r vis JsonDB","minError":1,"minWarning":1,"cwd":"/home/ubuntu/.node-red/","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":797.9999847412109,"y":286.74999618530273,"wires":[[],[],[]]},{"id":"3e09c679.fbed5a","type":"delay","z":"e2b02a8c.c19d98","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":970,"y":358,"wires":[["7472dce5.12fac4","e68f166b.ff3eb8"]]},{"id":"7472dce5.12fac4","type":"bigexec","z":"e2b02a8c.c19d98","name":"vis","command":"sudo ","commandArgs":"cp -r /opt/CAC/vis /home/ubuntu/.node-red/vis","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":1110,"y":360,"wires":[[],[],[]]},{"id":"5c88462e.8a6ad8","type":"delay","z":"e2b02a8c.c19d98","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":643.9999847412109,"y":367.99999618530273,"wires":[["dae421e4.627a6","3e09c679.fbed5a"]]},{"id":"dae421e4.627a6","type":"bigexec","z":"e2b02a8c.c19d98","name":"copy flows","command":"sudo ","commandArgs":"cp /opt/CAC/flows_casi.json /home/ubuntu/.node-red/flows_ip-172-31-39-56.json","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":793.9999847412109,"y":366.74999618530273,"wires":[[],[],[]]},{"id":"b97ec47e.6c4298","type":"delay","z":"e2b02a8c.c19d98","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1010,"y":440,"wires":[["c57a1d4d.fc184","e837d4c9.a53578"]]},{"id":"c57a1d4d.fc184","type":"bigexec","z":"e2b02a8c.c19d98","name":"JsonDB","command":"sudo ","commandArgs":"chmod 777 calibration.json network.json Runtimes.json Setpoints.json Startup.json","minError":1,"minWarning":1,"cwd":"/home/ubuntu/.node-red/JsonDB","shell":false,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":1165.999984741211,"y":436.74999618530273,"wires":[[],[],[]]},{"id":"f04a0d18.ad8a2","type":"delay","z":"e2b02a8c.c19d98","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":659.9999847412109,"y":447.99999618530273,"wires":[["2337942c.ec061c","b97ec47e.6c4298"]]},{"id":"2337942c.ec061c","type":"bigexec","z":"e2b02a8c.c19d98","name":"access  vis JsonDB","command":"sudo ","commandArgs":"chmod 777 vis JsonDB","minError":1,"minWarning":1,"cwd":"/home/ubuntu/.node-red/","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":829.9999847412109,"y":446.74999618530273,"wires":[[],[],[]]},{"id":"e68f166b.ff3eb8","type":"delay","z":"e2b02a8c.c19d98","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1230,"y":360,"wires":[["af3592d5.6baf5","da3b0ab9.f20148"]]},{"id":"af3592d5.6baf5","type":"bigexec","z":"e2b02a8c.c19d98","name":"filter1","command":"sudo ","commandArgs":"cp -r /opt/CAC/filter1 /home/ubuntu/.node-red/filter1","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":1350,"y":360,"wires":[[],[],[]]},{"id":"3a79495.36c21b6","type":"bigexec","z":"e2b02a8c.c19d98","name":"CAC filter1 main","command":"sudo ","commandArgs":"chmod 777 CAC filter1 main","minError":1,"minWarning":1,"cwd":"/home/ubuntu/.node-red/vis/","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":480,"y":540,"wires":[[],[],[]]},{"id":"a8312609.9ebad8","type":"delay","z":"e2b02a8c.c19d98","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":650,"y":540,"wires":[["9b929e60.6d5f9","5b06dad1.efefb4"]]},{"id":"9b929e60.6d5f9","type":"bigexec","z":"e2b02a8c.c19d98","name":"CAC filter1 main","command":"sudo ","commandArgs":"chmod 777 vis-user.css vis-views.json","minError":1,"minWarning":1,"cwd":"/home/ubuntu/.node-red/vis/CAC","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":820,"y":540,"wires":[[],[],[]]},{"id":"5b06dad1.efefb4","type":"delay","z":"e2b02a8c.c19d98","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1010,"y":540,"wires":[["80ed4681.71d788","6f84e169.6e9cf"]]},{"id":"80ed4681.71d788","type":"bigexec","z":"e2b02a8c.c19d98","name":"CAC filter1 main","command":"sudo ","commandArgs":"chmod 777 vis-user.css vis-views.json","minError":1,"minWarning":1,"cwd":"/home/ubuntu/.node-red/vis/main","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":1180,"y":540,"wires":[[],[],[]]},{"id":"6f84e169.6e9cf","type":"delay","z":"e2b02a8c.c19d98","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":130,"y":620,"wires":[["7e2a6f23.09545","ca6375f7.1c97d8","fca80920.5a86d8","6df14b1e.aa2db4"]]},{"id":"7e2a6f23.09545","type":"bigexec","z":"e2b02a8c.c19d98","name":"CAC filter1 main","command":"sudo ","commandArgs":"chmod 777 filter1","minError":1,"minWarning":1,"cwd":"/home/ubuntu/.node-red/vis/","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":300,"y":620,"wires":[[],[],[]]},{"id":"345d844c.b1a80c","type":"bigexec","z":"e2b02a8c.c19d98","name":"copy JsonDB","command":"sudo ","commandArgs":"cp -r /opt/CAC/JsonDB /home/ubuntu/.node-red/JsonDB","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":1160,"y":280,"wires":[[],[],[]]},{"id":"54d949f.6f67eb8","type":"delay","z":"e2b02a8c.c19d98","name":"12s","pauseType":"delay","timeout":"12","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":962.5,"y":287.5,"wires":[["345d844c.b1a80c","385d7c58.197e34"]]},{"id":"ca6375f7.1c97d8","type":"change","z":"e2b02a8c.c19d98","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"git_pull","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":620,"wires":[["ea39fc4a.44bb"]]},{"id":"ea39fc4a.44bb","type":"change","z":"e2b02a8c.c19d98","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":620,"wires":[["c68b8bcd.db9938","132cd0e8.06c87f"]]},{"id":"c68b8bcd.db9938","type":"vis in","z":"e2b02a8c.c19d98","language":"en","x":870,"y":620,"wires":[[]]},{"id":"f4d843b0.df6c7","type":"inject","z":"e2b02a8c.c19d98","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":280,"y":680,"wires":[["ca6375f7.1c97d8"]]},{"id":"9423734d.4d20d","type":"change","z":"e2b02a8c.c19d98","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"git_pull","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":120,"wires":[["ac9b8799.1472e8"]]},{"id":"ac9b8799.1472e8","type":"change","z":"e2b02a8c.c19d98","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":120,"wires":[["f2485595.ef3208","1e6c9c9.95d3b63"]]},{"id":"f2485595.ef3208","type":"vis in","z":"e2b02a8c.c19d98","language":"en","x":930,"y":100,"wires":[[]]},{"id":"baeb1716.9f0be8","type":"change","z":"3ee541b0.01cf8e","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"git_pull","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":463,"y":155.66666793823242,"wires":[["201c6971.8cb696"]]},{"id":"201c6971.8cb696","type":"change","z":"3ee541b0.01cf8e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":663,"y":155.66666793823242,"wires":[["295a2968.30dab6","745bfe60.fff0d"]]},{"id":"295a2968.30dab6","type":"vis in","z":"3ee541b0.01cf8e","language":"en","x":913,"y":135.66666793823242,"wires":[[]]},{"id":"a7484ad7.0fc458","type":"change","z":"3ee541b0.01cf8e","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"git_pull","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":336,"y":797,"wires":[["9d8217e0.8baf58"]]},{"id":"9d8217e0.8baf58","type":"change","z":"3ee541b0.01cf8e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":536,"y":797,"wires":[["90824154.ff8","4bbc462a.4bcd38"]]},{"id":"90824154.ff8","type":"vis in","z":"3ee541b0.01cf8e","language":"en","x":706,"y":797,"wires":[[]]},{"id":"9e1905b3.1ea2a8","type":"inject","z":"3ee541b0.01cf8e","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":166,"y":797,"wires":[["a7484ad7.0fc458"]]},{"id":"7bf69019.0e387","type":"exec","z":"3ee541b0.01cf8e","command":"sudo reboot","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":430,"y":198,"wires":[[],[],[]]},{"id":"34dd49c6.e58e36","type":"change","z":"3ee541b0.01cf8e","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"git_pull_reboot","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":316,"y":1037,"wires":[["b3a563bb.589aa"]]},{"id":"b3a563bb.589aa","type":"change","z":"3ee541b0.01cf8e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":516,"y":1037,"wires":[["13ccab2a.55b8d5"]]},{"id":"13ccab2a.55b8d5","type":"vis in","z":"3ee541b0.01cf8e","language":"en","x":686,"y":1037,"wires":[[]]},{"id":"68670790.b4d758","type":"inject","z":"3ee541b0.01cf8e","name":"0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"onceDelay":"2","x":126,"y":1037,"wires":[["34dd49c6.e58e36"]]},{"id":"2fdb8f45.0e893","type":"change","z":"3ee541b0.01cf8e","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"git_pull_reboot","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":316,"y":1077,"wires":[["a35055f2.5220e8"]]},{"id":"a35055f2.5220e8","type":"change","z":"3ee541b0.01cf8e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":516,"y":1077,"wires":[["c5a42a92.99c868"]]},{"id":"c5a42a92.99c868","type":"vis in","z":"3ee541b0.01cf8e","language":"en","x":686,"y":1077,"wires":[[]]},{"id":"b1244daf.eedeb","type":"inject","z":"3ee541b0.01cf8e","name":"1","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":126,"y":1077,"wires":[["2fdb8f45.0e893"]]},{"id":"a0069a49.7d4f28","type":"debug","z":"3ee541b0.01cf8e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":886,"y":1137,"wires":[]},{"id":"4bbc462a.4bcd38","type":"function","z":"3ee541b0.01cf8e","name":"global set git_pull","func":"global.set('git_pull',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":746,"y":837,"wires":[[]]},{"id":"fd5981ef.97648","type":"function","z":"3ee541b0.01cf8e","name":"global get git_pull","func":"msg.payload = global.get('git_pull');\nmsg.topic = 'git_pull';\nreturn msg;","outputs":1,"noerr":0,"x":466,"y":1137,"wires":[["90f85520.3a0ac8","a0069a49.7d4f28"]]},{"id":"130819d.f3403e6","type":"inject","z":"3ee541b0.01cf8e","name":"","topic":"","payload":"","payloadType":"date","repeat":"3","crontab":"","once":true,"onceDelay":"0.5","x":166,"y":1137,"wires":[["fd5981ef.97648"]]},{"id":"90f85520.3a0ac8","type":"vis in","z":"3ee541b0.01cf8e","language":"en","x":686,"y":1117,"wires":[[]]},{"id":"745bfe60.fff0d","type":"function","z":"3ee541b0.01cf8e","name":"global set git_pull","func":"global.set('git_pull',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":910,"y":200,"wires":[[]]},{"id":"28e2b7dc.c44538","type":"change","z":"3ee541b0.01cf8e","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"git_pull_reboot","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":376,"y":877,"wires":[["8ffb9d42.b16ec"]]},{"id":"8ffb9d42.b16ec","type":"change","z":"3ee541b0.01cf8e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":576,"y":877,"wires":[["5062e1ef.a6ced","f7a4cb5c.734ed8"]]},{"id":"5062e1ef.a6ced","type":"vis in","z":"3ee541b0.01cf8e","language":"en","x":746,"y":877,"wires":[[]]},{"id":"9f37fad.cae6308","type":"inject","z":"3ee541b0.01cf8e","name":"0","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":186,"y":877,"wires":[["28e2b7dc.c44538"]]},{"id":"f7a4cb5c.734ed8","type":"function","z":"3ee541b0.01cf8e","name":"global set git_pull_reboot","func":"global.set('git_pull_reboot',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":806,"y":917,"wires":[[]]},{"id":"4e3905d2.4ff9dc","type":"function","z":"3ee541b0.01cf8e","name":"global get git_pull_reboot","func":"msg.payload = global.get('git_pull_reboot');\nmsg.topic = 'git_pull_reboot';\nreturn msg;","outputs":1,"noerr":0,"x":506,"y":1177,"wires":[["8c652420.e97ab8","bce2f54a.1cf9e8"]]},{"id":"10f356c4.f47f69","type":"inject","z":"3ee541b0.01cf8e","name":"","topic":"","payload":"","payloadType":"date","repeat":"3","crontab":"","once":true,"onceDelay":"0.5","x":186,"y":1177,"wires":[["4e3905d2.4ff9dc"]]},{"id":"8c652420.e97ab8","type":"vis in","z":"3ee541b0.01cf8e","language":"en","x":686,"y":1157,"wires":[[]]},{"id":"bce2f54a.1cf9e8","type":"debug","z":"3ee541b0.01cf8e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":886,"y":1177,"wires":[]},{"id":"659a22ff.0c6d1c","type":"change","z":"3ee541b0.01cf8e","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"git_pull_reboot","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":376,"y":917,"wires":[["2e34f95d.de3c26"]]},{"id":"2e34f95d.de3c26","type":"change","z":"3ee541b0.01cf8e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":576,"y":917,"wires":[["f7a4cb5c.734ed8"]]},{"id":"89a5c584.8cd228","type":"inject","z":"3ee541b0.01cf8e","name":"1","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":"0.5","x":186,"y":917,"wires":[["659a22ff.0c6d1c"]]},{"id":"6b69a4e.c5a1f5c","type":"switch","z":"e2b02a8c.c19d98","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"git_pull","vt":"str"},{"t":"eq","v":"git_reboot","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":270,"y":120,"wires":[["9423734d.4d20d","6df1dc19.e368a4"],[]]},{"id":"1e6c9c9.95d3b63","type":"function","z":"e2b02a8c.c19d98","name":"global set git_pull","func":"global.set('git_pull',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":910,"y":140,"wires":[[]]},{"id":"6df14b1e.aa2db4","type":"change","z":"e2b02a8c.c19d98","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"git_pull","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":720,"wires":[["1a71feed.b22251"]]},{"id":"1a71feed.b22251","type":"change","z":"e2b02a8c.c19d98","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":720,"wires":[["d660b943.ea0e28","4aa08d67.f090c4"]]},{"id":"d660b943.ea0e28","type":"vis in","z":"e2b02a8c.c19d98","language":"en","x":750,"y":720,"wires":[[]]},{"id":"7f39ef66.d263f","type":"inject","z":"e2b02a8c.c19d98","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":210,"y":720,"wires":[["6df14b1e.aa2db4"]]},{"id":"e46234f.2ffd8c8","type":"change","z":"e2b02a8c.c19d98","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"git_pull_reboot","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":960,"wires":[["19473ad1.585545"]]},{"id":"19473ad1.585545","type":"change","z":"e2b02a8c.c19d98","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":960,"wires":[["6ae49cfc.603924"]]},{"id":"6ae49cfc.603924","type":"vis in","z":"e2b02a8c.c19d98","language":"en","x":730,"y":960,"wires":[[]]},{"id":"66734ec.82eedb","type":"inject","z":"e2b02a8c.c19d98","name":"0","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"onceDelay":"2","x":170,"y":960,"wires":[["e46234f.2ffd8c8"]]},{"id":"fca80920.5a86d8","type":"change","z":"e2b02a8c.c19d98","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"git_pull_reboot","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":1000,"wires":[["76651919.de4df8"]]},{"id":"76651919.de4df8","type":"change","z":"e2b02a8c.c19d98","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":1000,"wires":[["816ee817.c60bb8"]]},{"id":"816ee817.c60bb8","type":"vis in","z":"e2b02a8c.c19d98","language":"en","x":730,"y":1000,"wires":[[]]},{"id":"3da65996.1e0016","type":"inject","z":"e2b02a8c.c19d98","name":"1","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":1000,"wires":[["fca80920.5a86d8"]]},{"id":"4aa08d67.f090c4","type":"function","z":"e2b02a8c.c19d98","name":"global set git_pull","func":"global.set('git_pull',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":760,"wires":[[]]},{"id":"d7778ab2.c168c8","type":"function","z":"e2b02a8c.c19d98","name":"global get git_pull","func":"msg.payload = global.get('git_pull');\nmsg.topic = 'git_pull';\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":1060,"wires":[["fc17ed41.741f6"]]},{"id":"8bd8522c.925df","type":"inject","z":"e2b02a8c.c19d98","name":"","topic":"","payload":"","payloadType":"date","repeat":"3","crontab":"","once":true,"onceDelay":"0.5","x":210,"y":1060,"wires":[["d7778ab2.c168c8"]]},{"id":"fc17ed41.741f6","type":"vis in","z":"e2b02a8c.c19d98","language":"en","x":730,"y":1040,"wires":[[]]},{"id":"aa7d4fb.c5f8bb","type":"change","z":"e2b02a8c.c19d98","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"git_pull_reboot","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":800,"wires":[["1e4a4bd2.d5c814"]]},{"id":"1e4a4bd2.d5c814","type":"change","z":"e2b02a8c.c19d98","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":800,"wires":[["f48f93c0.cf7da","c72e149.15dfde8"]]},{"id":"f48f93c0.cf7da","type":"vis in","z":"e2b02a8c.c19d98","language":"en","x":790,"y":800,"wires":[[]]},{"id":"7c32832e.722a3c","type":"inject","z":"e2b02a8c.c19d98","name":"0","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":230,"y":800,"wires":[["aa7d4fb.c5f8bb"]]},{"id":"c72e149.15dfde8","type":"function","z":"e2b02a8c.c19d98","name":"global set git_pull_reboot","func":"global.set('git_pull_reboot',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":840,"wires":[[]]},{"id":"85192fa0.62767","type":"function","z":"e2b02a8c.c19d98","name":"global get git_pull_reboot","func":"msg.payload = global.get('git_pull_reboot');\nmsg.topic = 'git_pull_reboot';\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":1100,"wires":[["3a2635be.2ecd0a"]]},{"id":"618b11d2.5fac1","type":"inject","z":"e2b02a8c.c19d98","name":"","topic":"","payload":"","payloadType":"date","repeat":"3","crontab":"","once":true,"onceDelay":"0.5","x":230,"y":1100,"wires":[["85192fa0.62767"]]},{"id":"3a2635be.2ecd0a","type":"vis in","z":"e2b02a8c.c19d98","language":"en","x":730,"y":1080,"wires":[[]]},{"id":"7a44e42d.c58afc","type":"change","z":"e2b02a8c.c19d98","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"git_pull_reboot","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":840,"wires":[["c40c9dd1.a6d2a"]]},{"id":"c40c9dd1.a6d2a","type":"change","z":"e2b02a8c.c19d98","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":840,"wires":[["c72e149.15dfde8"]]},{"id":"147e0755.57c569","type":"inject","z":"e2b02a8c.c19d98","name":"1","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":"0.5","x":230,"y":840,"wires":[["7a44e42d.c58afc"]]},{"id":"5f4e4e7d.ad5cd","type":"file in","z":"3ee541b0.01cf8e","name":"flows","filename":"/home/ubuntu/.node-red/flows_casi.json","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":470,"y":340,"wires":[["65e8bb27.0f7664"]]},{"id":"d84d01ea.1ecef","type":"file in","z":"3ee541b0.01cf8e","name":"calibration","filename":"/home/ubuntu/.node-red/JsonDB/calibration.json","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":490,"y":380,"wires":[["6c738369.8ddb4c"]]},{"id":"d1c6bcad.b99a5","type":"file in","z":"3ee541b0.01cf8e","name":"runtimes","filename":"/home/ubuntu/.node-red/JsonDB/Runtimes.json","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":480,"y":420,"wires":[["c56a20c.8ee67e"]]},{"id":"1bb1be25.585d62","type":"file in","z":"3ee541b0.01cf8e","name":"setpoints","filename":"/home/ubuntu/.node-red/JsonDB/Setpoints.json","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":480,"y":460,"wires":[["5ab26075.d42fa"]]},{"id":"e9db4a47.6e8098","type":"file in","z":"3ee541b0.01cf8e","name":"startup","filename":"/home/ubuntu/.node-red/JsonDB/Startup.json","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":480,"y":500,"wires":[["5b1b8c1c.a3ae74"]]},{"id":"52b9d542.53f67c","type":"file in","z":"3ee541b0.01cf8e","name":"vis-views","filename":"/home/ubuntu/.node-red/vis/CAC/vis-views.json","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":480,"y":540,"wires":[["9552212.f0484e"]]},{"id":"37f8a519.fcd6ca","type":"inject","z":"3ee541b0.01cf8e","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":220,"wires":[["7d4ab64d.326e88"]]},{"id":"3c4ed4b2.e2ddac","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":330,"y":340,"wires":[["5f4e4e7d.ad5cd","61b000d4.ab395"]]},{"id":"61b000d4.ab395","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":330,"y":380,"wires":[["d84d01ea.1ecef","4601b838.b883a8"]]},{"id":"4601b838.b883a8","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":330,"y":420,"wires":[["d1c6bcad.b99a5","6b962098.e3814"]]},{"id":"6b962098.e3814","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":330,"y":460,"wires":[["1bb1be25.585d62","4b341ccd.fbf144"]]},{"id":"4b341ccd.fbf144","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":270,"y":520,"wires":[["e9db4a47.6e8098","bde6733a.cad7e"]]},{"id":"bde6733a.cad7e","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":330,"y":560,"wires":[["52b9d542.53f67c","517256d6.f495d8"]]},{"id":"65e8bb27.0f7664","type":"file","z":"3ee541b0.01cf8e","name":"","filename":"/opt/CAC/flows_casi.json","appendNewline":false,"createDir":false,"overwriteFile":"true","encoding":"none","x":870,"y":340,"wires":[[]]},{"id":"6c738369.8ddb4c","type":"file","z":"3ee541b0.01cf8e","name":"","filename":"/opt/CAC/JsonDB/calibration.json","appendNewline":false,"createDir":false,"overwriteFile":"true","encoding":"none","x":900,"y":380,"wires":[[]]},{"id":"c56a20c.8ee67e","type":"file","z":"3ee541b0.01cf8e","name":"","filename":"/opt/CAC/JsonDB/Runtimes.json","appendNewline":false,"createDir":false,"overwriteFile":"true","encoding":"none","x":900,"y":420,"wires":[[]]},{"id":"5ab26075.d42fa","type":"file","z":"3ee541b0.01cf8e","name":"","filename":"/opt/CAC/JsonDB/Setpoints.json","appendNewline":false,"createDir":false,"overwriteFile":"true","encoding":"none","x":900,"y":460,"wires":[[]]},{"id":"5b1b8c1c.a3ae74","type":"file","z":"3ee541b0.01cf8e","name":"","filename":"/opt/CAC/JsonDB/Startup.json","appendNewline":false,"createDir":false,"overwriteFile":"true","encoding":"none","x":890,"y":500,"wires":[[]]},{"id":"9552212.f0484e","type":"file","z":"3ee541b0.01cf8e","name":"","filename":"/home/ubuntu/.node-red/vis/CAC/vis-views.json","appendNewline":false,"createDir":false,"overwriteFile":"true","encoding":"none","x":940,"y":540,"wires":[[]]},{"id":"d8adc315.eddab","type":"bigexec","z":"3ee541b0.01cf8e","name":"copy to node red","command":"sudo","commandArgs":"cp /home/ubuntu/.node-red/flows_ip-172-31-39-56.json /opt/CAC/flows_casi.json ","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":628,"y":1351,"wires":[[],[],[]]},{"id":"8e7bc8bf.780718","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":452.75,"y":1357.25,"wires":[["d8adc315.eddab","6933374f.4746b8"]]},{"id":"4010a42e.4cf8ec","type":"inject","z":"3ee541b0.01cf8e","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":false,"x":312,"y":1357.25,"wires":[["8e7bc8bf.780718"]]},{"id":"6933374f.4746b8","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":814.6666870117188,"y":1361.5,"wires":[["a4e4631b.eae58","411f831a.50438c"]]},{"id":"a4e4631b.eae58","type":"bigexec","z":"3ee541b0.01cf8e","name":"copy vis","command":"sudo","commandArgs":"cp -r /home/ubuntu/.node-red/vis/ /opt/CAC/vis/","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":944.6666870117188,"y":1361.5,"wires":[[],[],[]]},{"id":"411f831a.50438c","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1134.6666870117188,"y":1361.5,"wires":[["ef348c15.af096"]]},{"id":"ef348c15.af096","type":"bigexec","z":"3ee541b0.01cf8e","name":"copy JsonDB","command":"sudo","commandArgs":"cp -r /home/ubuntu/.node-red/JsonDB/ /opt/CAC/JsonDB","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":1284.6666870117188,"y":1361.5,"wires":[[],[],[]]},{"id":"89886e4f.bce46","type":"bigexec","z":"3ee541b0.01cf8e","name":"delete to node red","command":"sudo","commandArgs":"rm /opt/CAC/flows_casi.json","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":614.6666870117188,"y":1281.5,"wires":[[],[],[]]},{"id":"80e9fdcd.296fd","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":452.75001525878906,"y":1279.7500095367432,"wires":[["89886e4f.bce46","82726d52.46c8f"]]},{"id":"7c35f6eb.2c8df8","type":"inject","z":"3ee541b0.01cf8e","name":"","topic":"","payload":"","payloadType":"num","repeat":"","crontab":"","once":false,"x":316.5,"y":1283.5,"wires":[["80e9fdcd.296fd"]]},{"id":"56a31355.a828ec","type":"bigexec","z":"3ee541b0.01cf8e","name":"delete to vis","command":"sudo","commandArgs":"rm -r /opt/CAC/vis","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":954.6666870117188,"y":1281.5,"wires":[[],[],[]]},{"id":"82726d52.46c8f","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":794.6666870117188,"y":1281.5,"wires":[["56a31355.a828ec","935b9896.ac7638"]]},{"id":"5a36711e.74943","type":"bigexec","z":"3ee541b0.01cf8e","name":"delete to JsonDB","command":"sudo","commandArgs":"rm -r /opt/CAC/JsonDB","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":1274.6666870117188,"y":1281.5,"wires":[[],[],[]]},{"id":"935b9896.ac7638","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1094.6666870117188,"y":1281.5,"wires":[["5a36711e.74943"]]},{"id":"953ea46b.36d8e8","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":650,"y":600,"wires":[["b62b9a98.f603f8","2016ce56.853122"]]},{"id":"b62b9a98.f603f8","type":"bigexec","z":"3ee541b0.01cf8e","name":"copy vis","command":"sudo","commandArgs":"cp -r /home/ubuntu/.node-red/vis/ /opt/CAC/vis/","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":800,"y":600,"wires":[[],[],[]]},{"id":"8c7ad55f.537938","type":"bigexec","z":"3ee541b0.01cf8e","name":"delete to vis","command":"sudo","commandArgs":"rm -r /opt/CAC/vis","minError":1,"minWarning":1,"cwd":"","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":490,"y":600,"wires":[[],[],[]]},{"id":"517256d6.f495d8","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":330,"y":600,"wires":[["8c7ad55f.537938","953ea46b.36d8e8"]]},{"id":"524ceb83.558564","type":"bigexec","z":"3ee541b0.01cf8e","name":"access flows","command":"sudo ","commandArgs":"chmod 777 flows_casi.json","minError":1,"minWarning":1,"cwd":"/opt/CAC/","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":490,"y":280,"wires":[[],[],[]]},{"id":"7d4ab64d.326e88","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":325.5,"y":290,"wires":[["524ceb83.558564","450241be.99ade"]]},{"id":"ea983d8b.52577","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1028.0595798492432,"y":274.4881172180176,"wires":[["717569cd.ddde48","3c4ed4b2.e2ddac"]]},{"id":"717569cd.ddde48","type":"bigexec","z":"3ee541b0.01cf8e","name":"JsonDB","command":"sudo ","commandArgs":"chmod 777 vis-user.css vis-views.json","minError":1,"minWarning":1,"cwd":"/opt/CAC/vis/CAC","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":1184.059564590454,"y":271.2381134033203,"wires":[[],[],[]]},{"id":"450241be.99ade","type":"delay","z":"3ee541b0.01cf8e","name":"5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":678.0595645904541,"y":282.4881134033203,"wires":[["afb65d37.d3287","ea983d8b.52577"]]},{"id":"afb65d37.d3287","type":"bigexec","z":"3ee541b0.01cf8e","name":"access  vis JsonDB","command":"sudo ","commandArgs":"chmod 777 vis calibration.json Runtimes.json Setpoints.json Startup.json","minError":1,"minWarning":1,"cwd":"/opt/CAC/JsonDB/","shell":true,"extraArgumentProperty":"","envProperty":"","format":"","limiter":true,"payloadIs":"triggerNoStdin","x":848.0595645904541,"y":281.2381134033203,"wires":[[],[],[]]},{"id":"9ac244a6.418bb8","type":"switch","z":"175572eb.e90ebd","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"ip.address","vt":"str"},{"t":"eq","v":"wifi.address","vt":"str"},{"t":"eq","v":"ip.gateway","vt":"str"},{"t":"eq","v":"ip.network","vt":"str"},{"t":"eq","v":"ip.dns","vt":"str"},{"t":"eq","v":"wifi.ssid","vt":"str"},{"t":"eq","v":"wifi.password","vt":"str"},{"t":"eq","v":"ip.dhcp","vt":"str"},{"t":"eq","v":"wifi.dhcp","vt":"str"},{"t":"eq","v":"ip.static","vt":"str"},{"t":"eq","v":"active_save","vt":"str"},{"t":"eq","v":"wifi_active_save","vt":"str"},{"t":"eq","v":"wifi.gateway","vt":"str"}],"checkall":"true","repair":false,"outputs":13,"x":490,"y":100,"wires":[["9f468059.82132"],["6d96d90d.9fb3f8"],["e88ef18.765501"],[],["efa7bb69.a0f3a8"],["da341cc1.0f699"],["c781e47a.f6d9f8"],["8934cedd.36ad4"],["2b930491.6af69c"],[],["13992ef8.670861"],["ebec95ea.4eae98"],["2fa759d3.275516"]]},{"id":"e313fda4.35e37","type":"vis in","z":"175572eb.e90ebd","language":"en","x":324.7619171142578,"y":99.52384567260742,"wires":[["9ac244a6.418bb8"]]},{"id":"318a6f4c.da21e","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ip.address","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":784.3213958740234,"y":720.1072006225586,"wires":[["895d4e39.abf58"]]},{"id":"99f5ef0b.75e0c","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ip.gateway","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":784.3213958740234,"y":753.440544128418,"wires":[["895d4e39.abf58"]]},{"id":"1fa64370.93881d","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ip.dns","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":780.9880218505859,"y":786.7738876342773,"wires":[["895d4e39.abf58"]]},{"id":"f54e199a.a00618","type":"file","z":"175572eb.e90ebd","name":"","filename":"/etc/netplan/01-network-card.yaml","appendNewline":true,"createDir":false,"overwriteFile":"true","x":1580,"y":560,"wires":[["4aa6a005.b89bd"]]},{"id":"f4e3f638.796478","type":"template","z":"175572eb.e90ebd","name":"Ethernet Dynamic & Wifi Dynamic","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"# This file describes the network interfaces available on your system\n# For more information, see netplan(5).\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp3s0:\n      dhcp4: yes","output":"str","x":1244.3213958740234,"y":620.1072006225586,"wires":[["335c1f1b.79c92"]]},{"id":"13992ef8.670861","type":"function","z":"175572eb.e90ebd","name":"active_save","func":"global.set('active_save',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":674.3213958740234,"y":400.1072006225586,"wires":[[]]},{"id":"9f468059.82132","type":"DataIn","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","update":false,"path":"/ip.address","x":694.3213958740234,"y":20.107200622558594,"wires":[]},{"id":"6d96d90d.9fb3f8","type":"DataIn","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","update":false,"path":"/wifi.address","x":694.3213958740234,"y":60.107200622558594,"wires":[]},{"id":"e88ef18.765501","type":"DataIn","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","update":false,"path":"/ip.gateway","x":694.3213958740234,"y":100.1072006225586,"wires":[]},{"id":"efa7bb69.a0f3a8","type":"DataIn","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","update":false,"path":"/ip.dns","x":674.3213958740234,"y":140.1072006225586,"wires":[]},{"id":"da341cc1.0f699","type":"DataIn","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","update":false,"path":"/wifi.ssid","x":684.3213958740234,"y":180.1072006225586,"wires":[]},{"id":"c781e47a.f6d9f8","type":"DataIn","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","update":false,"path":"/wifi.password","x":704.3213958740234,"y":220.1072006225586,"wires":[]},{"id":"8934cedd.36ad4","type":"DataIn","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","update":false,"path":"/ip.dhcp","x":684.3213958740234,"y":260.1072006225586,"wires":[]},{"id":"2b930491.6af69c","type":"DataIn","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","update":false,"path":"/wifi.dhcp","x":684.3213958740234,"y":300.1072006225586,"wires":[]},{"id":"b7d9b0e2.c005f","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/ip.dhcp","error":false,"x":464.32139587402344,"y":680.1072006225586,"wires":[["b062f549.f45588"]]},{"id":"39bc5afe.f35106","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/ip.address","error":false,"x":474.32139587402344,"y":720.1072006225586,"wires":[["584f2e3.aedeed"]]},{"id":"e17d938b.46c6e","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/ip.gateway","error":false,"x":474.32139587402344,"y":760.1072006225586,"wires":[["e086ef59.a111a"]]},{"id":"82b0f8b5.600a38","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/ip.dns","error":false,"x":454.32139587402344,"y":800.1072006225586,"wires":[["e6b7722d.fedc6"]]},{"id":"1cfaa1d.e4b995e","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ip.dhcp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":784.3213958740234,"y":680.1072006225586,"wires":[["895d4e39.abf58"]]},{"id":"584f2e3.aedeed","type":"function","z":"175572eb.e90ebd","name":"ip.address","func":"global.set('ip.address',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":634.3213958740234,"y":720.1072006225586,"wires":[["318a6f4c.da21e"]]},{"id":"e086ef59.a111a","type":"function","z":"175572eb.e90ebd","name":"ip.gateway","func":"global.set('ip.gateway',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":632.3213958740234,"y":760.1072006225586,"wires":[["99f5ef0b.75e0c"]]},{"id":"e6b7722d.fedc6","type":"function","z":"175572eb.e90ebd","name":"ip.dns","func":"global.set('ip.dns',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":634.3213958740234,"y":800.1072006225586,"wires":[["1fa64370.93881d"]]},{"id":"b062f549.f45588","type":"function","z":"175572eb.e90ebd","name":"ip.dhcp","func":"global.set('ip.dhcp',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":644.3213958740234,"y":680.1072006225586,"wires":[["1cfaa1d.e4b995e"]]},{"id":"bd19d09f.fa6dc","type":"function","z":"175572eb.e90ebd","name":"logic ip.dhcp.active","func":"if (global.get('ip.dhcp')===1 && global.get ('active_save')===1 ) {\nglobal.set ('ip.dhcp.active',1);\nreturn msg;\n}\nreturn ;","outputs":1,"noerr":0,"x":374.32139587402344,"y":280.1072006225586,"wires":[[]]},{"id":"c16152b7.bf347","type":"vis in","z":"175572eb.e90ebd","language":"en","x":914.3213958740234,"y":260.1072006225586,"wires":[["e4053647.e26678"]]},{"id":"e4053647.e26678","type":"switch","z":"175572eb.e90ebd","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"reboot","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1114.3213958740234,"y":280.1072006225586,"wires":[["7e69564b.1e9fc8"]]},{"id":"7e69564b.1e9fc8","type":"exec","z":"175572eb.e90ebd","command":"sudo reboot","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1314.3213958740234,"y":280.1072006225586,"wires":[[],[],[]]},{"id":"198d4b5e.ee40c5","type":"exec","z":"175572eb.e90ebd","command":"sudo ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"System Command","x":1114.3213958740234,"y":120.1072006225586,"wires":[[],[],[]]},{"id":"c039b6fb.1dabc8","type":"inject","z":"175572eb.e90ebd","name":"Restart node-RED","topic":"","payload":"node-red-restart","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1034.3213958740234,"y":40.107200622558594,"wires":[["198d4b5e.ee40c5"]]},{"id":"8b7bc769.151578","type":"exec","z":"175572eb.e90ebd","command":"sudo netplan apply","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":2210,"y":720,"wires":[["22d90106.a4726e","5cf9d4a2.375f1c"],[],[]]},{"id":"4aa6a005.b89bd","type":"change","z":"175572eb.e90ebd","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1740,"y":680,"wires":[["a81bf59c.705728","64529e6c.20525"]]},{"id":"267b74c5.deed2c","type":"inject","z":"175572eb.e90ebd","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":924.3213958740234,"y":220.1072006225586,"wires":[["7e69564b.1e9fc8"]]},{"id":"132cd0e8.06c87f","type":"delay","z":"e2b02a8c.c19d98","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":680,"wires":[["6dbd9e0d.70cfe"]]},{"id":"8a19be64.421fd","type":"template","z":"e2b02a8c.c19d98","name":"CAC","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"###Instructions from:\n#https://projects-42.nl/index.php/2018/ubuntu-18-04-lts-kiosk-for-web-or-rdp/\n###***03/31/2020***\n\n#\n# These things are run when an Openbox X Session is started.\n# You may place a similar script in $HOME/.config/openbox/autostart\n# to run user-specific things.\n#\n\n# If you want to use GNOME config tools...\n#\n#if test -x /usr/lib/x86_64-linux-gnu/gnome-settings-daemon >/dev/null; then\n#  /usr/lib/x86_64-linux-gnu/gnome-settings-daemon &\n#elif which gnome-settings-daemon >/dev/null 2>&1; then\n#  gnome-settings-daemon &\n#fi\n\n# If you want to use XFCE config tools...\n\n#\n#xfce-mcs-manager &\nunclutter &\n\n# Disable any form of screen saver / screen blanking / power management\nxset s off\nxset s noblank\nxset -dpms\n\nunclutter &\n\n# Allow quitting the X server with CTRL-ATL-Backspace\nsetxkbmap -option terminate:ctrl_alt_bksp\n# Start Chromium in kiosk mode\n\n#\nsed -i 's/\"exited_cleanly\":false/\"exited_cleanly\":true/' ~/.config/chromium/'Local State'\n#\n\nsed -i 's/\"exited_cleanly\":false/\"exited_cleanly\":true/; s/\"exit_type\":\"[^\"]\\+\"/\"exit_type\":\"Normal\"/' ~/.config/chromium/Default/Preferences\n#chromium-browser --disable-infobars --window-size=800,600 --kiosk --window-position=0,0 'http://localhost:1880/vis/index.html?CAC#A_home'\n\n#chromium-browser --window-size=480,320 --kiosk --window-position=0,0 http://localhost:1880/vis/index.html?CAC#A_home\n#chromium-browser http://localhost:1880/vis/index.html?CAC#A_home --window-size=800,600 --window-position=0,0 --start-fullscreen --kiosk --incognito --noerrdialogs --d$\n\nchromium-browser  --kiosk --start-fullscreen --window-position=0,0  http://localhost:1880/vis/index.html?CAC#A_home\n","output":"str","x":1050,"y":700,"wires":[[]]},{"id":"b3b15ce6.ef461","type":"template","z":"e2b02a8c.c19d98","name":"Home","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"###Instructions from:\n#https://projects-42.nl/index.php/2018/ubuntu-18-04-lts-kiosk-for-web-or-rdp/\n###***03/31/2020***\n\n#\n# These things are run when an Openbox X Session is started.\n# You may place a similar script in $HOME/.config/openbox/autostart\n# to run user-specific things.\n#\n\n# If you want to use GNOME config tools...\n#\n#if test -x /usr/lib/x86_64-linux-gnu/gnome-settings-daemon >/dev/null; then\n#  /usr/lib/x86_64-linux-gnu/gnome-settings-daemon &\n#elif which gnome-settings-daemon >/dev/null 2>&1; then\n#  gnome-settings-daemon &\n#fi\n\n# If you want to use XFCE config tools...\n\n#\n#xfce-mcs-manager &\nunclutter &\n\n# Disable any form of screen saver / screen blanking / power management\nxset s off\nxset s noblank\nxset -dpms\n\nunclutter &\n\n# Allow quitting the X server with CTRL-ATL-Backspace\nsetxkbmap -option terminate:ctrl_alt_bksp\n# Start Chromium in kiosk mode\n\n#\nsed -i 's/\"exited_cleanly\":false/\"exited_cleanly\":true/' ~/.config/chromium/'Local State'\n#\n\nsed -i 's/\"exited_cleanly\":false/\"exited_cleanly\":true/; s/\"exit_type\":\"[^\"]\\+\"/\"exit_type\":\"Normal\"/' ~/.config/chromium/Default/Preferences\n#chromium-browser --disable-infobars --window-size=800,600 --kiosk --window-position=0,0 'http://localhost:1880/vis/index.html?CAC#A_home'\n\n#chromium-browser --window-size=480,320 --kiosk --window-position=0,0 http://localhost:1880/vis/index.html?CAC#A_home\n#chromium-browser http://localhost:1880/vis/index.html?CAC#A_home --window-size=800,600 --window-position=0,0 --start-fullscreen --kiosk --incognito --noerrdialogs --d$\n\nchromium-browser  --kiosk --start-fullscreen --window-position=0,0  http://localhost:1880/vis/index.html#Home\n","output":"str","x":1050,"y":740,"wires":[[]]},{"id":"b6544a9e.82d308","type":"inject","z":"e2b02a8c.c19d98","name":"1","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":"0.5","x":1010,"y":780,"wires":[["b3b15ce6.ef461"]]},{"id":"a3c1767b.eabf08","type":"exec","z":"3ee541b0.01cf8e","command":"sudo reboot","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1100,"y":800,"wires":[[],[],[]]},{"id":"8f4c1135.821bc","type":"delay","z":"3ee541b0.01cf8e","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1040,"y":720,"wires":[["a3c1767b.eabf08"]]},{"id":"d892a9b5.087b78","type":"vis in","z":"e2b02a8c.c19d98","language":"en","x":260,"y":1240,"wires":[["8519c613.cd05b8"]]},{"id":"8519c613.cd05b8","type":"switch","z":"e2b02a8c.c19d98","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"git_pull_password","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":500,"y":1220,"wires":[["7b673bf8.650f84"]]},{"id":"7b673bf8.650f84","type":"switch","z":"e2b02a8c.c19d98","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"123456","vt":"str"},{"t":"neq","v":"123456","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":720,"y":1260,"wires":[["632ea4bf.b2df8c"],["632ea4bf.b2df8c"]]},{"id":"632ea4bf.b2df8c","type":"change","z":"e2b02a8c.c19d98","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"git_pull_password_accept","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":1380,"wires":[["c3f699a0.f45f58"]]},{"id":"c3f699a0.f45f58","type":"vis in","z":"e2b02a8c.c19d98","language":"en","x":930,"y":1380,"wires":[[]]},{"id":"5ed21428.f340bc","type":"inject","z":"e2b02a8c.c19d98","name":"","topic":"","payload":"0","payloadType":"num","repeat":"5","crontab":"","once":true,"onceDelay":0.1,"x":350,"y":1360,"wires":[["632ea4bf.b2df8c"]]},{"id":"bd388dfc.2f543","type":"exec","z":"e2b02a8c.c19d98","command":"sudo reboot","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1222.5,"y":711.25,"wires":[[],[],[]]},{"id":"6dbd9e0d.70cfe","type":"delay","z":"e2b02a8c.c19d98","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1162.5,"y":631.25,"wires":[["bd388dfc.2f543"]]},{"id":"50db69ca.bbbc18","type":"template","z":"175572eb.e90ebd","name":"Ethernet Static & Wifi Static","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"# This file describes the network interfaces available on your system\n# For more information, see netplan(5).\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp3s0:\n     dhcp4: no\n     addresses: [{{flow.ip.address}}/24]\n     gateway4: {{flow.ip.gateway}}\n     nameservers:\n       addresses: [{{flow.ip.dns}}]\n  wifis:\n    wlp4s0:\n      dhcp4: no\n      addresses: [{{flow.wifi.address}}/24]\n      gateway4: {{flow.wifi.gateway}}\n      nameservers:\n        addresses: [{{flow.ip.dns}}]\n      access-points:\n        \"{{flow.wifi.ssid}}\":\n          password: \"{{flow.wifi.password}}\"\n","output":"str","x":1240,"y":740,"wires":[["335c1f1b.79c92"]]},{"id":"ef439461.34a5c8","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.address","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":764.3213958740234,"y":1060.1072006225586,"wires":[["96611449.4cf558","e11003d9.2afde"]]},{"id":"c8dc4af2.eb82a8","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.ssid","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":764.3213958740234,"y":1093.440544128418,"wires":[["e11003d9.2afde","802cb2d2.8ba1d"]]},{"id":"10f3046f.c89efc","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.password","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":804.3213958740234,"y":1140.1072006225586,"wires":[["e11003d9.2afde","4fd590b3.e0a4c"]]},{"id":"e11003d9.2afde","type":"vis in","z":"175572eb.e90ebd","language":"en","x":954.3213958740234,"y":1020.1072006225586,"wires":[[]]},{"id":"3f5fcd87.160fd2","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/wifi.dhcp","error":false,"x":444.32139587402344,"y":1020.1072006225586,"wires":[["2248e23d.679a4e"]]},{"id":"c557b436.6ad2c8","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/wifi.address","error":false,"x":454.32139587402344,"y":1060.1072006225586,"wires":[["450a4025.b5399"]]},{"id":"168231d9.fde87e","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/wifi.ssid","error":false,"x":444.32139587402344,"y":1100.1072006225586,"wires":[["4c3b934d.82892c"]]},{"id":"ce800a3a.dd4c68","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/wifi.password","error":false,"x":464.32139587402344,"y":1140.1072006225586,"wires":[["70379ef2.9c5a8"]]},{"id":"96611449.4cf558","type":"function","z":"175572eb.e90ebd","name":"logic wifi.address","func":"if (global.get('ip.dhcp')===0 && global.get('wifi.dhcp')===0 && global.get('active_save')===1 ) {\nflow.set(\"wifi.address\", msg.payload);\nreturn msg;\n}","outputs":1,"noerr":0,"x":994.3213958740234,"y":1060.1072006225586,"wires":[["50db69ca.bbbc18"]]},{"id":"802cb2d2.8ba1d","type":"function","z":"175572eb.e90ebd","name":"logic wifi.ssid","func":"if (global.get('ip.dhcp')===0 && global.get('wifi.dhcp')===0 && global.get('active_save')===1 ) {\nflow.set(\"wifi.ssid\", msg.payload);\nreturn msg;\n}\n\n\n","outputs":1,"noerr":0,"x":984.3213958740234,"y":1099.1072006225586,"wires":[["50db69ca.bbbc18"]]},{"id":"4fd590b3.e0a4c","type":"function","z":"175572eb.e90ebd","name":"logic wifi.password","func":"if (global.get('ip.dhcp')===0 && global.get('wifi.dhcp')===0 && global.get('active_save')===1 ) {\nflow.set(\"wifi.password\", msg.payload);\nreturn msg;\n}\n\n\n","outputs":1,"noerr":0,"x":994.3213958740234,"y":1140.1072006225586,"wires":[["50db69ca.bbbc18"]]},{"id":"af56c431.95ab88","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.dhcp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":764.3213958740234,"y":1020.1072006225586,"wires":[["e11003d9.2afde"]]},{"id":"450a4025.b5399","type":"function","z":"175572eb.e90ebd","name":"wifi.address","func":"global.set('wifi.address',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":614.3213958740234,"y":1060.1072006225586,"wires":[["ef439461.34a5c8"]]},{"id":"4c3b934d.82892c","type":"function","z":"175572eb.e90ebd","name":"wifi.ssid","func":"global.set('wifi.ssid',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":602.3213958740234,"y":1100.1072006225586,"wires":[["c8dc4af2.eb82a8"]]},{"id":"70379ef2.9c5a8","type":"function","z":"175572eb.e90ebd","name":"wifi.password","func":"global.set('wifi.password',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":644.3213958740234,"y":1140.1072006225586,"wires":[["10f3046f.c89efc"]]},{"id":"2248e23d.679a4e","type":"function","z":"175572eb.e90ebd","name":"wifi.dhcp","func":"global.set('wifi.dhcp',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":624.3213958740234,"y":1020.1072006225586,"wires":[["af56c431.95ab88"]]},{"id":"fe16cf58.d51e7","type":"inject","z":"175572eb.e90ebd","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":true,"onceDelay":"3","x":250,"y":1040,"wires":[["3f5fcd87.160fd2","c557b436.6ad2c8","ce800a3a.dd4c68","12665237.c6b27e","168231d9.fde87e"]]},{"id":"65afa46.1bb705c","type":"NetworkIntf","z":"175572eb.e90ebd","name":"ethernet","x":1600,"y":80,"wires":[["210a6b38.2f4f44","e938c071.cfbb","dd921b89.9ce6a8","cba1c915.ddff48","454c37aa.dc6ab8"]]},{"id":"210a6b38.2f4f44","type":"function","z":"175572eb.e90ebd","name":"address","func":"msg.payload = msg.payload.networkInterfaces.enp3s0[0].address;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1780,"y":80,"wires":[["80ca9d1f.45c64"]]},{"id":"5e879ef4.4fb0a","type":"inject","z":"175572eb.e90ebd","name":"","topic":"","payload":"3","payloadType":"num","repeat":"3","crontab":"","once":true,"onceDelay":"0.5","x":1350,"y":180,"wires":[["65afa46.1bb705c","3cfd1e0c.24edd2"]]},{"id":"512e4c5d.f5de44","type":"vis in","z":"175572eb.e90ebd","language":"en","x":2150,"y":80,"wires":[[]]},{"id":"80ca9d1f.45c64","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ethernet.ip","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2000,"y":80,"wires":[["512e4c5d.f5de44"]]},{"id":"e938c071.cfbb","type":"function","z":"175572eb.e90ebd","name":"netmask","func":"msg.payload = msg.payload.networkInterfaces.enp3s0[0].netmask;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1780,"y":120,"wires":[["f017eb33.daed48"]]},{"id":"f017eb33.daed48","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ethernet.netmask","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2000,"y":120,"wires":[["512e4c5d.f5de44"]]},{"id":"dd921b89.9ce6a8","type":"function","z":"175572eb.e90ebd","name":"mac","func":"msg.payload = msg.payload.networkInterfaces.enp3s0[0].mac;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1770,"y":200,"wires":[["29f28809.c4e9f8"]]},{"id":"29f28809.c4e9f8","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ethernet.mac","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2000,"y":200,"wires":[["512e4c5d.f5de44"]]},{"id":"454c37aa.dc6ab8","type":"function","z":"175572eb.e90ebd","name":"cidr","func":"msg.payload = msg.payload.networkInterfaces.enp3s0[0].cidr;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1770,"y":240,"wires":[["4390e8c.6ee0118"]]},{"id":"4390e8c.6ee0118","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ethernet.cidr","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2000,"y":240,"wires":[["512e4c5d.f5de44"]]},{"id":"cba1c915.ddff48","type":"function","z":"175572eb.e90ebd","name":"family","func":"msg.payload = msg.payload.networkInterfaces.enp3s0[0].family;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1770,"y":160,"wires":[["6f3a1d41.d64024"]]},{"id":"6f3a1d41.d64024","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ethernet.family","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2000,"y":160,"wires":[["512e4c5d.f5de44"]]},{"id":"fafbe8bc.c5e188","type":"function","z":"175572eb.e90ebd","name":"wifi.address","func":"msg.payload = msg.payload.networkInterfaces.wlp4s0[0].address;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1790,"y":280,"wires":[["3ce55953.0ce786"]]},{"id":"3ce55953.0ce786","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.ip","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2000,"y":280,"wires":[["512e4c5d.f5de44"]]},{"id":"98b68abd.b7fa18","type":"function","z":"175572eb.e90ebd","name":"wifi netmask","func":"msg.payload = msg.payload.networkInterfaces.wlp4s0[0].netmask;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1790,"y":320,"wires":[["f06b16a8.80c378"]]},{"id":"f06b16a8.80c378","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.netmask","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2000,"y":320,"wires":[["512e4c5d.f5de44"]]},{"id":"51c45472.e2340c","type":"function","z":"175572eb.e90ebd","name":"wifi mac","func":"msg.payload = msg.payload.networkInterfaces.wlp4s0[0].mac;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1780,"y":400,"wires":[["63a47584.b32abc"]]},{"id":"63a47584.b32abc","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.mac","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2000,"y":400,"wires":[["512e4c5d.f5de44"]]},{"id":"b799a73.27cbb58","type":"function","z":"175572eb.e90ebd","name":"wifi cidr","func":"msg.payload = msg.payload.networkInterfaces.wlp4s0[0].cidr;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1780,"y":440,"wires":[["d8964b60.be8ba8"]]},{"id":"d8964b60.be8ba8","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.cidr","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2000,"y":440,"wires":[["512e4c5d.f5de44"]]},{"id":"4ccaf73e.fdd4d8","type":"function","z":"175572eb.e90ebd","name":"wifi family","func":"msg.payload = msg.payload.networkInterfaces.wlp4s0[0].family;\n\n\nreturn msg;","outputs":1,"noerr":0,"x":1780,"y":360,"wires":[["2f3f2f77.9872f"]]},{"id":"2f3f2f77.9872f","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.family","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2000,"y":360,"wires":[["512e4c5d.f5de44"]]},{"id":"3cfd1e0c.24edd2","type":"NetworkIntf","z":"175572eb.e90ebd","name":"wifi","x":1590,"y":200,"wires":[["fafbe8bc.c5e188","98b68abd.b7fa18","4ccaf73e.fdd4d8","b799a73.27cbb58"]]},{"id":"ebec95ea.4eae98","type":"function","z":"175572eb.e90ebd","name":"wifi_active_save","func":"global.set('wifi_active_save',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":684.3213958740234,"y":440.1072006225586,"wires":[[]]},{"id":"335c1f1b.79c92","type":"rbe","z":"175572eb.e90ebd","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":1490,"y":620,"wires":[["f54e199a.a00618"]]},{"id":"4a22286.b5404d8","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ip.address","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":764.3213958740234,"y":1280.1072006225586,"wires":[["173202d9.39f66d"]]},{"id":"5fa5fff1.4a9fb","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ip.gateway","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":764.3213958740234,"y":1313.440544128418,"wires":[["58eae5fc.7be7cc"]]},{"id":"66b64bb.d2bd4b4","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ip.dns","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760.9880218505859,"y":1346.7738876342773,"wires":[["f4679777.8a47b8"]]},{"id":"4399828.0b2a07c","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/ip.address","error":false,"x":454.32139587402344,"y":1280.1072006225586,"wires":[["ffa67469.c800a8"]]},{"id":"c92877b9.c01f78","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/ip.gateway","error":false,"x":454.32139587402344,"y":1320.1072006225586,"wires":[["57f9e12f.a3465"]]},{"id":"b232dcfe.9478d","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/ip.dns","error":false,"x":430,"y":1360,"wires":[["64ce9199.bdd33"]]},{"id":"173202d9.39f66d","type":"function","z":"175572eb.e90ebd","name":"logic ip.address","func":"if (global.get('ip.dhcp')===0 && global.get('wifi.dhcp')===1 && global.get('active_save')===1 ) {\nflow.set(\"ip.address\", msg.payload);\nreturn msg;\n}","outputs":1,"noerr":0,"x":984.3213958740234,"y":1280.1072006225586,"wires":[["26c87a1.ac8df86"]]},{"id":"58eae5fc.7be7cc","type":"function","z":"175572eb.e90ebd","name":"logic ip.gateway","func":"if (global.get('ip.dhcp')===0 && global.get('wifi.dhcp')===1 && global.get('active_save')===1 ) {\nflow.set(\"ip.gateway\", msg.payload);\nreturn msg;\n}\n\n\n","outputs":1,"noerr":0,"x":984.3213958740234,"y":1319.1072006225586,"wires":[["26c87a1.ac8df86"]]},{"id":"f4679777.8a47b8","type":"function","z":"175572eb.e90ebd","name":"logic ip.dns","func":"if (global.get('ip.dhcp')===0 && global.get('wifi.dhcp')===1 && global.get('active_save')===1 ) {\nflow.set(\"ip.dns\", msg.payload);\nreturn msg;\n}\n\n\n","outputs":1,"noerr":0,"x":994.3213958740234,"y":1355.1072006225586,"wires":[["26c87a1.ac8df86"]]},{"id":"ffa67469.c800a8","type":"function","z":"175572eb.e90ebd","name":"ip.address","func":"global.set('ip.address',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":614.3213958740234,"y":1280.1072006225586,"wires":[["4a22286.b5404d8"]]},{"id":"57f9e12f.a3465","type":"function","z":"175572eb.e90ebd","name":"ip.gateway","func":"global.set('ip.gateway',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":612.3213958740234,"y":1320.1072006225586,"wires":[["5fa5fff1.4a9fb"]]},{"id":"64ce9199.bdd33","type":"function","z":"175572eb.e90ebd","name":"ip.dns","func":"global.set('ip.dns',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":614.3213958740234,"y":1360.1072006225586,"wires":[["66b64bb.d2bd4b4"]]},{"id":"26c87a1.ac8df86","type":"template","z":"175572eb.e90ebd","name":"Ethernet Static & Wifi Dynamic","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"# This file describes the network interfaces available on your system\n# For more information, see netplan(5).\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp3s0:\n     dhcp4: no\n     addresses: [{{flow.ip.address}}/24]\n     gateway4: {{flow.ip.gateway}}\n     nameservers:\n       addresses: [{{flow.ip.dns}}]\n  wifis:\n    wlp4s0:\n      dhcp4: yes\n      access-points:\n        \"{{flow.wifi.ssid}}\":\n          password: \"{{flow.wifi.password}}\"","output":"str","x":1230,"y":680,"wires":[["335c1f1b.79c92"]]},{"id":"aefe5565.7edbd8","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.ssid","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":744.3213958740234,"y":1400.1072006225586,"wires":[["a5d80b2f.658558"]]},{"id":"32587f4a.dcf7d","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.password","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":784.3213958740234,"y":1446.7738571166992,"wires":[["336aaafc.ac26c6"]]},{"id":"d900f28b.742d","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/wifi.ssid","error":false,"x":424.32139587402344,"y":1406.7738571166992,"wires":[["517e7990.47a798"]]},{"id":"eb5d4e00.200f6","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/wifi.password","error":false,"x":444.32139587402344,"y":1446.7738571166992,"wires":[["5a27ac71.0c7484"]]},{"id":"a5d80b2f.658558","type":"function","z":"175572eb.e90ebd","name":"logic wifi.ssid","func":"if (global.get('ip.dhcp')===0 && global.get('wifi.dhcp')===1 && global.get('active_save')===1 ) {\nflow.set(\"wifi.ssid\", msg.payload);\nreturn msg;\n}\n\n\n","outputs":1,"noerr":0,"x":964.3213958740234,"y":1405.7738571166992,"wires":[["26c87a1.ac8df86"]]},{"id":"336aaafc.ac26c6","type":"function","z":"175572eb.e90ebd","name":"logic wifi.password","func":"if (global.get('ip.dhcp')===0 && global.get('wifi.dhcp')===1 && global.get('active_save')===1 ) {\nflow.set(\"wifi.password\", msg.payload);\nreturn msg;\n}\n\n\n","outputs":1,"noerr":0,"x":974.3213958740234,"y":1446.7738571166992,"wires":[["26c87a1.ac8df86"]]},{"id":"517e7990.47a798","type":"function","z":"175572eb.e90ebd","name":"wifi.ssid","func":"global.set('wifi.ssid',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":582.3213958740234,"y":1406.7738571166992,"wires":[["aefe5565.7edbd8"]]},{"id":"5a27ac71.0c7484","type":"function","z":"175572eb.e90ebd","name":"wifi.password","func":"global.set('wifi.password',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":624.3213958740234,"y":1446.7738571166992,"wires":[["32587f4a.dcf7d"]]},{"id":"836ed6b0.fce4a8","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ip.address","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":764.3213958740234,"y":880.1072006225586,"wires":[["849f3926.5c2698"]]},{"id":"df68aaf1.957798","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ip.gateway","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":764.3213958740234,"y":913.440544128418,"wires":[["a54616f9.b16068"]]},{"id":"327b19c5.983416","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ip.dns","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760.9880218505859,"y":946.7738876342773,"wires":[["39610a32.370946"]]},{"id":"30961456.a5d01c","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/ip.address","error":false,"x":454.32139587402344,"y":880.1072006225586,"wires":[["d843e088.f120d"]]},{"id":"4b1d40a7.cfb8d","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/ip.gateway","error":false,"x":454.32139587402344,"y":920.1072006225586,"wires":[["80c826c4.54b188"]]},{"id":"5d72104e.9580c","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/ip.dns","error":false,"x":434.32139587402344,"y":960.1072006225586,"wires":[["b8acebc0.9556e8"]]},{"id":"849f3926.5c2698","type":"function","z":"175572eb.e90ebd","name":"logic ip.address","func":"if (global.get('ip.dhcp')===0 && global.get('wifi.dhcp')===0 && global.get('active_save')===1 ) {\nflow.set(\"ip.address\", msg.payload);\nreturn msg;\n}","outputs":1,"noerr":0,"x":984.3213958740234,"y":880.1072006225586,"wires":[["50db69ca.bbbc18"]]},{"id":"a54616f9.b16068","type":"function","z":"175572eb.e90ebd","name":"logic ip.gateway","func":"if (global.get('ip.dhcp')===0 && global.get('wifi.dhcp')===0 && global.get('active_save')===1 ) {\nflow.set(\"ip.gateway\", msg.payload);\nreturn msg;\n}\n\n\n","outputs":1,"noerr":0,"x":984.3213958740234,"y":919.1072006225586,"wires":[["50db69ca.bbbc18"]]},{"id":"39610a32.370946","type":"function","z":"175572eb.e90ebd","name":"logic ip.dns","func":"if (global.get('ip.dhcp')===0 && global.get('wifi.dhcp')===0 && global.get('active_save')===1 ) {\nflow.set(\"ip.dns\", msg.payload);\nreturn msg;\n}\n\n\n","outputs":1,"noerr":0,"x":994.3213958740234,"y":955.1072006225586,"wires":[["50db69ca.bbbc18"]]},{"id":"d843e088.f120d","type":"function","z":"175572eb.e90ebd","name":"ip.address","func":"global.set('ip.address',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":614.3213958740234,"y":880.1072006225586,"wires":[["836ed6b0.fce4a8"]]},{"id":"80c826c4.54b188","type":"function","z":"175572eb.e90ebd","name":"ip.gateway","func":"global.set('ip.gateway',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":612.3213958740234,"y":920.1072006225586,"wires":[["df68aaf1.957798"]]},{"id":"b8acebc0.9556e8","type":"function","z":"175572eb.e90ebd","name":"ip.dns","func":"global.set('ip.dns',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":614.3213958740234,"y":960.1072006225586,"wires":[["327b19c5.983416"]]},{"id":"2fa759d3.275516","type":"DataIn","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","update":false,"path":"/wifi.gateway","x":694.3213958740234,"y":340.1072006225586,"wires":[]},{"id":"12665237.c6b27e","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/wifi.gateway","error":false,"x":454.32139587402344,"y":1180.1072006225586,"wires":[["96829cb9.77c52"]]},{"id":"96829cb9.77c52","type":"function","z":"175572eb.e90ebd","name":"wifi.gateway","func":"global.set('wifi.gateway',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":614.3213958740234,"y":1180.1072006225586,"wires":[["e2e7c6cc.23ac58"]]},{"id":"e2e7c6cc.23ac58","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.gateway","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":784.3213958740234,"y":1180.1072006225586,"wires":[["3d77ae92.e82622","e11003d9.2afde"]]},{"id":"3d77ae92.e82622","type":"function","z":"175572eb.e90ebd","name":"logic ip.gateway","func":"if (global.get('ip.dhcp')===0 && global.get('wifi.dhcp')===0 && global.get('active_save')===1 ) {\nflow.set(\"wifi.gateway\", msg.payload);\nreturn msg;\n}\n\n\n","outputs":1,"noerr":0,"x":964.3213958740234,"y":1180.1072006225586,"wires":[["50db69ca.bbbc18"]]},{"id":"6d3b0e2f.efc8f","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.ssid","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":764.3213958740234,"y":580.1072006225586,"wires":[["a5703b74.d51368"]]},{"id":"9b4af562.2a4368","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.password","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":804.3213958740234,"y":626.7738571166992,"wires":[["13cbfafe.e96065"]]},{"id":"2ce8fea.7b50e02","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/wifi.ssid","error":false,"x":444.32139587402344,"y":586.7738571166992,"wires":[["7ddcf2e6.f8d6ec"]]},{"id":"4569fdba.962de4","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/wifi.password","error":false,"x":464.32139587402344,"y":626.7738571166992,"wires":[["2b16fcc6.5f7984"]]},{"id":"7ddcf2e6.f8d6ec","type":"function","z":"175572eb.e90ebd","name":"wifi.ssid","func":"global.set('wifi.ssid',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":602.3213958740234,"y":586.7738571166992,"wires":[["6d3b0e2f.efc8f"]]},{"id":"2b16fcc6.5f7984","type":"function","z":"175572eb.e90ebd","name":"wifi.password","func":"global.set('wifi.password',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":644.3213958740234,"y":626.7738571166992,"wires":[["9b4af562.2a4368"]]},{"id":"a5703b74.d51368","type":"function","z":"175572eb.e90ebd","name":"logic ip.address","func":"if (global.get('ip.dhcp')===1 && global.get('wifi.dhcp')===1 && global.get('active_save')===1 ) {\nflow.set(\"wifi.ssid\", msg.payload);\nreturn msg;\n}\n\n","outputs":1,"noerr":0,"x":944.3213958740234,"y":580.1072006225586,"wires":[["f4e3f638.796478"]]},{"id":"13cbfafe.e96065","type":"function","z":"175572eb.e90ebd","name":"logic wifi.password","func":"if (global.get('ip.dhcp')===1 && global.get('wifi.dhcp')===1 && global.get('active_save')===1 ) {\nflow.set(\"wifi.password\", msg.payload);\nreturn msg;\n}\n\n","outputs":1,"noerr":0,"x":974.3213958740234,"y":620.1072006225586,"wires":[["f4e3f638.796478"]]},{"id":"bff90c12.4a596","type":"vis in","z":"175572eb.e90ebd","language":"en","x":310,"y":480,"wires":[["b2ce77e8.2db4f8"]]},{"id":"b2ce77e8.2db4f8","type":"switch","z":"175572eb.e90ebd","name":"topic active_save","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"active_save","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":350,"y":540,"wires":[["dc63283e.9bd5e8"]]},{"id":"dc63283e.9bd5e8","type":"switch","z":"175572eb.e90ebd","name":"1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":250,"y":580,"wires":[["2ce8fea.7b50e02","4569fdba.962de4","b7d9b0e2.c005f","39bc5afe.f35106","e17d938b.46c6e","82b0f8b5.600a38","30961456.a5d01c","4b1d40a7.cfb8d","5d72104e.9580c","3f5fcd87.160fd2","c557b436.6ad2c8","168231d9.fde87e","12665237.c6b27e","ce800a3a.dd4c68","4399828.0b2a07c","c92877b9.c01f78","b232dcfe.9478d","d900f28b.742d","eb5d4e00.200f6","79038b3e.50e2c4","de9f5e0c.6ddc1","65d9d185.24d4c","99fd8e45.dcbb5","9c096f19.e4b94","c0f4a666.d22bd8"]]},{"id":"8bb62eef.d87a5","type":"inject","z":"175572eb.e90ebd","name":"","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":true,"onceDelay":"3","x":290,"y":800,"wires":[["b7d9b0e2.c005f","39bc5afe.f35106","e17d938b.46c6e","82b0f8b5.600a38"]]},{"id":"590311f7.dcbd3","type":"template","z":"175572eb.e90ebd","name":"Ethernet Dynamic & Wifi Static","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"# This file describes the network interfaces available on your system\n# For more information, see netplan(5).\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp3s0:\n      dhcp4: yes\n  wifis:\n    wlp4s0:\n      dhcp4: no\n      addresses: [{{flow.wifi.address}}/24]\n      gateway4: {{flow.wifi.gateway}}\n      nameservers:\n        addresses: [{{flow.ip.dns}}]\n      access-points:\n        \"{{flow.wifi.ssid}}\":\n          password: \"{{flow.wifi.password}}\"\n","output":"str","x":1250,"y":800,"wires":[["335c1f1b.79c92"]]},{"id":"46fe2249.d5f05c","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.address","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":1540,"wires":[["cd692662.cca5f8"]]},{"id":"8080fb3f.7b0dd8","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.ssid","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":1573.3333435058594,"wires":[["336faad0.c2e176"]]},{"id":"465d8f01.000d4","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.password","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":1620,"wires":[["5956014f.488fd"]]},{"id":"79038b3e.50e2c4","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/wifi.dhcp","error":false,"x":440,"y":1500,"wires":[["91f5cb0e.7de988"]]},{"id":"de9f5e0c.6ddc1","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/wifi.address","error":false,"x":450,"y":1540,"wires":[["915e4b68.b79f08"]]},{"id":"65d9d185.24d4c","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/wifi.ssid","error":false,"x":440,"y":1580,"wires":[["97cee2f5.e2237"]]},{"id":"99fd8e45.dcbb5","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/wifi.password","error":false,"x":460,"y":1620,"wires":[["813ccd0f.d7932"]]},{"id":"cd692662.cca5f8","type":"function","z":"175572eb.e90ebd","name":"logic wifi.address","func":"if (global.get('ip.dhcp')===1 && global.get('wifi.dhcp')===0 && global.get('active_save')===1 ) {\nflow.set(\"wifi.address\", msg.payload);\nreturn msg;\n}","outputs":1,"noerr":0,"x":990,"y":1540,"wires":[["590311f7.dcbd3"]]},{"id":"336faad0.c2e176","type":"function","z":"175572eb.e90ebd","name":"logic wifi.ssid","func":"if (global.get('ip.dhcp')===1 && global.get('wifi.dhcp')===0 && global.get('active_save')===1 ) {\nflow.set(\"wifi.ssid\", msg.payload);\nreturn msg;\n}\n\n\n","outputs":1,"noerr":0,"x":980,"y":1579,"wires":[["590311f7.dcbd3"]]},{"id":"5956014f.488fd","type":"function","z":"175572eb.e90ebd","name":"logic wifi.password","func":"if (global.get('ip.dhcp')===1 && global.get('wifi.dhcp')===0 && global.get('active_save')===1 ) {\nflow.set(\"wifi.password\", msg.payload);\nreturn msg;\n}\n\n\n","outputs":1,"noerr":0,"x":990,"y":1620,"wires":[["590311f7.dcbd3"]]},{"id":"7c2c262c.af4518","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.dhcp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":1500,"wires":[[]]},{"id":"915e4b68.b79f08","type":"function","z":"175572eb.e90ebd","name":"wifi.address","func":"global.set('wifi.address',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":1540,"wires":[["46fe2249.d5f05c"]]},{"id":"97cee2f5.e2237","type":"function","z":"175572eb.e90ebd","name":"wifi.ssid","func":"global.set('wifi.ssid',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":598,"y":1580,"wires":[["8080fb3f.7b0dd8"]]},{"id":"813ccd0f.d7932","type":"function","z":"175572eb.e90ebd","name":"wifi.password","func":"global.set('wifi.password',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":640,"y":1620,"wires":[["465d8f01.000d4"]]},{"id":"91f5cb0e.7de988","type":"function","z":"175572eb.e90ebd","name":"wifi.dhcp","func":"global.set('wifi.dhcp',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":620,"y":1500,"wires":[["7c2c262c.af4518"]]},{"id":"9c096f19.e4b94","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/wifi.gateway","error":false,"x":450,"y":1660,"wires":[["3a21b270.7fff8e"]]},{"id":"3a21b270.7fff8e","type":"function","z":"175572eb.e90ebd","name":"wifi.gateway","func":"global.set('wifi.gateway',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":1660,"wires":[["d4bb12e5.527e"]]},{"id":"d4bb12e5.527e","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"wifi.gateway","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":1660,"wires":[["76fa4531.4a2b3c"]]},{"id":"76fa4531.4a2b3c","type":"function","z":"175572eb.e90ebd","name":"logic ip.gateway","func":"if (global.get('ip.dhcp')===1 && global.get('wifi.dhcp')===0 && global.get('active_save')===1 ) {\nflow.set(\"wifi.gateway\", msg.payload);\nreturn msg;\n}\n\n\n","outputs":1,"noerr":0,"x":960,"y":1660,"wires":[["590311f7.dcbd3"]]},{"id":"895d4e39.abf58","type":"vis in","z":"175572eb.e90ebd","language":"en","x":974.3213958740234,"y":680.1072006225586,"wires":[[]]},{"id":"a81bf59c.705728","type":"debug","z":"175572eb.e90ebd","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1960,"y":500,"wires":[]},{"id":"22d90106.a4726e","type":"debug","z":"175572eb.e90ebd","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2140,"y":560,"wires":[]},{"id":"64529e6c.20525","type":"delay","z":"175572eb.e90ebd","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1960,"y":720,"wires":[["8b7bc769.151578"]]},{"id":"2adc0d1a.916d02","type":"vis in","z":"175572eb.e90ebd","language":"en","x":240,"y":920,"wires":[["ee448396.15fd4"]]},{"id":"ee448396.15fd4","type":"switch","z":"175572eb.e90ebd","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"activate_settings","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":230,"y":980,"wires":[["3f5fcd87.160fd2","c557b436.6ad2c8","168231d9.fde87e","ce800a3a.dd4c68","12665237.c6b27e"]]},{"id":"4cc59fe9.7e654","type":"vis in","z":"175572eb.e90ebd","language":"en","x":290,"y":660,"wires":[["b6cd7890.f1fa78"]]},{"id":"b6cd7890.f1fa78","type":"switch","z":"175572eb.e90ebd","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"activate_settings","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":280,"y":720,"wires":[["b7d9b0e2.c005f","39bc5afe.f35106","e17d938b.46c6e","82b0f8b5.600a38"]]},{"id":"a8dff100.7ff06","type":"exec","z":"175572eb.e90ebd","command":"sudo reboot","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":2380,"y":640,"wires":[[],[],[]]},{"id":"5cf9d4a2.375f1c","type":"delay","z":"175572eb.e90ebd","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2240,"y":600,"wires":[["a8dff100.7ff06"]]},{"id":"fec1e57.8489818","type":"vis in","z":"175572eb.e90ebd","language":"en","x":1310,"y":100,"wires":[["fe49f272.89896"]]},{"id":"fe49f272.89896","type":"switch","z":"175572eb.e90ebd","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"network_settings","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1430,"y":40,"wires":[["65afa46.1bb705c","3cfd1e0c.24edd2"]]},{"id":"5c2f21f5.9e2a3","type":"change","z":"175572eb.e90ebd","name":"settings","rules":[{"t":"set","p":"topic","pt":"msg","to":"ip.dns","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":1700,"wires":[["9dbc5203.317b4"]]},{"id":"c0f4a666.d22bd8","type":"DataOut","z":"175572eb.e90ebd","collection":"c6286de9.28a88","name":"","path":"/ip.dns","error":false,"x":449.01197814941406,"y":1713.2261123657227,"wires":[["2082e2fc.73ed4e"]]},{"id":"9dbc5203.317b4","type":"function","z":"175572eb.e90ebd","name":"logic ip.dns","func":"if (global.get('ip.dhcp')===1 && global.get('wifi.dhcp')===0 && global.get('active_save')===1 ) {\nflow.set(\"ip.dns\", msg.payload);\nreturn msg;\n}\n\n\n","outputs":1,"noerr":0,"x":970,"y":1700,"wires":[["590311f7.dcbd3"]]},{"id":"2082e2fc.73ed4e","type":"function","z":"175572eb.e90ebd","name":"ip.dns","func":"global.set('ip.dns',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":633.3333740234375,"y":1713.3333129882812,"wires":[["5c2f21f5.9e2a3"]]},{"id":"a6a69190.120c1","type":"vis in","z":"f6e410f4.f25f1","language":"en","x":970,"y":1100,"wires":[["fbfc1750.9517b8"]]},{"id":"fbfc1750.9517b8","type":"switch","z":"f6e410f4.f25f1","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"y1","vt":"str"},{"t":"eq","v":"y2","vt":"str"},{"t":"eq","v":"y3","vt":"str"},{"t":"eq","v":"y4","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":1090,"y":1220,"wires":[["668ec9ab.826488"],["ee97f3de.e6311"],["949613f9.8f0dd"],["98e71efc.fdafc"]]},{"id":"1e1ec82f.455e18","type":"change","z":"f6e410f4.f25f1","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"x3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":360,"wires":[["52828474.22210c"]]},{"id":"d8507463.4a9f08","type":"change","z":"f6e410f4.f25f1","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"x2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":400,"wires":[["52828474.22210c"]]},{"id":"5ab1f991.377388","type":"change","z":"f6e410f4.f25f1","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"x1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":440,"wires":[["52828474.22210c"]]},{"id":"52828474.22210c","type":"vis in","z":"f6e410f4.f25f1","language":"en","x":1000,"y":420,"wires":[[]]},{"id":"24c6b96f.fa26c6","type":"change","z":"f6e410f4.f25f1","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"ad1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":740,"wires":[["8d317ff1.f75db"]]},{"id":"fa0a54e9.4d41e8","type":"change","z":"f6e410f4.f25f1","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"ad2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":780,"wires":[["8d317ff1.f75db"]]},{"id":"8d317ff1.f75db","type":"vis in","z":"f6e410f4.f25f1","language":"en","x":1040,"y":760,"wires":[[]]},{"id":"262d66bd.b2e04a","type":"change","z":"f6e410f4.f25f1","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"ad3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":820,"wires":[["8d317ff1.f75db"]]}]
